{"version":3,"sources":["json sync /^/.*/.commits/.json$","json sync /^/.*/.score/.json$","json sync /^/.*/.corpus/.json$","json sync /^/.*/.pulls/.json$","components/analyzer/GithruClasses.js","modules/index.js","components/ColorClasses.js","components/CalSimilarity.js","components/analyzer/GitAnalyzer.js","components/TemporalFilter.js","components/TemporalSelector.js","components/ValueSlider.js","components/analyzer/FileStructureAnalyzer.js","components/FileIcicleSummary.js","components/GroupSummary.js","components/BranchSummary.js","components/CommitGraphDrawCluster.js","components/CommitGraph.js","components/CommitGraphClustering.js","components/KeywordTextAreaFilter.js","components/PreferenceSliders.js","components/ManageParameters.js","components/InformationFragments.js","components/container/SidePanelContentUnit.js","components/CaptureTab.js","components/library/wordCloudGenerator.js","components/DetailCompare.js","components/CompareSummary.js","components/HighlightQuery.js","components/LegendIcons.js","AppV2.js","Home.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","CommitNode","commit","this","seq","hasNoFirstParentChild","isMainStem","isRoot","implicitBranchNo","isMergeCommit","isMergeTraversed","mergedToNode","undefined","isLeaf","pullRequestHeads","pullRequestMerges","mergeNodes","mergeSquashCommit","mergeNodesContainRelease","mergeNodesContainMajorRelease","cloc","isFiltered","tags","branches","firstParentTreeBranchNames","firstParentTreeLeafNode","branchNumbers","traversed","isMajorRelease","isRelease","releaseTagString","locStat","LOCStat","calCLOCStat","entries","diffStat","files","forEach","entry","value","clocSum","insertions","deletions","insertLocSum","deleteLocSum","console","log","ratio","addStat","targetStat","CommitEdge","childId","parentId","fromNodeId","toNodeId","CommitCluster","node","pref","nodeCount","mergedNodeCount","onPullRequestBranch","nodeList","cluster","length","parent","child","scoresList","score","push","DataTypeByNameMap","authors","authorsLOCStat","keywords","commitTypes","commitTypesLOCStat","clocByFiles","insertionByFiles","deletionByFiles","touchCountByFiles","clocByDirs","insertionByDirs","deletionByDirs","touchCountByDirs","fileToAuthor","commitCount","ClusterData","corpusData","useHeuristicMerge","idxToTfidfSum","keywordsByRank","name","analyze","mockKeywords","idx","isHM","cloneDeep","author","Array","commitType","increaseMapValueByKeyArray","corpus","reduce","prev","cur","c","increaseMapValueByKey","commitNode","subCommit","fileInfos","file","hasOwnProperty","count","dict","tfidf","alreadyIncreased","fileName","f","addValueToMap","fileNameSlice","split","slice","i","prevDir","dir","sort","a","b","key","keyArray","addLOCStatValueToMap","ClusterNode","y","blockList","x","width","height","color","branchType","isNonConfilctMerge","isIncludeFiltered","isExcludeFiltered","ClusterBlock","startCommitSeq","endCommitSeq","containsMergedNodes","containsMergeTraversedNodes","mergedToNodeList","clusterNode","isNonConflictMergedSource","isNonConflictMergedTarget","containsMajorRelease","releaseNodeList","HALinkIds","KeywordFilter","isIncludes","attrName","keyword","CapturedSummaryInfo","clusterNodes","groupingParameters","interestedItemList","CommitAttributeNames","PreferenceList","PreferenceWeights","commitDate","message","BranchTypes","updateClusterOverviewHeight","createAction","updateGlobalCommitsByTemporalFilter","updateCommitsByTemporalFilter","udpateCommitsByTemporalBrush","updateClusterThreshold","updateNonConflictGroupingLevel","updateReleaseBinningLevel","updateSummaryByLOC","updateKeywordFilterList","updatePreferenceWeights","updateHideFiles","updateUseHeuristicMerge","addCapturedSummaryInfoList","removeCapturedSummaryInfoList","updateCurrentCapturedSummaryInfoId","addItemsToCapturedSummaryInfo","removeItemFromCaptureSummaryInfo","addFragmentHistory","clearFragments","registerFavoriteFragment","unregisterFavoriteFragment","updateCapturedSummaryInfoListForCompare","updateHighlightQuery","updateShowMergeLink","updateBranchShowMapByType","updateScrollToRight","summaryPane","initialState","gitAnalyzer","globalCommitSeqSelectionByTemporalFilter","commitSeqSelectionByTemporalFilter","commitSeqSelection","layout","overviewWidth","leftPaneWidth","rightPaneWidth","rightPaneMargin","clusterOverviewSliderWidth","clusterOverviewWidth","temporalAreaHeight","temporalSelectorHeight","orgClusterOverviewHeight","clusterOverviewHeight","inspectionPaneWidth","titlePanelHeight","preferenceWeights","threshold","nonConflictGroupingLevel","releaseBinningLevel","keywordFilterList","branchShowMapByType","EXPLICIT","IMPLICIT","PR_MERGED","PR_CLOSED","PR_OPEN","highlightQuery","showMergeLink","summaryParameters","summaryByLOC","hideFiles","searchResultList","capturedSummaryInfoSeq","capturedSummaryInfoList","currentCapturedSummaryInfoId","favoriteFragments","fragmentHistory","capturedSummaryInfoListForCompare","scrollToRight","handleActions","state","action","payload","type","bool","concat","splice","itemList","info","findIndex","d","newItems","filter","item","fragment","exists","fi","index","BranchColors","MAIN_STEM","colors","getListOfColors","AttributeColors","date","highlight","ScoreColorMap","changeRGBColorByOpacity","opacity","d3","r","g","getScoreTemp","getFileList","getJaccardSimilarity","test","intersectionLen","intersection","unionLen","union","getTfidfCosineSimilarity","aVector","bVector","aKeys","bKeys","innerProduct","shift","aLengthSqr","bLengthSqr","k","Math","sqrt","GitAnalyzer","json","scoreJson","corpusJson","pullJson","defaultThresholdStep","repoName","releasePrefix","mainStemBranchName","keywordMatch","kfList","toLowerCase","val","indexOf","lowLevel","roots","allNodeList","nodesMap","edges","firstParentIdMap","childIdMap","parentIdMap","maxY","headId","branchesMap","gitData","scoreData","pullData","pullMapByNumber","mergeSquashCommitNumber","buildContextAbstractionGraph","isHead","edge","getNodeById","rootNode","startsWith","initStack","n","pop","more","no","from","add","Set","p","number","tfidfList","pull","commits","reverse","addNode","parents","addRoot","head","sha","merge_commit_sha","childCommit","merge","substring","addEdge","tag","join","items","branchedNodesNotHead","branchedNodes","FPTreeNodeListMapByNodeId","branchedNode","firstParentNodesOrderedList","isHeadBranch","bno","rootCount","firstParentChildNodes","getChildNodes","childNode","findMerges","branchNames","branchBackTracking","selection","prefMap","filters","getClusters","isExcludes","inKF","exKF","isFilteredOut","thresholdSet","parentNode","nextFirstParentChildNodeWithSameBranchNo","scores","getScoreByPreferences","sum","sortedThresholdList","container","clusterMapByNodeSeq","prefNormalizedThreshold","targetNodeList","isClusterCut","firstParentChildNode","doneSet","has","sameBranchClusters","lastBranchName","lastNode","prNum","Number","closed","merged","node1","node2","maxCommitHours","verbose","commit1","commit2","dateNormFunc","range","domain","diffHours","min","abs","Date","toFixed","dataName","endsWith","vs","toUpperCase","str","searchStr","replaceStr","findAttrs","resultNodeList","foundMap","attr","values","v","dt","toISOString","parseTime","trimYYYYMMDD","branchClusterNodes","cn","useStyles","makeStyles","theme","formControl","margin","dateField","fontSize","padding","SearchDiv","props","RadioGroup","style","onChange","className","Radio","icon","checkedIcon","Select","release","heandleReleaseChange","native","root","disableRipple","TextField","startRelease","defaultValue","defaultDateValue","event","handleDateChange","target","TemporalFilter","classes","React","useState","fromType","setFromType","toType","setToType","startDate","setStartDate","endDate","setEndDate","headSeq","rootSeq","defaultStartSeq","defaultEndSeq","setStartRelease","endRelease","setEndRelease","dispatch","useDispatch","rootDate","headDate","getSeqByDate","isStart","FormControl","component","alignItems","defaultReleaseValue","Button","size","variant","onClick","fromSeq","toSeq","actions","commitBrush","commitSeqXScale","navRender","globalStartSeq","globalEndSeq","arrowSvgHeight","focusRelativeHeightPosition","globalFilteredNodeList","handleTemporalLabel","xTemporalScale","leftAlignWidth","rightAlignWidth","text","getTemporalLabelByDate","invert","handleCommitLabel","newXScale","rangeRound","newSel","startLabel","endLabel","drawTemporalToCommitArrow","tSel","cSel","drawSelectionArrow","drawCommitToClusterArrow","svg","rangeX","rangeY","selectAll","remove","data","enter","append","navigationSvg","brushHandleSize","bandwidth","histogram","thresholds","ticks","bins","temporalYSizeHalf","yTemporalCommitCountScale","yTemporalCLOCScale","tempArea","datum","x0","y0","y1","curve","alpha","temporalAxisHeight","tempAxis","call","tickSizeOuter","tickSize","releaseTagNodeList","links","on","pageX","pageY","focusHeight","extent","temporalBrush","move","newSelection","startBinIndex","endBinIndex","getCommitBrushSelectionsTriggeredByTemporalBrush","commitSeqScale","round","commitBrushFunc","brushG","select","_groups","__brush","TemporalSelector","useSelector","sel","isInitRef","useRef","useEffect","current","position","zIndex","float","top","PrettoSlider","spacing","button","minWidth","withStyles","thumb","backgroundColor","border","marginTop","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","rail","mark","Slider","ValueSlider","defaultStepValue","stepValue","setStepValue","max","setMax","divId","thresholdList","arrayIndices","aIndex","sv","align","onChangeCommitted","newValue","changeThreshold","marks","step","orientation","valueLabelDisplay","fontWeight","FileStructureAnalyzer","rawData","file2Author","path","fileStructure","analyzePath","compressStructure","updateAuthorInfo","pathDirectories","includes","curDirectory","subPath","childNum","children","childAuthors","FileIcicleSummary","rawModLocData","rawInsertLocData","rawDeleteLocData","rawModNumData","pageNum","partition","format","rectHeight","x1","labelVisible","focus","currentCLocMode","fileAnalyzer","rawModData","widthScale","getFileStructure","curHeight","cell","descendants","each","rect","tspan","t","transition","duration","title","authorArray","rootData","table","tableCell","paddingLeft","paddingRight","paddingTop","paddingBottom","verticalAlign","display","flexDirection","maxHeight","maxWidth","overflowY","bar","div","font","vseparator","hover","textDecoration","hout","fill","Cause","scoreSumMap","scoreMap","prefName","normedScore","scoreSumList","colorIndex","xWidth","background","strokeWidth","overflow","BarChartSummary","ref","dataNameList","clusterData","totalCount","numByDataName","dataList","authorList","commitTypeList","keywordList","processKey","word","replace","xScale","yAuthorScale","paddingInner","paddingOuter","yCommitTypeScale","svgAuthor","svgCommitType","yAuthorAxis","tickSizeInner","yCommitTypeAxis","xAxis","tickFormat","rectsAuthor","nameMargin","getTextValue","xAxisRenderAuthor","yAxisRenderAuthor","rectsCommitType","xAxisRenderCommitType","yAxisRenderCommitType","aMin","aMax","WordCloud","document","getElementById","list","wait","rotateRatio","weightFactor","dimension","MessagePrint","flexWrap","trim","line","li","cursor","onMouseOver","onMouseOut","NodeDetail","isParent","isChild","TableRow","visibility","TableCell","childClass","visible","body","Fragment","wordBreak","NodeDetailList","Table","TableBody","mn","GroupSummary","selectedClusterNode","arrowStartX","arrowWidth","rightWidth","arrowHeight","pointerEvents","x2","y2","stroke","strokeOpacity","fileSummaryWidth","barChartWidth","marginRight","branchSummaryValueRectMouseover","rectMargin","sameValueElements","newColor","clusterId","branchSummaryValueRectMouseleave","orgColor","BranchSummary","branchNo","showAttrs","showAttrValueCount","showAttrRenderFlow","showByCommitCountOnly","selectedClusterNodeIndex","setSelectedClusterNodeIndex","divHeight","itemMinWidth","totalCommitCount","totalCLOC","totalValue","arrowDivWidth","getBranchNamesFromBranchClusterNodes","rectWidths","branchName","drawSummary","branchSummaryClusterRectStr","topDataList","attrList","attrIndex","parentIndex","itemHeight","useLayoutEffect","JSON","stringify","prevIndex","currentX","branchNum","containReleaseList","block","containReleaseNames","arrowDivStartX","startCurrentX","whiteSpace","summaryStartX","overWidth","moverLinks","l","mleaveLinks","link","getClusterNodeColor","getFileSetForCluster","ignoreFiles","highlightKeywordMatchBlock","currentClusterNodeList","searchResultCommitSeqList","matchSvg","blockNode","commitRect","CommitGraph","parse","sliderWidth","minBlockShow","setThresholdList","prevSelectedClusterNodesInfo","selectedClusterNodesInfo","setSelectedClusterNodesInfo","clusteringResult","clusterNodesResult","clusterNodesByBranchNo","groupSvgWidth","totalStat","showGroupSummaryFunc","currentClusterNodes","multi","shiftKey","buildAndDrawClusterNodes","clusterList","clusterNodeList","startPoint","endPoint","xArray","clusterNodeMapByCluster","cIndex","getClusterBranchType","blockStartSeq","blockIndex","prevClusterIndexOfBlock","currentClusterIndexOfBlock","maxBlockIndex","yArray","startX","endX","endXOfClusterTree","pc","buildClusterNodes","defaultBlockOpacity","defaultClusterOpacity","startBlockIndex","endBlockIndex","maxHeightCommitCount","summaryLineHeight","yRange","minHeight","xBandScale","yBandScale","xRectScale","blockHeightScale","clusterOverviewSvg","colorByBranchNo","brushedClusterNodeList","branchNodesListForSwitching","branchNodes","fileSetList","fileSetOrg","fileSetSkip","fileSetTarget","targetClusterNode","blockMapByNode","toBlockListMapByBlock","toBlockList","matchedBlock","toBlock","blocksBox","boxWidth","boxHeight","clusterColor","drawBlockList","linkVertical","linkHorizontal","dataset","source","linkFunc","releaseBlockList","releases","pushDataSet","sx","sy","tx","ty","minNX","maxNX","elem","branchUnderlineWidth","html","drawClusters","searchByKeywords","getOverviewClusters","th","justifyContent","alert","textArea","marginBottom","KeywordTextAreaFilter","includeFilterStr","setIncludeFilterStr","excludeFilterStr","setExcludeFilterStr","parseFilterStr","noValidate","autoComplete","Form","Control","as","rows","placeholder","prefDiv","textAlign","textTransform","buttons","HorizontalSlider","circle","PreferenceSliders","setPref","newPref","ManageParameters","hideFilesStr","setHideFilesStr","Checkbox","checked","fList","SectionTitle","borderBottom","favorites","history","SidePanelContentUnit","show","setShow","CaptureTab","checkedDic","setCheckedDic","capturedInfo","firstCommit","endCommit","getCommitName","disabled","checkedList","cList","KeywordCloud","aList","bList","interList","canvas1","canvas2","changeOpacity","bMin","bMax","DetailCompare","aCapturedSummaryInfo","bCapturedSummaryInfo","aName","bName","reducingCapturedSummary","aCapturedSummaryInfoKeywordDict","bCapturedSummaryInfoKeywordDict","aCapturedSummaryInfoKeyword","bCapturedSummaryInfoKeyword","aCloc","bCloc","aCommitNum","bCommitNum","interAuthorList","aAuthorData","bAuthorData","aAuthorArrayDataLoc","bAuthorArrayDataLoc","aAuthorArrayDataCommit","bAuthorArrayDataCommit","aCommitTypeArrayDataLoc","bCommitTypeArrayDataLoc","aCommitTypeArrayDataCommit","bCommitTypeArrayDataCommit","clusterNodesList","capturedSummaryInfo","newCluster","aClusterNode","bClusterNode","aAuthorArrayData","bAuthorArrayData","aCommitTypeArrayData","bCommitTypeArrayData","authorCollector","rawAuthor","authorDataCollector","authorData","commitNum","inIntersection","authorKey","loc","accumulatingLoc","sortByLoc","accumulatingCommitNum","sortByCommitNum","commitTypeCollector","interCommitTypeList","commitTypeDataCollector","commitTypeData","aCommitTypeData","bCommitTypeData","commitTypeKey","interKeywords","aClusterKeywordData","bClusterKeywordData","presentingKeywordNum","aKeywords","bKeywords","generateFileDirData","aData","bData","aArray","bArray","aSum","bSum","aDataTempArray","bDataTempArray","interArray","reducingCapturedSummaryCloc","fileDict","reducingCapturedSummaryCommitNum","aRawModLocFileData","aRawModNumFileData","bRawModLocFileData","bRawModNumFileData","aLocFileArray","bLocFileArray","aNumFileArray","bNumFileArray","aFileArray","bFileArray","num","array","currentLocSum","currentCommitSum","updateXAxis","updateAuthorSvg","updateCommitTypeSvg","updateKeywordSvg","updatefileSvg","updateLegends","aChecked","interChecked","bChecked","isLoc","xAxisScale","aAuthorSvgMolds","aAuthorRects","aAuthorTexts","bAuthorSvgMolds","bAuthorRects","bAuthorTexts","aCommitTypeSvgMolds","aCommitTypeRects","aCommitTypeTexts","bCommitTypeSvgMolds","bCommitTypeRects","bCommitTypeTexts","aFileSvg","bFileSvg","showFileFullPath","window","scrollTo","mainSvg","interPoints","r0","r1","dx","dy","h","rx","ry","calIntersection","vennSvg","updateVennText","xAxisLength","initBarGraphElement","svgMolds","arrayDataLoc","rects","texts","defualtColor","raise","lower","updateBarGraphElement","arrayData","defaultColor","authorX","authorSvg","authorY","authorAxis","aAuthorSvg","bAuthorSvg","aArrayData","bArrayData","commitTypeX","commitTypeSvg","commitTypeY","commitTypeAxis","aCommitTypeSvg","bCommitTypeSvg","keywordsX","keywordsWidth","keywordsY","keywordsAxisScale","generate","rectSingleHeight","keywordsHeight","rectSingleY","initSmallChart","graphX","yourKeywordsSvg","keywordsData","componentSvg","fileFullnameView","reduceLongName","updateSmallChart","fileX","fileWidth","fileSvg","fileY","fileAxisScale","fileAxis","aria-label","label","defaultChecked","CompareSummary","HighlightQuery","query","setQuery","qList","AttributeIconSpecs","AppV2","gitAnalyzerRef","repo","match","params","require","shallowEqual","prevUseHeuristicMergeRef","Icon","ScrollButton","Home","appChange","setState","appClick","open","location","href","Component","App","exact","v2","Boolean","hostname","store","createStore","reducers","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5ec65c09.chunk.js","sourcesContent":["var map = {\n\t\"./realm-java.commits.json\": 249,\n\t\"./vue.commits.json\": 250\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 248;","var map = {\n\t\"./realm-java.score.json\": 252,\n\t\"./vue.score.json\": 253\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 251;","var map = {\n\t\"./realm-java.corpus.json\": 255,\n\t\"./vue.corpus.json\": 256\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 254;","var map = {\n\t\"./realm-java.pulls.json\": 258,\n\t\"./vue.pulls.json\": 259\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 257;","import { cloneDeep } from 'lodash';\r\n\r\nexport class ViewNode {\r\n    constructor(node) {\r\n        this.node = node;\r\n        this.x = undefined;\r\n        this.y = undefined;\r\n    }\r\n}\r\n\r\nexport class ViewCluster {\r\n    constructor(cluster) {\r\n        this.cluster = cluster;\r\n    }\r\n}\r\n\r\nexport class CommitNode {\r\n    constructor(id, commit) {\r\n        // default\r\n        this.id = id;\r\n        this.commit = commit;\r\n        this.seq = 0;\r\n\r\n        // toplology\r\n        this.hasNoFirstParentChild = false;\r\n        this.isMainStem = false;\r\n        this.isRoot = false;\r\n        this.implicitBranchNo = -1;\r\n\r\n        // context\r\n        this.isMergeCommit = false;\r\n        this.isMergeTraversed = false;\r\n        this.mergedToNode = undefined;\r\n\r\n        this.isLeaf = false;\r\n        this.pullRequestHeads = [];\r\n        this.pullRequestMerges = [];\r\n\r\n        this.mergeNodes = [];\r\n        this.mergeSquashCommit = undefined;\r\n        this.mergeNodesContainRelease = false;\r\n        this.mergeNodesContainMajorRelease = false;\r\n        this.cloc = 0;\r\n\r\n        // Filtering\r\n        this.isFiltered = true;\r\n\r\n        // \r\n        this.tags = [];\r\n        this.branches = [];\r\n        // this.notFirstParentTreeBranchNames = [];\r\n        // this.notFirstParentTreeLeafNode = undefined;\r\n        this.firstParentTreeBranchNames = [];\r\n        this.firstParentTreeLeafNode = undefined;\r\n        this.branchNumbers = [];\r\n        this.traversed = false;\r\n        \r\n        this.isMajorRelease = false;\r\n        this.isRelease = false;\r\n        this.releaseTagString = undefined;\r\n\r\n        // this.cluster = undefined;\r\n        this.locStat = new LOCStat();\r\n        this.calCLOCStat();\r\n    }\r\n\r\n    calCLOCStat() {\r\n        if (this.commit === undefined) {\r\n            console.log(\"COMMIT UNDEFINED\");\r\n            return;\r\n        }\r\n        \r\n        Object.entries(this.commit.diffStat.files).forEach( entry => {\r\n            // files\r\n            let [fileName, value] = entry;\r\n            this.locStat.clocSum += value.insertions + value.deletions;\r\n            this.locStat.insertLocSum += value.insertions;\r\n            this.locStat.deleteLocSum += value.deletions;\r\n        });\r\n    }\r\n}\r\n\r\nexport class LOCStat {\r\n    constructor(locStat, ratio = 1) {\r\n        this.clocSum = 0;\r\n        this.insertLocSum = 0;\r\n        this.deleteLocSum = 0;\r\n        if (locStat !== undefined) this.addStat(locStat, ratio);\r\n    }\r\n    \r\n    addStat(targetStat, ratio = 1) {\r\n        this.clocSum += targetStat.clocSum * ratio;\r\n        this.insertLocSum += targetStat.insertLocSum * ratio;\r\n        this.deleteLocSum += targetStat.deleteLocSum * ratio;\r\n    }\r\n}\r\n\r\nexport class CommitEdge {\r\n    constructor(childId, parentId) {\r\n        this.fromNodeId = childId;\r\n        this.toNodeId = parentId;\r\n    }\r\n}\r\n\r\nexport class CommitCluster {\r\n    constructor(id, node, pref) {\r\n        this.nodeCount = 0;\r\n        this.mergedNodeCount = 0;\r\n        this.locStat = new LOCStat();\r\n        this.onPullRequestBranch = false;\r\n        \r\n        if (id === undefined) {\r\n            this.id = -1;\r\n            this.nodeList = [];\r\n            return;\r\n        } else {\r\n            this.id = id;\r\n            this.nodeList = [node];\r\n            node.cluster = this;\r\n            this.nodeCount++;\r\n            this.mergedNodeCount += node.mergeNodes.length;\r\n\r\n            this.locStat.addStat(node.locStat);\r\n        }\r\n\r\n        this.parent = undefined;\r\n        this.child = undefined;\r\n\r\n        this.pref = pref;\r\n        this.branches = [];\r\n\r\n        this.scoresList = [];\r\n    }\r\n\r\n    addNode(node, score = 0) {\r\n        node.cluster = this;\r\n        this.nodeList.push(node);\r\n        this.nodeCount++;\r\n        this.mergedNodeCount += node.mergeNodes.length;\r\n        this.locStat.addStat(node.locStat);\r\n\r\n        this.scoresList = [score];\r\n    }\r\n}\r\n\r\nexport class CommitAuthor {\r\n    constructor(name, email, githubId) {\r\n        this.name = name;\r\n        this.email = email;\r\n        this.githubId = githubId;\r\n    }\r\n}\r\n\r\nexport const DataTypeByNameMap = {\r\n    authors:\"author\",\r\n    authorsLOCStat:\"author\",\r\n    keywords:\"keyword\",\r\n    commitTypes:\"commitType\",\r\n    commitTypesLOCStat:\"commitType\",\r\n    clocByFiles:\"file\",\r\n    insertionByFiles:\"file\",\r\n    deletionByFiles:\"file\",\r\n    touchCountByFiles:\"file\",\r\n    clocByDirs:\"dir\",\r\n    insertionByDirs:\"dir\",\r\n    deletionByDirs:\"dir\",\r\n    touchCountByDirs:\"dir\",\r\n    fileToAuthor:\"file\",\r\n    commitCount:\"commit\",\r\n}\r\n\r\nexport class ClusterData {\r\n    constructor(cluster, corpusData, useHeuristicMerge) {\r\n        this.cluster = cluster;\r\n        this.corpusData = corpusData;\r\n        // this.fileToAuthor = {};\r\n        this.idxToTfidfSum = {};\r\n        this.keywordsByRank = [];\r\n        // this.idxToTfidfLOCStatSum = {};\r\n\r\n        // init\r\n        Object.keys(DataTypeByNameMap).forEach( (name) => this[name] = {});\r\n        // Object.keys(ClusterLOCDataNamesMap).forEach( (name) => this[name] = {});\r\n        this.analyze(cluster, useHeuristicMerge);\r\n    }\r\n\r\n    analyze(cluster, useHeuristicMerge) {\r\n        // additional infos \r\n        // this.wordTfIdfRank = [];\r\n\r\n        // by jeonhyun97\r\n        let mockKeywords = {};\r\n        // let mockKeywordsLOCStat = {};\r\n\r\n        cluster.nodeList.forEach( (node) => {\r\n            let isHM = useHeuristicMerge && node.mergeSquashCommit !== undefined ? true : false;\r\n            let commit = cloneDeep(useHeuristicMerge && node.mergeSquashCommit !== undefined ? node.mergeSquashCommit : node.commit);\r\n            // temporary\r\n            if (!(commit.author instanceof Array)) commit.author = [commit.author];\r\n            if (!(commit.commitType instanceof Array)) commit.commitType = [commit.commitType];\r\n\r\n            this.increaseMapValueByKeyArray(this.authors, commit.author);\r\n            this.increaseMapValueByKeyArray(this.authorsLOCStat, commit.author, node.locStat);\r\n            this.increaseMapValueByKeyArray(this.commitTypes, commit.commitType);\r\n            this.increaseMapValueByKeyArray(this.commitTypesLOCStat, commit.commitType, node.locStat);\r\n\r\n            let uniqCorpus = Object.keys(commit.corpus.reduce( (prev, cur) => {prev[cur] = true; return prev;}, {}));\r\n            uniqCorpus.forEach( (c) => this.increaseMapValueByKey(mockKeywords, c));\r\n\r\n            if(!isHM) {\r\n                let fileInfos = commit.diffStat.files;\r\n                console.log(\"INFO\", fileInfos);\r\n                for(let file in fileInfos) {\r\n\r\n                    if(this.fileToAuthor[file] == undefined) \r\n                        this.fileToAuthor[file] = {};\r\n                    if(this.fileToAuthor[file] != undefined) {\r\n                        let author = commit.author;\r\n                        if(this.fileToAuthor[file].hasOwnProperty(author)) { // if file already holding author\r\n                            this.fileToAuthor[file][author].insertions += fileInfos[file].insertions;\r\n                            this.fileToAuthor[file][author].deletions += fileInfos[file].deletions;\r\n                            this.fileToAuthor[file][author].count += 1;\r\n                        }\r\n                        else {\r\n                            let dict = {\r\n                                insertions : fileInfos[file].insertions,\r\n                                deletions : fileInfos[file].deletions,\r\n                                count : 1\r\n                            }\r\n                            this.fileToAuthor[file][author] = dict;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            else {\r\n                node.mergeNodes.forEach(commitNode => {\r\n                    let subCommit = commitNode.commit;\r\n                    let fileInfos = subCommit.diffStat.files;\r\n                    let author = subCommit.author;\r\n                    for(let file in fileInfos) {\r\n                        if(this.fileToAuthor[file] == undefined) \r\n                            this.fileToAuthor[file] = {};\r\n                        \r\n                        if(this.fileToAuthor[file].hasOwnProperty(author)) {\r\n                            this.fileToAuthor[file][author].insertions += fileInfos[file].insertions;\r\n                            this.fileToAuthor[file][author].deletions += fileInfos[file].deletions;\r\n                            this.fileToAuthor[file][author].count += 1;\r\n                        }\r\n                        else {\r\n                            let dict = {\r\n                                insertions : fileInfos[file].insertions,\r\n                                deletions : fileInfos[file].deletions,\r\n                                count : 1\r\n                            }\r\n                            this.fileToAuthor[file][author] = dict;;\r\n                        }\r\n                    }\r\n                })\r\n\r\n            }\r\n\r\n            for (let idx in commit.tfidf) {\r\n                if (this.idxToTfidfSum[idx] != undefined) {\r\n                    this.idxToTfidfSum[idx] += commit.tfidf[idx];\r\n                    // this.idxToTfidfLOCStatSum[idx].addStat(node.locStat);\r\n                }\r\n                else {\r\n                    this.idxToTfidfSum[idx] = commit.tfidf[idx];\r\n                    // this.idxToTfidfLOCStatSum[idx] = node.locStat;\r\n                }\r\n            }\r\n\r\n            let alreadyIncreased= {};\r\n            Object.keys(commit.diffStat.files).forEach( (fileName) => {\r\n                // files\r\n                let f = commit.diffStat.files;\r\n                let clocSum = f[fileName].insertions + f[fileName].deletions;\r\n                \r\n                if (!(fileName in alreadyIncreased)) {\r\n                    this.increaseMapValueByKey(this.touchCountByFiles, fileName);\r\n                    alreadyIncreased[fileName] = true;\r\n                }\r\n                this.addValueToMap(this.clocByFiles, fileName, clocSum);\r\n                this.addValueToMap(this.insertionByFiles, fileName, f[fileName].insertions);\r\n                this.addValueToMap(this.deletionByFiles, fileName, f[fileName].deletions);\r\n\r\n                // dirs\r\n                let fileNameSlice = fileName.split(\"/\");\r\n                if (fileNameSlice.length > 1) {\r\n                    let dirs = fileNameSlice.slice(0, fileNameSlice.length - 2).reduce( (prev, cur, i) => {\r\n                        let prevDir = (i > 0 ? prev[prev.length - 1] + \"/\" : \"\");\r\n                        prev.push(prevDir + cur);\r\n                        return prev;\r\n                    }, []);\r\n\r\n                    dirs.forEach( dir => {\r\n                        if (!(dir in alreadyIncreased)) {\r\n                            this.increaseMapValueByKey(this.touchCountByDirs, dir);\r\n                            alreadyIncreased[dir] = true;\r\n                        }\r\n                        this.addValueToMap(this.clocByDirs, dir, clocSum);\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        for (let idx in this.idxToTfidfSum) {\r\n            this.keywordsByRank.push([this.corpusData[idx], this.idxToTfidfSum[idx]])\r\n        }\r\n        this.keywordsByRank.sort(function (a,b) {\r\n            return b[1] - a[1];\r\n        });\r\n\r\n        \r\n        this.keywordsByRank.forEach(e => {\r\n            this.keywords[e[0]] = [mockKeywords[e[0]], e[1]];\r\n            // this.keywordsLOCStat[e[0]] = [mockKeywordsLOCStat[e[0]], e[1]];\r\n        });\r\n    }\r\n\r\n    increaseMapValueByKey(map, key) {\r\n        this.addValueToMap(map, key, 1);\r\n    }\r\n\r\n    increaseMapValueByKeyArray(map, keyArray, locStat) {\r\n        if (locStat === undefined) {\r\n            keyArray.forEach(key => this.addValueToMap(map, key, 1/keyArray.length));\r\n        } else {\r\n            keyArray.forEach(key => this.addLOCStatValueToMap(map, key, locStat, 1/keyArray.length));\r\n        }\r\n    }\r\n\r\n    addValueToMap(map, key, value) {\r\n        if (map[key] !== undefined) map[key] += value;\r\n        else map[key] = value;\r\n    }\r\n\r\n    addLOCStatValueToMap(map, key, locStat, ratio) {\r\n        if (map[key] !== undefined) map[key].addStat(locStat, ratio);\r\n        else map[key] = new LOCStat(locStat, ratio);\r\n    }\r\n}\r\n\r\nexport class ClusterNode {\r\n    constructor(cluster) {\r\n        this.cluster = cluster;\r\n\r\n        // this.startX = 0;\r\n        // this.endX = 0;\r\n\r\n        this.y = 0;\r\n        this.blockList = [];\r\n\r\n        // box layout\r\n        this.x = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.color = undefined;\r\n        this.branchType = undefined;\r\n        this.isNonConfilctMerge = false;\r\n\r\n        this.isIncludeFiltered = false;\r\n        this.isExcludeFiltered = false;\r\n    }\r\n}\r\n\r\nexport class ClusterBlock {\r\n    constructor(id, nodeList, startCommitSeq, endCommitSeq, x, \r\n            containsMergedNodes = false, containsMergeTraversedNodes = false, mergedToNodeList = [], clusterNode) {\r\n        this.id = id;\r\n        this.startCommitSeq = startCommitSeq;\r\n        this.endCommitSeq = endCommitSeq;\r\n        this.commitCount = nodeList.length;\r\n\r\n        this.x = x;\r\n\r\n        this.nodeList = nodeList;\r\n        this.isNonConflictMergedSource = false;\r\n        this.isNonConflictMergedTarget = false;\r\n        this.containsMergedNodes = containsMergedNodes;\r\n        this.containsMergeTraversedNodes = containsMergeTraversedNodes;\r\n        this.containsMajorRelease = false;\r\n        this.mergedToNodeList = mergedToNodeList;\r\n\r\n        this.releaseTagString = \"\";\r\n        this.releaseNodeList = [];\r\n\r\n        this.clusterNode = clusterNode;\r\n        \r\n        this.HALinkIds = [];\r\n    }\r\n}\r\n\r\nexport class KeywordFilter {\r\n    constructor (isIncludes, attrName, keyword) {\r\n        this.isIncludes = isIncludes;\r\n        this.attrName = attrName;\r\n        this.keyword = keyword;\r\n    }\r\n}\r\n\r\nexport class CapturedSummaryInfo {\r\n    constructor(id, clusterNodes, groupingParameters, interestedItemList = []) {\r\n        this.id = id;\r\n        this.clusterNodes = clusterNodes;\r\n        this.groupingParameters = groupingParameters;\r\n        this.interestedItemList = interestedItemList;        \r\n    }\r\n}\r\n\r\n\r\nexport var CommitAttributeNames = [\r\n    \"id\", \"parents\", \"files\", \"message\", \"author\", \"commitType\", \"corpus\", \"branches\", \"tags\",\r\n];\r\n\r\nexport var PreferenceList = [\r\n    \"author\", \r\n    \"message\",\r\n    \"file\", \r\n    \"commitType\",\r\n    \"commitDate\", \r\n];\r\n\r\nexport var PreferenceWeights = {\r\n    author: 1,\r\n    commitDate: 1,\r\n    file: 1,\r\n    message: 1,\r\n    commitType: 1,\r\n};\r\n\r\nexport var AttrsAbbreviationMap = {\r\n    \"authors\": \"Ⓐ\",\r\n    \"keywords\": \"Ⓜ\", \r\n    \"commitTypes\": \"Ⓣ\",\r\n    \"touchCountByFiles\": \"Ⓕ\", \r\n    \"touchCountByDirs\": \"Ⓓ\",\r\n}\r\n\r\nexport var BranchTypes = {\r\n    MAIN_STEM: \"MAIN_STEM\",\r\n    EXPLICIT: \"EXPLICIT\", \r\n    IMPLICIT: \"IMPLICIT\",\r\n    PR_MERGED: \"PR_MERGED\",\r\n    PR_CLOSED: \"PR_CLOSED\",\r\n    PR_OPEN: \"PR_OPEN\",\r\n}","import { createAction, handleActions } from 'redux-actions';\r\nimport { PreferenceWeights, CapturedSummaryInfo, BranchTypes } from \"../components/analyzer/GithruClasses\";\r\n\r\nconst UPDATE_CLUSTER_OVERVIEW_HEIGHT = \"./UPDATE_CLUSTER_OVERVIEW_HEIGHT\";\r\nconst UPDATE_GLOBAL_COMMITS_BY_TEMPORAL_FILTER = './UPDATE_GLOBAL_COMMITS_BY_TEMPORAL_FILTER';\r\nconst UPDATE_COMMITS_BY_TEMPORAL_FILTER = './UPDATE_COMMITS_BY_TEMPORAL_FILTER';\r\nconst UPDATE_COMMITS_BY_TEMPORAL_BRUSH = \"./UPDATE_COMMITS_BY_TEMPORAL_BRUSH\";\r\nconst UPDATE_CLUSTER_THRESHOLD = \"./UPDATE_CLUSTER_THRESHOLD\";\r\n// const UPDATE_SELECTED_CLUSTER_DATA_FOR_SUMMARY = \"./UPDATE_SELECTED_CLUSTER_DATA_FOR_SUMMARY\";\r\nconst UPDATE_NONCONFLICT_GROUPING_LEVEL = \"./UPDATE_NONCONFLICT_GROUPING_LEVEL\";\r\nconst UPDATE_RELEASE_BINNING_LEVEL = \"./UPDATE_RELEASE_BINNING_LEVEL\";\r\nconst UPDATE_SUMMARY_BY_LOC = \"./UPDATE_SUMMARY_BY_LOC\";\r\nconst UPDATE_KEYWORD_FILTER_LIST = \"./UPDATE_KEYWORD_FILTER_LIST\";\r\nconst UPDATE_PREFERENCE_WEIGHTS = \"./UPDATE_PREFERENCE_WEIGHTS\";\r\nconst UPDATE_HIDE_FILES = \"./UPDATE_HIDE_FILES\";\r\nconst UPDATE_HEURISTIC_MERGE = \"./UPDATE_HEURISTIC_MERGE\";\r\n\r\nconst ADD_CAPTURED_SUMMARY_INFO_LIST = \"./ADD_CAPTURED_SUMMARY_INFO_LIST\";\r\nconst REMOVE_CAPTURED_SUMMARY_INFO_LIST = \"./REMOVE_CAPTURED_SUMMARY_INFO_LIST\";\r\nconst UPDATE_CURRENT_CAPTURED_SUMMARY_INFO_ID = \"./UPDATE_CURRENT_CAPTURED_SUMMARY_INFO_ID\";\r\nconst ADD_ITEMS_TO_CAPTURED_SUMMARY_INFO = \"./ADD_ITEMS_TO_CAPTURED_SUMMARY_INFO\";\r\nconst REMOVE_ITEM_FROM_CAPTURED_SUMMARY_INFO = \"./REMOVE_ITEM_FROM_CAPTURED_SUMMARY_INFO\";\r\n\r\nconst ADD_FRAGMENT_HISTORY = \"./ADD_FRAGMENT_HISTORY\";\r\nconst CLEAR_FRAGMENTS = \"./CLEAR_FRAGMENTS;\"\r\nconst REGISTER_FAVORITE_FRAGMENT = \"./REGISTER_FAVORITE_FRAGMENT\";\r\nconst UNREGISTER_FAVORITE_FRAGMENT = \"./UNREGISTER_FAVORITE_FRAGMENT\";\r\nconst UPDATE_CAPTURED_SUMMARY_INFO_LIST_FOR_COMPARE = \"./UPDATE_CAPTURED_SUMMARY_INFO_LIST_FOR_COMPARE\";\r\n// const UPDATE_SHOW_PULL_REQUEST_BRANCH = \"./UPDATE_SHOW_PULL_REQUEST_BRANCH\";\r\nconst UPDATE_HIGHLIGHT_QUERY = \"./UPDATE_HIGHLIGHT_QUERY\";\r\nconst UPDATE_SHOW_MERGE_LINK = \"./UPDATE_SHOW_MERGE_LINK\";\r\nconst UPDATE_BRANCH_SHOW_BY_TYPE = \"./UPDATE_BRANCH_SHOW_BY_TYPE\";\r\nconst UPDATE_SCROLL_TO_RIGHT = \"./UPDATE_SCROLL_TO_RIGHT\";\r\n\r\nexport const updateClusterOverviewHeight = createAction(UPDATE_CLUSTER_OVERVIEW_HEIGHT);\r\nexport const updateGlobalCommitsByTemporalFilter = createAction(UPDATE_GLOBAL_COMMITS_BY_TEMPORAL_FILTER);\r\nexport const updateCommitsByTemporalFilter = createAction(UPDATE_COMMITS_BY_TEMPORAL_FILTER);\r\nexport const udpateCommitsByTemporalBrush = createAction(UPDATE_COMMITS_BY_TEMPORAL_BRUSH);\r\nexport const updateClusterThreshold = createAction(UPDATE_CLUSTER_THRESHOLD);\r\n// export const updateSelectedClusterDataForSummary = createAction(UPDATE_SELECTED_CLUSTER_DATA_FOR_SUMMARY);\r\nexport const updateNonConflictGroupingLevel = createAction(UPDATE_NONCONFLICT_GROUPING_LEVEL);\r\nexport const updateReleaseBinningLevel = createAction(UPDATE_RELEASE_BINNING_LEVEL);\r\nexport const updateSummaryByLOC = createAction(UPDATE_SUMMARY_BY_LOC);\r\nexport const updateKeywordFilterList = createAction(UPDATE_KEYWORD_FILTER_LIST);\r\nexport const updatePreferenceWeights = createAction(UPDATE_PREFERENCE_WEIGHTS);\r\nexport const updateHideFiles = createAction(UPDATE_HIDE_FILES);\r\nexport const updateUseHeuristicMerge = createAction(UPDATE_HEURISTIC_MERGE);\r\n// export const updateShowPullRequestBranch = createAction(UPDATE_SHOW_PULL_REQUEST_BRANCH);\r\n\r\nexport const addCapturedSummaryInfoList = createAction(ADD_CAPTURED_SUMMARY_INFO_LIST);\r\nexport const removeCapturedSummaryInfoList = createAction(REMOVE_CAPTURED_SUMMARY_INFO_LIST);\r\nexport const updateCurrentCapturedSummaryInfoId = createAction(UPDATE_CURRENT_CAPTURED_SUMMARY_INFO_ID);\r\nexport const addItemsToCapturedSummaryInfo = createAction(ADD_ITEMS_TO_CAPTURED_SUMMARY_INFO);\r\nexport const removeItemFromCaptureSummaryInfo = createAction(REMOVE_ITEM_FROM_CAPTURED_SUMMARY_INFO);\r\n\r\nexport const addFragmentHistory = createAction(ADD_FRAGMENT_HISTORY);\r\nexport const clearFragments = createAction(CLEAR_FRAGMENTS);\r\nexport const registerFavoriteFragment = createAction(REGISTER_FAVORITE_FRAGMENT);\r\nexport const unregisterFavoriteFragment = createAction(UNREGISTER_FAVORITE_FRAGMENT);\r\n\r\nexport const updateCapturedSummaryInfoListForCompare = createAction(UPDATE_CAPTURED_SUMMARY_INFO_LIST_FOR_COMPARE);\r\nexport const updateHighlightQuery = createAction(UPDATE_HIGHLIGHT_QUERY);\r\nexport const updateShowMergeLink = createAction(UPDATE_SHOW_MERGE_LINK);\r\nexport const updateBranchShowMapByType = createAction(UPDATE_BRANCH_SHOW_BY_TYPE);\r\n\r\nexport const updateScrollToRight = createAction(UPDATE_SCROLL_TO_RIGHT);\r\n\r\nconst summaryPane = { \r\n    width: 1850,\r\n    left: 250,\r\n    right: 200,\r\n    rightPaneMargin: 10,\r\n};\r\nconst inspectionPane = {\r\n    width: 1600,\r\n};\r\nconst initBranchShowMapByType = {\r\n    // MASTER: true,\r\n    EXPLICIT: true,\r\n    IMPLICIT: true,\r\n    PR_MERGED: false,\r\n    PR_CLOSED: false,\r\n    PR_OPEN: true,\r\n}\r\n\r\nconst initialState = {\r\n    gitAnalyzer: undefined,\r\n    globalCommitSeqSelectionByTemporalFilter: undefined,\r\n    commitSeqSelectionByTemporalFilter: undefined,\r\n    commitSeqSelection: undefined,\r\n\r\n    layout: {\r\n        overviewWidth: summaryPane.width - summaryPane.left - summaryPane.right,\r\n        leftPaneWidth: summaryPane.left,\r\n        rightPaneWidth: summaryPane.right - summaryPane.rightPaneMargin * 2,\r\n        rightPaneMargin: summaryPane.rightPaneMargin,\r\n\r\n        width: summaryPane.width - summaryPane.left - summaryPane.right,\r\n\r\n        clusterOverviewSliderWidth: 34,\r\n        clusterOverviewWidth: summaryPane.width - summaryPane.left - summaryPane.right,\r\n        \r\n        temporalAreaHeight: 80,\r\n        temporalSelectorHeight: 150,\r\n        \r\n        orgClusterOverviewHeight: 400,\r\n        clusterOverviewHeight: 400,\r\n        inspectionPaneWidth: inspectionPane.width,\r\n\r\n        titlePanelHeight: 43,\r\n    },\r\n    \r\n    groupingParameters: {\r\n        preferenceWeights: PreferenceWeights,\r\n        threshold: 0,\r\n        nonConflictGroupingLevel: 0,\r\n        releaseBinningLevel: 1,\r\n        keywordFilterList: [],\r\n        useHeuristicMerge: true,\r\n        // showPullRequestBranch: false,\r\n        branchShowMapByType: initBranchShowMapByType,\r\n    },\r\n\r\n    highlightQuery: [],\r\n\r\n    showMergeLink: false,\r\n\r\n    summaryParameters: {\r\n        summaryByLOC: false,\r\n        hideFiles: [\"CHANGELOG.md\", \"version.txt\"],  \r\n    },\r\n    searchResultList: [],\r\n    // selectedClusters: new Set(),\r\n    // selectedClusterDataForSummary: undefined,\r\n\r\n    capturedSummaryInfoSeq: 0,\r\n    capturedSummaryInfoList: [],\r\n    currentCapturedSummaryInfoId: undefined,\r\n\r\n    favoriteFragments: [],\r\n    fragmentHistory: [],\r\n\r\n    capturedSummaryInfoListForCompare: undefined,\r\n\r\n    scrollToRight: false,\r\n};\r\n\r\nexport default handleActions({\r\n    [updateClusterOverviewHeight]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            layout: {\r\n                ...state.layout,\r\n                clusterOverviewHeight: action.payload,\r\n            },\r\n        }\r\n    },\r\n    [updateGlobalCommitsByTemporalFilter]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            globalCommitSeqSelectionByTemporalFilter: action.payload,\r\n        }\r\n    },\r\n    [updateCommitsByTemporalFilter]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            commitSeqSelectionByTemporalFilter: action.payload\r\n        };\r\n    },\r\n    [udpateCommitsByTemporalBrush]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            commitSeqSelection: action.payload,\r\n        }\r\n    },\r\n    \r\n    // GROUP PARAMETERS\r\n    [updateClusterThreshold]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            groupingParameters: {\r\n                ...state.groupingParameters,\r\n                threshold: action.payload,\r\n            }\r\n        }\r\n    },\r\n    // [updateSelectedClusterDataForSummary]: (state, action) => {\r\n    //     return {\r\n    //         ...state,\r\n    //         selectedClusterDataForSummary: action.payload,\r\n    //     }\r\n    // },\r\n    [UPDATE_NONCONFLICT_GROUPING_LEVEL]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            groupingParameters: {\r\n                ...state.groupingParameters,\r\n                nonConflictGroupingLevel: action.payload,\r\n            }\r\n        }\r\n    },\r\n    [UPDATE_RELEASE_BINNING_LEVEL]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            groupingParameters: {\r\n                ...state.groupingParameters,\r\n                releaseBinningLevel: action.payload,\r\n            }\r\n        }\r\n    },\r\n    [UPDATE_KEYWORD_FILTER_LIST]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            groupingParameters: {\r\n                ...state.groupingParameters,\r\n                keywordFilterList: action.payload,\r\n            }\r\n        }\r\n    },\r\n    [updateUseHeuristicMerge]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            groupingParameters: {\r\n                ...state.groupingParameters,\r\n                useHeuristicMerge: action.payload,\r\n            }\r\n        }\r\n    },\r\n    [UPDATE_PREFERENCE_WEIGHTS]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            groupingParameters: {\r\n                ...state.groupingParameters,\r\n                preferenceWeights: action.payload,\r\n            }\r\n        }\r\n    },\r\n    // [UPDATE_SHOW_PULL_REQUEST_BRANCH]: (state, action) => {\r\n    //     return {\r\n    //         ...state,\r\n    //         groupingParameters: {\r\n    //             ...state.groupingParameters,\r\n    //             showPullRequestBranch: action.payload,\r\n    //         }\r\n    //     }\r\n    // },\r\n    [updateBranchShowMapByType]: (state, action) => {\r\n        let [type, bool] = action.payload;\r\n        \r\n        let map = {...state.groupingParameters.branchShowMapByType};\r\n        map[type] = bool;\r\n\r\n        return {\r\n            ...state,\r\n            groupingParameters: {\r\n                ...state.groupingParameters,\r\n                branchShowMapByType: map,\r\n            }\r\n        }\r\n    },\r\n\r\n    // SUMMARY PARAMS\r\n    [UPDATE_SUMMARY_BY_LOC]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            summaryParameters: {\r\n                ...state.summaryParameters,\r\n                summaryByLOC: action.payload,\r\n            }\r\n        }\r\n    },\r\n    [updateHideFiles]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            summaryParameters: {\r\n                ...state.summaryParameters,\r\n                hideFiles: action.payload,\r\n            }\r\n        }\r\n    },\r\n    \r\n\r\n    // CAPTURED SUMMARY INFO\r\n    [addCapturedSummaryInfoList]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            capturedSummaryInfoSeq: state.capturedSummaryInfoSeq+1,\r\n            capturedSummaryInfoList: \r\n                state.capturedSummaryInfoList.concat(\r\n                    new CapturedSummaryInfo(state.capturedSummaryInfoSeq, action.payload[0], {...action.payload[1]}))\r\n        }\r\n    },\r\n    [removeCapturedSummaryInfoList]: (state, action) => {\r\n        state.capturedSummaryInfoList.splice(+action.payload, 1);\r\n\r\n        return {\r\n            ...state,\r\n            capturedSummaryInfoList: state.capturedSummaryInfoList,\r\n        }\r\n    },\r\n    [updateCurrentCapturedSummaryInfoId]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            currentCapturedSummaryInfoId: action.payload,\r\n        }\r\n    },\r\n    [addItemsToCapturedSummaryInfo]: (state, action) => {\r\n        if (state.currentCapturedSummaryInfoId === undefined) return state;\r\n\r\n        const itemList = action.payload;\r\n        let info = state.capturedSummaryInfoList[state.capturedSummaryInfoList.findIndex(d => d.id===state.currentCapturedSummaryInfoId)];\r\n// console.log(\"NONONO\", itemList, info );\r\n        let newItems = itemList.filter( item => info.interestedItemList.findIndex(d => d[0] === item[0] && d[1] === item[1]) < 0);\r\n        info.interestedItemList = info.interestedItemList.concat(newItems);\r\n\r\n// console.log(\"addItemsToCapturedSummaryInfo\", newItems, state.capturedSummaryInfoList, info.interestedItemList);\r\n        return {\r\n            ...state,\r\n            capturedSummaryInfoList: [].concat(state.capturedSummaryInfoList)\r\n        }\r\n    },\r\n    [removeItemFromCaptureSummaryInfo]: (state, action) => {\r\n        let info = state.capturedSummaryInfoList[state.capturedSummaryInfoList.findIndex(d => d.id===state.currentCapturedSummaryInfoId)];\r\n        // let info = state.capturedSummaryInfoList[state.currentCapturedSummaryInfoId];\r\n        info.interestedItemList.splice(+action.payload, 1);\r\n        info.interestedItemList = [].concat(info.interestedItemList);\r\n\r\n// console.log(\"addItemsToCapturedSummaryInfo\", newItems, state.capturedSummaryInfoList, info.interestedItemList);\r\n        return {\r\n            ...state,\r\n            capturedSummaryInfoList: [].concat(state.capturedSummaryInfoList)\r\n        }\r\n    },\r\n    \r\n    \r\n    // FRAGMENTS\r\n    [addFragmentHistory]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            fragmentHistory: state.fragmentHistory.concat([action.payload]),\r\n        }\r\n    },\r\n    [clearFragments]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            fragmentHistory: [],\r\n            favoriteFragments: [],\r\n        }\r\n    },\r\n    [registerFavoriteFragment]: (state, action) => {\r\n// console.log(\"registerFavoriteFragment\", state.favoriteFragments, action.payload)\r\n        let fragment = action.payload;\r\n        let exists = false;\r\n        for (let fi = 0; fi < state.favoriteFragments.length; fi++) {\r\n            let d = state.favoriteFragments[fi];\r\n            if (d[0] === fragment[0] && d[1] === fragment[1]) {\r\n                exists = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!exists) {\r\n            return {\r\n                ...state,\r\n                favoriteFragments: state.favoriteFragments.concat([fragment]),\r\n            }\r\n        } else return state;\r\n    },\r\n    [unregisterFavoriteFragment]: (state, action) => {\r\n        let fragment = action.payload;\r\n        let index = state.favoriteFragments.findIndex(d => d[0] === fragment[0] && d[1] === fragment[1]);\r\n        state.favoriteFragments.splice(index, 1);\r\n// console.log(\"unregisterFavoriteFragment\", fragment, index)\r\n        if (index >= 0) {\r\n            return {\r\n                ...state,\r\n                favoriteFragments: [].concat(state.favoriteFragments),\r\n            }\r\n        } else return state;\r\n    },\r\n    [updateCapturedSummaryInfoListForCompare]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            capturedSummaryInfoListForCompare: action.payload,\r\n        }\r\n    },\r\n    [UPDATE_HIGHLIGHT_QUERY]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            highlightQuery: action.payload,\r\n        }\r\n    },\r\n    [UPDATE_SHOW_MERGE_LINK]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            showMergeLink: action.payload,\r\n        }\r\n    },\r\n    [UPDATE_SCROLL_TO_RIGHT]: (state, action) => {\r\n        return {\r\n            ...state,\r\n            scrollToRight: action.payload,\r\n        }\r\n    },\r\n}, initialState);","import * as colors from \"@material-ui/core/colors\";\r\nimport * as d3 from \"d3\";\r\n\r\nexport const BranchColors = {\r\n    MAIN_STEM: colors.blue[900],\r\n    EXPLICIT: colors.cyan[700],\r\n    IMPLICIT: colors.grey[400],\r\n    PR_MERGED: colors.purple[600],\r\n    PR_CLOSED: colors.pink[600],\r\n    PR_OPEN: colors.green[300],\r\n};\r\n\r\n// const colorRange = d3.range(5, 0, -1);\r\n\r\nconst getListOfColors = (color) => {\r\n    // let colorRange = [7, 4, 2, 1].map(d => d * 100);\r\n    let colorRange = [\"A700\", 600, 400, 200, 100];\r\n    return colorRange.map(d => color[d]);\r\n}\r\n\r\nexport const AttributeColors = {\r\n    author: getListOfColors(colors.brown),\r\n    keyword: getListOfColors(colors.teal),\r\n    commitType: getListOfColors(colors.lightGreen),\r\n    file: getListOfColors(colors.amber),\r\n    dir: getListOfColors(colors.orange),\r\n    // commit: [\r\n    //     \"#90a4ae\",\r\n    //     \"#b0bec5\",\r\n    //     \"#cfd8dc\",\r\n    //     \"#eceff1\",\r\n    //     \"#78909c\",\r\n    // ],\r\n    commit: [600, 400, 300, 200, 100].map(d => colors.blueGrey[d]),\r\n    date: [\r\n        \"#90a4ae\",\r\n        \"#b0bec5\",\r\n        \"#cfd8dc\",\r\n        \"#eceff1\",\r\n        \"#78909c\",\r\n    ],\r\n    highlight: getListOfColors(colors.red),\r\n}\r\n\r\nconst ScoreColorMap = {\r\n    author: AttributeColors.author,\r\n    commitDate: AttributeColors.date,\r\n    file: AttributeColors.file,\r\n    message: AttributeColors.keyword,\r\n    commitType: AttributeColors.commitType,\r\n}\r\n\r\nexport function getScoreColor(name, colorIndex) {\r\n    return ScoreColorMap[name][colorIndex];\r\n}\r\n\r\nexport function changeRGBColorByOpacity(color, opacity) {\r\n    let c = d3.rgb(color);\r\n    return \"rgb(\" + c.r + \",\" + c.g + \",\" + c.b + \", \" + opacity + \")\";\r\n}\r\n\r\n// export const ClusterColorMap = {\r\n//     master: colors.blue[900],\r\n//     // stale: blueGrey[400],\r\n//     implicit: colors.grey[400],\r\n//     staleAndImplicit: colors.blueGrey[600],\r\n// }\r\n\r\nexport const Tableau10 = [\"#4e79a7\",\"#f28e2c\",\"#e15759\",\"#76b7b2\",\"#59a14f\",\"#edc949\",\"#af7aa1\",\"#ff9da7\",\"#9c755f\",\"#bab0ab\"];\r\n","import { intersection, union } from \"lodash\";\r\n\r\nexport function getScoreTemp(a, b, verbose = false) {\r\n    function getFileList(commit) {\r\n        if (\"diffStat\" in commit && \"files\" in commit.diffStat) {\r\n            return Object.keys(commit[\"diffStat\"][\"files\"]);\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    function getJaccardSimilarity(a, b, test) {\r\n        a = (!(a instanceof Array) ? [a] : a);\r\n        b = (!(b instanceof Array) ? [b] : b);\r\n\r\n        let intersectionLen = intersection(a, b).length;\r\n        let unionLen = union(a, b).length;\r\n\r\n        return (unionLen !== 0 ? (intersectionLen / unionLen) : 1);\r\n    }\r\n\r\n    function getTfidfCosineSimilarity(a,b) {\r\n        let aVector = a;\r\n        let bVector = b;\r\n\r\n        if (\"-1\" in aVector || \"-1\" in bVector) return 0;\r\n        \r\n        let aKeys = Object.keys(aVector);\r\n        let bKeys = Object.keys(bVector);\r\n\r\n        let innerProduct = 0;\r\n        while (aKeys.length > 0 && bKeys.length > 0) {\r\n            if      (aKeys[0] < bKeys[0]) { aKeys.shift(); }\r\n            else if (aKeys[0] > bKeys[0]) { bKeys.shift(); }\r\n            else {\r\n                innerProduct = innerProduct + aVector[aKeys[0]] * bVector[bKeys[0]];\r\n                aKeys.shift();\r\n                bKeys.shift();\r\n            }\r\n        }\r\n\r\n        let aLengthSqr = 0, bLengthSqr = 0;\r\n\r\n        Object.keys(aVector).forEach(k => {\r\n            aLengthSqr += aVector[k] * aVector[k];\r\n        })\r\n\r\n        Object.keys(bVector).forEach(k => {\r\n            bLengthSqr += bVector[k] * bVector[k];\r\n        })\r\n\r\n        let cosine_sim = innerProduct / Math.sqrt(aLengthSqr * bLengthSqr);\r\n        return cosine_sim;\r\n    }\r\n\r\n    let score = {}\r\n\r\n    // committer\r\n    // score[\"committer\"] = (a.author === b.author ? 1 : 0);\r\n    score[\"author\"] = getJaccardSimilarity(a.author, b.author, \"author\");\r\n    // commit type\r\n    score[\"commitType\"] = getJaccardSimilarity(a.commitType, b.commitType, \"type\");\r\n    // file\r\n    score[\"file\"] = getJaccardSimilarity(getFileList(a), getFileList(b), \"file\");\r\n    // message\r\n    score[\"message\"] = getTfidfCosineSimilarity(a[\"tfidf\"], b[\"tfidf\"]);\r\n\r\n    return score;\r\n}","import { CommitCluster, CommitNode, CommitEdge, CommitAttributeNames, PreferenceWeights, BranchTypes } from \"./GithruClasses\";\r\nimport * as d3 from 'd3';\r\nimport { BranchColors, Tableau10, AttributeColors } from \"../ColorClasses\";\r\nimport { getScoreTemp } from \"../CalSimilarity\";\r\n\r\nexport class GitAnalyzer {\r\n    \"use strict\";\r\n\r\n    constructor(json, scoreJson, corpusJson, pullJson, defaultThresholdStep, repoName, releasePrefix = \"\", mainStemBranchName) {\r\n        this.lowLevel = 2;\r\n\r\n        this.roots = [];\r\n        this.allNodeList = [];\r\n        this.nodesMap = {};\r\n        this.edges = [];\r\n\r\n        this.firstParentIdMap = {};\r\n        this.childIdMap = {};\r\n        this.parentIdMap = {};\r\n\r\n        this.maxY = 0;\r\n        this.headId = \"\";\r\n\r\n        this.branchesMap = {};\r\n\r\n        this.gitData = json;\r\n        this.scoreData = scoreJson;\r\n        this.corpusData = corpusJson;\r\n        this.pullData = (pullJson === undefined ? [] : pullJson);\r\n        this.pullMapByNumber = {};\r\n        this.defaultThresholdStep = defaultThresholdStep;\r\n        this.pref = PreferenceWeights;\r\n\r\n        this.repoName = repoName;\r\n        this.mainStemBranchName = mainStemBranchName;\r\n        // this.pullMap = {};\r\n        this.releasePrefix = (releasePrefix === undefined ? \"\" : releasePrefix);\r\nconsole.log(\"URL Params:\", this.repoName, this.mainStemBranchName);\r\n        this.mergeSquashCommitNumber = -1;\r\n\r\n        this.buildContextAbstractionGraph();\r\n    }\r\n\r\n    getNodeById(id) {\r\n        return this.nodesMap[id];\r\n    }\r\n\r\n    addRoot(node) {\r\n        node.isRoot = true;\r\n        this.roots.push(node);\r\n    }\r\n\r\n    addNode(node) {\r\n        // if (node.commit.isHead === true) {\r\n        if ( (this.mainStemBranchName === undefined && node.commit.isHead === true)\r\n                || (this.mainStemBranchName !== undefined \r\n                    && node.commit.branches !== undefined\r\n                    && node.commit.branches.filter( b => b === \"origin/\" + this.mainStemBranchName).length > 0)) {\r\n            this.headId = node.id;\r\n            node.isMainStem = true;\r\n            node.implicitBranchNo = 0;\r\n            // node.y = 1;\r\nconsole.log(\"meet head\", node);\r\n        }\r\n        this.nodesMap[node.id] = node;\r\n    }\r\n\r\n    // 중복처리 해야함.\r\n    addEdge(edge) {\r\n        if (edge.fromNodeId in this.parentIdMap) this.parentIdMap[edge.fromNodeId].push(edge.toNodeId);\r\n        else this.parentIdMap[edge.fromNodeId] = [edge.toNodeId];\r\n\r\n        if (edge.toNodeId in this.childIdMap) this.childIdMap[edge.toNodeId].push(edge.fromNodeId);\r\n        else this.childIdMap[edge.toNodeId] = [edge.fromNodeId];\r\n\r\n        this.edges.push(edge);\r\n    }\r\n\r\n    getChildNodes(node) {\r\n        if (this.childIdMap[node.id] === undefined) return [];\r\n        return this.childIdMap[node.id].map( (id) => this.getNodeById(id));\r\n    }\r\n\r\n    getParentNodes(node) {\r\n        if (this.parentIdMap[node.id] === undefined) return [];\r\n        return this.parentIdMap[node.id].map( (id) => this.getNodeById(id));\r\n    }\r\n    \r\n    ////////////////////////////////////////////////\r\n    // RECURSIVELY FIND MERGE NODES\r\n    findMerges(rootNode) {\r\nif (rootNode.id.startsWith(\"461cc1\")) console.log(\"rootNode\", rootNode)\r\n        let initStack = rootNode.commit[\"parents\"]\r\n            .filter( (d, i) => i !== 0 ) // not first Parent\r\n            .map( id => this.getNodeById(id))\r\n            .filter( node => (!node.isMainStem && !node.isMergeTraversed && (node.implicitBranchNo !== rootNode.implicitBranchNo) ));\r\n        \r\n        while (initStack.length > 0) {\r\n            let n = initStack.pop();\r\n            n.isMergeTraversed = true;\r\n            n.mergedToNode = rootNode;\r\n            rootNode.mergeNodes.push(n);\r\n            if (n.isRelease) rootNode.mergeNodesContainRelease = true;\r\n            if (n.isMajorRelease) rootNode.mergeNodesContainMajorRelease = true;\r\n\r\n            let more = n.commit[\"parents\"]\r\n                .map( id => this.getNodeById(id) )\r\n                .filter( node => (!node.isMainStem && !node.isMergeTraversed && node.implicitBranchNo !== rootNode.implicitBranchNo) );\r\n                // .filter( node => (!node.isMainStem && !node.isMergeTraversed) );// &&node.implicitBranchNo !== rootNode.implicitBranchNo) );\r\n            if (more.length > 0) initStack = initStack.concat(more);\r\n// if (n.id.startsWith(\"1848f7d\")) console.log(\"root \", rootNode, initStack.map(d=>d))\r\n// if (n.id.startsWith(\"461cc1\")) console.log(\"got it\", n, n.commit[\"parents\"].map( id => this.getNodeById(id) )[0].isMergeTraversed, initStack.map(d=>d));\r\n        }\r\n\r\n        // MAKE SQUASH COMMIT FOR HEURISTIC MERGE\r\n        if (rootNode.mergeNodes.length === 0) return;\r\n\r\n        rootNode.mergeSquashCommit = {\r\n            no: this.mergeSquashCommitNumber--,\r\n            author: Array.from([rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => prev.add(n.commit.author), new Set())),\r\n            commitType: Array.from([rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => prev.add(n.commit.commitType), new Set())),\r\n            diffStat: rootNode.commit.diffStat,\r\n            corpus: Array.from(\r\n                [rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => {\r\n                    [\r\n                        ...n.commit.corpus, \r\n                        ...n.pullRequestHeads.reduce( (p, number) => p.concat(this.pullMapByNumber[number].corpus), [])\r\n                    ].forEach(corpus => prev.add(corpus));\r\n                    \r\n                    return prev;\r\n                }, new Set())),\r\n            tfidf: [rootNode, ...rootNode.mergeNodes].reduce( (prev, n) => {\r\n                    let tfidfList = Object.entries(n.commit.tfidf);\r\n                    n.pullRequestHeads.map(number => this.pullMapByNumber[number]).forEach(pull => {\r\n                        tfidfList = tfidfList.concat(Object.entries(pull.tfidf));\r\n                    });\r\n                    tfidfList.forEach( entry => {\r\n                        let [key, value] = entry;\r\n                        if (key in prev) prev[key] += value;\r\n                        else prev[key] = value;\r\n                    });\r\n                    return prev;\r\n                }, {}),\r\n            date:rootNode.commit.date,\r\n        }\r\n    }\r\n\r\n    buildContextAbstractionGraph() {\r\n        let commits = this.gitData.reverse();\r\n        \r\n        // nodes\r\n        commits.forEach( (commit, index) => {\r\n            let node = new CommitNode(commit.id, commit);\r\n            this.addNode(node);\r\n            this.allNodeList.push(node);\r\n\r\n            node.seq = index;\r\n\r\n            // root check.\r\n            if (commit.parents.length === 0) {\r\n                this.addRoot(node);\r\n            } else {\r\n                this.firstParentIdMap[node.id] = commit.parents[0];\r\n            }\r\n\r\n            // merge commit check\r\n            if (\"merge\" in commit && commit[\"merge\"].length > 0) {\r\n                node.isMergeCommit = true;\r\n            }\r\n\r\n            node.cloc = node.commit[\"diffStat\"][\"insertions\"] + node.commit[\"diffStat\"][\"deletions\"];\r\n        });\r\n\r\n        ///////////////////////////////////////////\r\n        // connect pulls to merged commits\r\n        if (this.pullData !== undefined) {\r\n            // SET pull map\r\n            this.pullData.forEach(p => this.pullMapByNumber[p.number] = p);\r\n\r\n            this.pullData.forEach( (pull) => {\r\n                let number = pull.number;\r\n                let parent = pull.head.sha;\r\n                let child = pull.merge_commit_sha;\r\n    if (this.getNodeById(parent) === undefined || (child !== undefined && this.getNodeById(child) === undefined)) return;\r\n    // console.log(\"this.getNodeById[parent]\", this.getNodeById(parent), parent)\r\n                this.getNodeById(parent).pullRequestHeads.push(number);\r\n\r\n                if (d => d.merge_commit_sha !== null) {\r\n                    if ( !(child in this.nodesMap) ||  !(parent in this.nodesMap)) return;\r\n\r\n                    let childCommit = this.nodesMap[child].commit;\r\n\r\n                    if (childCommit.parents.findIndex(d => d === parent) >= 0) {\r\n                        // console.log(\"already pull linked\")\r\n                        return;\r\n                    }\r\n\r\n                    childCommit.parents.push(parent);\r\n                    if (childCommit.merge === undefined) {\r\n                        childCommit.merge = [].concat([childCommit.parents.map(d => d.substring(0, 9) + \"_p\")]);\r\n                    } else {\r\n                        childCommit.merge.push(parent.substring(0, 9) + \"_p\");\r\n                    }\r\n\r\n                    this.getNodeById(childCommit.id).isMergeCommit = true;\r\n                    this.nodesMap[child].pullRequestMerges.push(number);\r\n                }\r\n            });\r\n        }\r\n\r\n        // edge(network)\r\n        commits.forEach(commit => {\r\n            commit.parents.forEach(parentId => {\r\n                let edge = new CommitEdge(commit.id, parentId);\r\n                this.addEdge(edge);\r\n            });\r\n        });\r\n\r\n        // set tagging information\r\n        this.allNodeList.forEach(d => {\r\n            if (d.commit.tags !== undefined && d.commit.tags.length > 0) {\r\n                let tags = d.commit.tags.filter(tag => tag.startsWith(this.releasePrefix) === true).map(tag => tag.substring(this.releasePrefix.length, tag.length));\r\n                if (tags.length <= 0) return;\r\n\r\n                d.isRelease = true;\r\n                d.releaseTagString = tags.join(\",\");\r\n                tags = tags.filter(tag => {\r\n                    let items = tag.split(\".\");\r\n                    if (items.length === 2 && items[1] === \"0\") return true;\r\n                    if (items.length === 3 && items[1] === \"0\" && items[2] === \"0\") return true;\r\n                    else return false;\r\n                });\r\n                if (tags.length > 0) d.isMajorRelease = true;\r\n            }\r\n        });\r\n\r\n        let branchedNodesNotHead = this.allNodeList.filter( node => \r\n            node.id !== this.headId\r\n            // && this.getChildNodes(node).length === 0 \r\n            && node.commit.branches !== undefined && node.commit.branches.length > 0\r\n        ).reverse();\r\n\r\n        // branchedNodes.reverse();\r\n        let branchedNodes = [this.getNodeById(this.headId)].concat(branchedNodesNotHead);\r\n        \r\n        let FPTreeNodeListMapByNodeId = {};\r\n// console.log(\"branchedNodes\", branchedNodes)\r\n\r\n        branchedNodes.forEach( branchedNode => {\r\n            // newBranchNoByNodeId[branchedNode.id] = newBranchNo++;\r\n// if (branchedNode.id.startsWith(\"b35dabf\")) console.log(\"branchedNode\", branchedNode);\r\n            let id = branchedNode.id;\r\n            let firstParentNodesOrderedList = [];\r\n            let firstParentTreeBranchNames = this.nodesMap[id].commit.branches;\r\n            let isHeadBranch = (id === this.headId);\r\n            branchedNode.isLeaf = true;\r\n            branchedNode.traversed = true;\r\n            branchedNode.firstParentTreeBranchNames = firstParentTreeBranchNames;\r\n            branchedNode.firstParentTreeLeafNode = branchedNode;\r\n\r\n            while (id in this.firstParentIdMap) {\r\n                id = this.firstParentIdMap[id];\r\n                let node = this.getNodeById(id);\r\n\r\n// if (branchedNode.id.startsWith(\"b35dabf\")) console.log(\"branchedNode while \", node);\r\n                if (node.traversed === true) break;\r\n\r\n                if (isHeadBranch) {\r\n                    node.isMainStem = true;\r\n                    node.implicitBranchNo = 0;\r\n                } else {\r\n                    if (node.commit.branches !== undefined && node.commit.branches.length > 0) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                firstParentNodesOrderedList.push(node);\r\n\r\n                // TODO - suppose that isHead = origin/master\r\n                // it is NOT commit's branch name but node's\r\n                node.firstParentTreeBranchNames = firstParentTreeBranchNames;\r\n                node.firstParentTreeLeafNode = branchedNode;\r\n                // node.branches = headBranchNames;\r\n                node.traversed = true;\r\n            }\r\n\r\n            FPTreeNodeListMapByNodeId[branchedNode.id] = firstParentNodesOrderedList;\r\n        });\r\n\r\n\r\n        /////////////////////////////////////\r\n        // get implicit branch number\r\n        let bno = 0;\r\n        let rootCount = 0;\r\n        this.allNodeList.forEach(node => {\r\n            // when meet other roots\r\n            if (node.isRoot && !node.isMainStem) {\r\n                node.implicitBranchNo += 10000 + this.allNodeList.length + rootCount++;\r\n            }\r\n\r\n            let firstParentChildNodes = this.getChildNodes(node).filter(childNode => this.firstParentIdMap[childNode.id] === node.id);\r\n            if (firstParentChildNodes.length === 0) {\r\n                node.hasNoFirstParentChild = true;\r\n                return;\r\n            }\r\n            let implicitBranchNo = node.implicitBranchNo;\r\n            firstParentChildNodes\r\n                .sort( (a, b) => (b.seq - a.seq))\r\n                .sort( (a, b) => (b.implicitBranchNo - a.implicitBranchNo))\r\n                .forEach( (childNode, i) => {\r\n                    if (i === 0) {\r\n                        childNode.implicitBranchNo = implicitBranchNo;\r\n                    } else {\r\n                        childNode.implicitBranchNo = ++bno;\r\n                    }\r\n            });\r\n        });\r\n\r\n        // branchedNodes = [this.getNodeById(this.headId)].concat(branchedNodesNotHead.reverse());\r\n        branchedNodes = [this.getNodeById(this.headId)].concat(branchedNodesNotHead);\r\n        branchedNodes.forEach( node => {\r\n            FPTreeNodeListMapByNodeId[node.id]\r\n                .reverse()\r\n                .filter(d => d.isMergeCommit)\r\n                .forEach( node => {\r\n                    if (!node.isMergeTraversed) this.findMerges(node);\r\n                });\r\n        });\r\n\r\n        // back to original\r\n        this.gitData.reverse();\r\n    }\r\n\r\n    branchBackTracking(node, branchNames) {\r\n        // masterFist가 보일 때 까지, 혹은 끝까지 갈 때 까지 add 시키자.\r\n\r\n        // TODO \r\n        // branch 가 없는 애들을 찾아서 first parent가 이름을 가지고 있을 때까지 돌려서 해당 이름을 쭉 가지게 만들고\r\n        // origin/master는 골라서 유지하도록 만들어야 함.\r\n        node.branches = node.branches.concat(branchNames);\r\n        node.branchNumbers = node.branchNumbers.concat(branchNames.map(d => this.branchesMap[d]));\r\n        if (node.isMainStem || node.commit.parents.length === 0) {\r\n            return;\r\n        } else {\r\n            this.branchBackTracking(this.nodesMap[node.commit.parents[0]], branchNames);\r\n        }\r\n    }\r\n\r\n    getOverviewClusters(threshold, selection, prefMap = PreferenceWeights, filters, releaseBinningLevel, useHeuristicMerge) {\r\n// console.log(selection)\r\n        let nodeList;\r\n        if (selection !== undefined) nodeList = this.allNodeList.filter( (d, i) => i >= selection[0] && i <= selection[1]);\r\n        else nodeList = this.allNodeList;\r\n        return this.getClusters(threshold, nodeList, prefMap, filters, releaseBinningLevel, useHeuristicMerge);\r\n    }\r\n\r\n    isClusterCut(node, releaseBinningLevel, useHeuristicMerge) {\r\n        // cut clustering(grouping) if meet release node\r\n        if ( (releaseBinningLevel === 2 && (node.isMajorRelease || (useHeuristicMerge && node.mergeNodesContainMajorRelease)))\r\n                || (releaseBinningLevel === 1 && (node.isRelease || (useHeuristicMerge && node.mergeNodesContainRelease)))) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // TODO - need OPTIMIZATION\r\n    keywordMatch = (kfList, node) => kfList.filter( f => {\r\n        let [attr, val] = [f.attrName, f.keyword.toLowerCase()];\r\n// console.log(\"test\", attr, val, node.commit.author, node.commit.author.toLowerCase().indexOf(val))\r\n        switch(attr.toLowerCase()) {\r\n            case \"a\":\r\n                return node.commit.author.toLowerCase().indexOf(val) >= 0;\r\n            case \"t\":\r\n                return node.commit.commitType.toLowerCase().indexOf(val) >= 0;\r\n            case \"f\":\r\n                return Object.keys(node.commit.diffStat.files).filter(name => name.toLowerCase().indexOf(val) >= 0).length > 0;\r\n            case \"m\":\r\n                // return Object.keys(node.commit.corpus).filter(name => name.toLowerCase().indexOf(val) >= 0).length > 0;\r\n                return node.commit.corpus.filter(name => name.toLowerCase().indexOf(val) >= 0).length > 0;\r\n            default:\r\n                return false;\r\n    }}).length > 0;\r\n\r\n    // releaseBinningLevel\r\n    // 0: none, 1: major, 2: isRelease (temporary)\r\n    getClusters(threshold, nodeList, prefMap = PreferenceWeights, keywordFilterList, releaseBinningLevel = 0, useHeuristicMerge = true) {\r\n\r\n        // KEYWORD FILTERS\r\n        if (keywordFilterList.length > 0) {\r\n            nodeList.forEach((node) => {\r\n                // console.log(\"filter:::\", node.commit.author, this.keywordMatch(keywordFilterList.filter(f => f.isIncludes), node));\r\n                let inKF = keywordFilterList.filter(f => f.isIncludes);\r\n                let exKF = keywordFilterList.filter(f => !f.isIncludes);\r\n                let isIncludes, isExcludes;\r\n\r\n                if (inKF.length === 0) isIncludes = true;\r\n                else isIncludes = this.keywordMatch(inKF, node);\r\n                if (exKF.length === 0) isExcludes = false;\r\n                else isExcludes = this.keywordMatch(exKF, node);\r\n\r\n                node.isFilteredOut = !(isIncludes && !isExcludes);\r\n        // console.log(\"####!!!\", node.commit.author, node.isFilteredOut, isIncludes, isExcludes)\r\n\r\n            });\r\n        } else {\r\n            nodeList.forEach( node => node.isFilteredOut = false);\r\n        }\r\n        \r\n// console.log(\"getclusters, FILTERS \", keywordFilterList, nodeList);\r\n\r\n        // build threshold set\r\n        let thresholdSet = new Set();\r\n        nodeList.filter(node => !node.isFilteredOut).forEach( (node, i) => {\r\n            let parentNode = node;\r\n            while (true) {\r\n                let nextFirstParentChildNodeWithSameBranchNo = this.getChildNodes(parentNode)\r\n                    .filter(childNode => this.firstParentIdMap[childNode.id] === parentNode.id && parentNode.implicitBranchNo === childNode.implicitBranchNo);\r\n                if (nextFirstParentChildNodeWithSameBranchNo.length === 0) {\r\n                    break;\r\n                } else if (nextFirstParentChildNodeWithSameBranchNo[0]) {\r\n                    let scores = this.getScoreByPreferences(parentNode, nextFirstParentChildNodeWithSameBranchNo[0], prefMap, useHeuristicMerge);\r\n                    thresholdSet.add(scores.sum);\r\n// console.log(\"NaN node\", scores.sum,node, scores, parentNode, nextFirstParentChildNodeWithSameBranchNo[0], prefMap, useHeuristicMerge)\r\n                    break;\r\n                }\r\n                parentNode = nextFirstParentChildNodeWithSameBranchNo[0];\r\n            }\r\n        });\r\n        thresholdSet.add(0);\r\n        thresholdSet.add(Object.keys(prefMap).length);\r\n        let sortedThresholdList = [...thresholdSet].sort((a, b) => a - b);\r\n        // sortedThresholdList.push(Object.keys(PreferenceWeights).length);\r\n        // sortedThresholdList = [0].concat(sortedThresholdList);\r\nconsole.log(\"thresholdSet\", thresholdSet, sortedThresholdList, threshold, prefMap);\r\n      \r\n        if (threshold === undefined) {\r\n            threshold = sortedThresholdList[this.defaultThresholdStep];\r\n// console.log(\"new start thr. => \", threshold);\r\n        }\r\n\r\n        let container = [];\r\n        let clusterMapByNodeSeq = {};\r\n        // let prefSum = Object.values(prefMap).reduce( (prev, cur) => { prev += cur; return prev;}, 0);\r\n        // let prefNormalizedThreshold = prefSum * threshold / 100;\r\n        let prefNormalizedThreshold = threshold;\r\n\r\n        let targetNodeList = nodeList.filter(node => !node.isFilteredOut);\r\n        if (useHeuristicMerge) targetNodeList = targetNodeList.filter(node => !node.isMergeTraversed);\r\n        \r\n        targetNodeList.forEach( node => {\r\n                if (clusterMapByNodeSeq[node.seq] !== undefined) return;\r\n\r\n                let cluster = new CommitCluster(container.length, node, prefMap);\r\n                container.push(cluster);\r\n                clusterMapByNodeSeq[node.seq] = cluster;\r\n\r\n                // cut clustering(grouping) if meet release node\r\n                if(this.isClusterCut(node, releaseBinningLevel, useHeuristicMerge)) {\r\n// console.log(\"cut!!!\", node.releaseTagString)\r\n                    return;\r\n                }\r\n\r\n                let parentNode = node;\r\n                while(true) {\r\n                    let firstParentChildNodes = this.getChildNodes(parentNode).filter(\r\n                        childNode => \r\n                        nodeList.indexOf(childNode) >= 0\r\n                        && this.firstParentIdMap[childNode.id] === parentNode.id\r\n                        && parentNode.implicitBranchNo === childNode.implicitBranchNo\r\n                    );\r\n                    \r\n                    if (firstParentChildNodes.length == 0) break;\r\n                    let firstParentChildNode = firstParentChildNodes[0];\r\n                     \r\n                    if (firstParentChildNode.isFilteredOut) {\r\n                        // continue\r\n                        parentNode = firstParentChildNode;\r\n                    } else {\r\n                        let scores = this.getScoreByPreferences(node, firstParentChildNode, prefMap, useHeuristicMerge);\r\n\r\n                        thresholdSet.add(scores.sum);\r\n                        if (scores.sum >= prefNormalizedThreshold) {\r\n                            clusterMapByNodeSeq[firstParentChildNode.seq] = cluster;\r\n                            cluster.addNode(firstParentChildNode, scores);\r\n                            parentNode = firstParentChildNode;\r\n    // console.log(\"grouped!!,\", firstParentChildNode.commit.author, firstParentChildNode)\r\n                        } else {\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    // cut clustering(grouping) if meet release node\r\n                    if(this.isClusterCut(firstParentChildNode, releaseBinningLevel, useHeuristicMerge)) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        );\r\n\r\n        // set parent/child\r\n        let doneSet = new Set();\r\n        container.forEach( cluster => {\r\n            // connect when implicitBranchNo is the same;\r\n            let implicitBranchNo = cluster.nodeList[0].implicitBranchNo;\r\n            if (!doneSet.has(implicitBranchNo)) {\r\n                let sameBranchClusters = container.filter( c => c.nodeList[0].implicitBranchNo === implicitBranchNo).sort( (a, b) => a.nodeList[0].seq - b.nodeList[0].seq);\r\n                sameBranchClusters.filter( (d, i) => i < sameBranchClusters.length - 1).forEach( (cluster, i) => {\r\n                    cluster.child = sameBranchClusters[i + 1];\r\n                    sameBranchClusters[i + 1].parent = cluster;\r\n                });\r\n    \r\n                doneSet.add(implicitBranchNo);\r\n            }\r\n\r\n            cluster.branches = Array.from(cluster.nodeList\r\n                .filter(d => d.firstParentTreeBranchNames !== undefined && d.firstParentTreeBranchNames.length > 0)\r\n                .reverse()\r\n                .reduce( (prev, cur) => {\r\n                    // add pr branches first, then explicit branches;\r\n                    cur.firstParentTreeBranchNames.filter(name => name.startsWith(\"origin/pr\")).forEach( d => prev.add(d) );\r\n                    cur.firstParentTreeBranchNames.filter(name => !name.startsWith(\"origin/pr\")).forEach( d => prev.add(d) );\r\n                    return prev;\r\n                }, new Set())\r\n            );\r\n        });\r\n\r\n        return [threshold, sortedThresholdList, container];\r\n    }\r\n\r\n    getLowLevelThresholdAndClusters(cluster, prefMap = PreferenceWeights, useHeuristicMerge) {\r\n        if (cluster === undefined) return [];\r\n\r\n        this.defaultThresholdStep = 2;\r\n        return this.getClusters(undefined, cluster.nodeList, prefMap, useHeuristicMerge);\r\n    }\r\n\r\n    static getTextValue(dataName, value) {\r\n        if (dataName.endsWith(\"Files\") || dataName.endsWith(\"Dirs\")) {\r\n            let vs = value.split(\"/\");\r\n            let fileName = vs.slice(-1)[0];\r\n            if (vs.length > 1) fileName = \".../\" + fileName;\r\n            // return fileName;\r\n            return value;\r\n        } else if (dataName === \"authors\") {\r\n            return value.split(\" <\")[0].split(\" \")[0];\r\n        } else if (dataName === \"authors#2\") {\r\n            return value.split(\" <\")[0];\r\n        } else if (dataName === \"commitTypes\") {\r\n            return value.split(\"_eng\")[0].toUpperCase();\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    static replaceAll(str, searchStr, replaceStr) {\r\n        return str.split(searchStr).join(replaceStr);\r\n    }\r\n\r\n    static searchByKeywords(nodeList, keywords, attrName = \"fullText\") {\r\n        let resultNodeList = [];\r\n        let findAttrs;\r\n        if (attrName === \"fullText\") {\r\n            // findAttrs = CommitAttributeNames;\r\n            findAttrs = CommitAttributeNames.concat();\r\n        } else {\r\n            findAttrs = [attrName];\r\n        }\r\n        keywords = keywords.map(d => d.toLowerCase());\r\n        nodeList.forEach((node) => {\r\n            let foundMap = keywords.reduce((prev, cur) => {\r\n                prev[cur] = false;\r\n                return prev;\r\n            }, {});\r\n            \r\n            findAttrs.forEach((attr) => {\r\n                let values = [];\r\n                if (attr === \"files\") values = values.concat(Object.keys(node.commit.diffStat.files));\r\n                else if (!(attr in node.commit)) return;\r\n                else values = values.concat(node.commit[attr]);\r\n                values.forEach(v => {\r\n                    // AND\r\n                    Object.entries(foundMap).filter(d => !d[1])\r\n                        .forEach(d => {\r\n                            let keyword = d[0];\r\n                            if (v.toLowerCase().indexOf(keyword) >= 0) {\r\n                                foundMap[d[0]] = true;\r\n                            }\r\n                        })\r\n                    ;\r\n                });\r\n            });\r\n\r\n            // if all keywords found\r\n            if (Object.entries(foundMap).filter(d => d[1]).length > 0) {\r\n                resultNodeList.push(node);\r\n            }\r\n        });\r\n        // console.log(\"resultNodeList\", resultNodeList);\r\n        return resultNodeList;\r\n    }\r\n\r\n    static trimYYYYMMDD(dt) {\r\n        return new Date(dt).toISOString().slice(0, 10);\r\n    }\r\n\r\n    static parseTime(dt) {\r\n        let parseTime = d3.timeParse(\"%Y-%m-%d\");\r\n        return parseTime(GitAnalyzer.trimYYYYMMDD(dt));\r\n    }\r\n\r\n    getClusterBranchType(cluster) {\r\n// if (cluster.nodeList.slice(-1)[0].id.startsWith(\"1f2dc3\")) console.log(\"!!!!\", cluster)\r\n        // if this cluster has children, then follow it.\r\n        while (cluster.child !== undefined) {\r\n            cluster = cluster.child;\r\n        }\r\n\r\n        // if most child has no branchName\r\n        if (cluster.branches.length === 0) {\r\n            while (cluster.parent !== undefined ) {\r\n                if (cluster.branches.length > 0) break;\r\n                else cluster = cluster.parent;\r\n            }\r\n        }\r\n\r\n        let branchNames = cluster.branches;\r\n\r\n        let lastBranchName = (branchNames.length > 0 ? branchNames[0] : \"\");\r\n// if (cluster.nodeList.slice(-1)[0].id.startsWith(\"1f2dc3\")) console.log(\"!!!!\", cluster, branchNames, lastBranchName)\r\n        // let implicitBranchNo = cluster.nodeList[0].implicitBranchNo;\r\n        let lastNode = cluster.nodeList.slice(-1)[0];\r\n        let type = BranchTypes.EXPLICIT;\r\n\r\n        if (lastNode.implicitBranchNo === 0) {\r\n            type = BranchTypes.MAIN_STEM;\r\n        } else if (lastBranchName.startsWith(\"origin/pr\")) {\r\n            let prNum = Number(lastBranchName.substring(\"origin/pr/\".length, lastBranchName.length));\r\n            if (this.pullMapByNumber[prNum] === undefined) {\r\nconsole.log(\"NO PULL!!!! .. might pr removed\", prNum, lastBranchName);\r\n                type = BranchTypes.PR_CLOSED;\r\n            } else {\r\n                let closed = (this.pullMapByNumber[prNum].state === \"closed\");\r\n                let merged = this.pullMapByNumber[prNum].merged;\r\n\r\n                if (merged) {\r\n                    type = BranchTypes.PR_MERGED;\r\n                } else if (closed) {\r\n                    type = BranchTypes.PR_CLOSED;\r\n                } else {\r\n                    type = BranchTypes.PR_OPEN;\r\n                }\r\n            }\r\n        } else if (lastBranchName === \"\") {\r\n            type = BranchTypes.IMPLICIT;\r\n        }\r\n\r\n        return type;\r\n    }\r\n\r\n    getScoreByPreferences(node1, node2, prefMap, useHeuristicMerge, maxCommitHours = 96, verbose = false) {\r\n        let scores = undefined;\r\n        let commit1 = (useHeuristicMerge && node1.mergeSquashCommit !== undefined ? node1.mergeSquashCommit : node1.commit);\r\n        let commit2 = (useHeuristicMerge && node2.mergeSquashCommit !== undefined ? node2.mergeSquashCommit : node2.commit);\r\n\r\n        if (commit1.no in this.scoreData && commit2.no in this.scoreData[commit1.no]) {\r\n            scores = this.scoreData[commit1.no][commit2.no];\r\n        }\r\n// console.log(\"commit1.no\", commit1.no, commit2.no, scores, useHeuristicMerge, node1.mergeSquashCommit, node2.mergeSquashCommit);\r\n        if (scores === undefined ) {\r\n            // console.log(\"%%% far nodes' score \", scores, node1, node2);\r\n            scores = getScoreTemp(commit1, commit2, verbose);\r\n            \r\n            if ((this.scoreData[commit1.no] !== undefined)) {\r\n                this.scoreData[commit1.no][commit2.no] = scores;\r\n            } else {\r\n                this.scoreData[commit1.no] = {};\r\n                this.scoreData[commit1.no][commit2.no] = scores;\r\n            }\r\n        }\r\n\r\n        let dateNormFunc = d3.scaleLinear().range([1, 0]).domain([0, maxCommitHours]);\r\n        let diffHours = Math.min(Math.abs(new Date(commit1.date) - new Date(commit2.date))/24, maxCommitHours);\r\n        // let diffDays = Math.abs(new Date(a.date) - new Date(b.date))/24/60/1000/60;\r\n        //score[\"commitDate\"] = dateNormFunc(Math.log10(diffDays));\r\n        scores[\"commitDate\"] = Math.abs(dateNormFunc(diffHours));\r\n    \r\n        scores.sum = Number(Object.entries(prefMap).reduce( (prev, entry) => {\r\n            prev += entry[1] * Math.abs(scores[entry[0]]);\r\n            return prev;\r\n        }, 0).toFixed(7));\r\n\r\n        return scores;\r\n    }\r\n\r\n    static getBranchNamesFromBranchClusterNodes(branchClusterNodes) {\r\n        return Array.from(branchClusterNodes.filter(cn => cn.cluster.branches.length > 0).reverse().reduce( (prev, cur) => {\r\n            cur.cluster.branches.forEach( b => prev.add(b) );\r\n            return prev;\r\n        }, new Set())).map(b => (b.startsWith(\"origin/\") ? b.substring(7, b.length) : b))\r\n    }\r\n\r\n    static reduceLongName(name,threshold) {\r\n        if(name.length < threshold) {\r\n            return name;\r\n        }\r\n        else {\r\n            return name.slice(0, threshold) + \"...\";\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default GitAnalyzer;","import 'date-fns';\r\nimport React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport * as actions from '../modules';\r\n\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\n\r\nimport \"./TemporalFilter.css\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\r\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    formControl: {\r\n        margin: 0,\r\n    },\r\n    dateField: {\r\n        width: \"90px\",\r\n        fontSize: \"10px\",\r\n        margin: 0,\r\n        padding: 0,\r\n    },\r\n\r\n}));\r\n\r\nconst SearchDiv = (props) => {\r\n// console.log(\"p\", props.releaseNodeList);\r\n    return (\r\n        <RadioGroup name={props.name} style={{ width: \"110px\" }} value={props.value} onChange={props.onChange}>\r\n            <div className=\"flexVerticalContainer\">\r\n                <div className=\"flexContainer\">\r\n                    <div>\r\n                        <Radio\r\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\r\n                            value=\"tag\"\r\n                            color=\"primary\"\r\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\r\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <Select\r\n                            id={props.name + \"Release\"}\r\n                            value={props.release}\r\n                            onChange={props.heandleReleaseChange}\r\n                            style={{width:\"90px\", fontSize:\"12px\"}}\r\n                            native\r\n                        >  \r\n                            <option value={props.root}>INIT</option>\r\n                            {props.releaseNodeList.map( (node, i) => (\r\n                                <option key={i} value={node.seq} >\r\n                                    {node.releaseTagString}\r\n                                </option>\r\n                            ))}\r\n                            <option value={props.head}>LATEST</option>\r\n                        </Select>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flexContainer\">\r\n                    <div>\r\n                        <Radio\r\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\r\n                            value=\"date\"\r\n                            color=\"primary\"\r\n                            disableRipple\r\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\r\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <TextField \r\n                            id={props.name + \"Date\"} \r\n                            type=\"date\" \r\n                            className={props.dateField} \r\n                            value={props.startRelease}\r\n                            defaultValue={props.defaultDateValue}\r\n                            onChange={(event) => props.handleDateChange(event.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </RadioGroup>\r\n    );\r\n}\r\n\r\nconst TemporalFilter = props => {\r\n    const classes = useStyles();\r\n    const [fromType, setFromType] = React.useState(\"tag\");\r\n    const [toType, setToType] = React.useState(\"tag\");\r\n    const [startDate, setStartDate] = React.useState(\"date\");\r\n    const [endDate, setEndDate] = React.useState(\"date\");\r\n\r\n    const headSeq = props.gitAnalyzer.allNodeList.slice(-1)[0].seq;\r\n    const rootSeq = props.gitAnalyzer.allNodeList[0].seq;\r\n\r\n    let defaultStartSeq = rootSeq;\r\n    let defaultEndSeq = headSeq;    \r\n    if (props.gitAnalyzer.repoName === \"realm-java\") {\r\n        defaultStartSeq = 15731;\r\n        defaultEndSeq = 15972;    \r\n    } else if (props.gitAnalyzer.repoName === \"MixedRealityToolkit-Unity\") {\r\n        defaultStartSeq = 11152;\r\n        defaultEndSeq = 11231;\r\n    }\r\n    \r\n    const [startRelease, setStartRelease] = React.useState(defaultStartSeq);\r\n    const [endRelease, setEndRelease] = React.useState(defaultEndSeq);\r\n    \r\n    const dispatch = useDispatch(); \r\n    // const filterSelection = useSelector(state => state.commitFilterSelection);\r\n\r\n    const handleFromTypeChange = event => {\r\n        setFromType(event.target.value);\r\n    };\r\n    const handleToTypeChange = event => {\r\n        setToType(event.target.value);\r\n    };\r\n    const handleStartDateChange = date => {\r\n        setStartDate(date);\r\n    }\r\n    const handleEndDateChange = date => {\r\n        setEndDate(date);\r\n    }\r\n    const handleStartReleaseChange = event => {\r\n        setStartRelease(event.target.value);\r\n    };\r\n    const handleEndReleaseChange = event => {\r\n        setEndRelease(event.target.value);\r\n    };\r\n    const releaseNodeList = props.gitAnalyzer.allNodeList.filter(d => d.isRelease);\r\n    const rootDate = GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[0].commit.date);\r\n    const headDate = GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList.slice(-1)[0].commit.date);\r\n    \r\n// console.log(\"tf props.gitAnalyzer\", props.gitAnalyzer.allNodeList, \"release\", releaseNodeList)\r\n    function getSeqByDate(date, isStart) {\r\n        let fi;\r\n        if (isStart) {\r\n            for (let fi = 0; fi < props.gitAnalyzer.allNodeList.length; fi++) {\r\n// console.log(\"NONONONO\", GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[fi].commit.date));\r\n                if (GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[fi].commit.date) >= date) {\r\n                    return props.gitAnalyzer.allNodeList[fi].seq;\r\n                }\r\n            }\r\n        } else {\r\n            for (let fi = props.gitAnalyzer.allNodeList.length - 1; fi >= 0 ; fi--) {\r\n                if (GitAnalyzer.trimYYYYMMDD(props.gitAnalyzer.allNodeList[fi].commit.date) <= date) {\r\n                    return props.gitAnalyzer.allNodeList[fi].seq;\r\n                }\r\n            }\r\n        }\r\n\r\n        return isStart? 0 : props.gitAnalyzer.allNodeList.length - 1;\r\n    }\r\n\r\n\r\n// console.log(\"what the hell?\")\r\n    return (\r\n            <div className=\"flexVerticalContainer\">\r\n                <FormControl component=\"fieldset\" className={classes.formControl}>\r\n                    <div className=\"flexContainer\" style={{alignItems: \"center\"}}>\r\n                        <SearchDiv\r\n                            name=\"from\"\r\n                            value={fromType}\r\n                            onChange={handleFromTypeChange}\r\n                            dateField={classes.dateField}\r\n                            date={startDate}\r\n                            handleDateChange={handleStartDateChange}\r\n                            release={startRelease}\r\n                            heandleReleaseChange={handleStartReleaseChange}\r\n                            defaultDateValue={rootDate}\r\n                            defaultReleaseValue={rootSeq}\r\n                            head={headSeq}\r\n                            root={rootSeq}\r\n                            releaseNodeList={releaseNodeList}\r\n                        />\r\n                        <div>&nbsp; ~ </div>\r\n                        <SearchDiv\r\n                            name=\"to\"\r\n                            value={toType}\r\n                            onChange={handleToTypeChange}\r\n                            dateField={classes.dateField}\r\n                            date={endDate}\r\n                            handleDateChange={handleEndDateChange}\r\n                            release={endRelease}\r\n                            heandleReleaseChange={handleEndReleaseChange}\r\n                            defaultDateValue={headDate}\r\n                            defaultReleaseValue={headSeq}\r\n                            head={headSeq}\r\n                            root={rootSeq}\r\n                            releaseNodeList={releaseNodeList}\r\n                        />\r\n                    </div>\r\n                </FormControl>\r\n                <div className=\"flexVerticalContainer\" style={{alignItems:\"center\"}}>\r\n                    <div style={{height:\"10px\"}}></div>\r\n                    <div style={{width:\"95%\"}}>\r\n                        <Button \r\n                            style={{ \"fontSize\": \"11px\", width:\"100%\" }} size=\"small\" variant=\"outlined\" \r\n                            onClick={() => {\r\n                                let fromSeq = startRelease;\r\n                                let toSeq = endRelease;\r\n                                if (fromType === \"date\") {\r\n                                    fromSeq = getSeqByDate(startDate, true)\r\n                                } \r\n                                if (toType === \"date\") {\r\n                                    toSeq = getSeqByDate(endDate, false)\r\n                                }\r\n// console.log(\"NONONONO\", fromType, toType, startDate, endDate, fromSeq, toSeq);\r\n                                // props.onCommitFilterChanged([fromSeq, toSeq]);\r\n                                dispatch(actions.updateGlobalCommitsByTemporalFilter([Number(fromSeq), Number(toSeq)]));\r\n                        }}>\r\n                            TEMPORAL FILTER\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    );\r\n}\r\n\r\nexport default TemporalFilter;","import \"./TemporalSelector.css\";\r\nimport * as d3 from 'd3';\r\nimport { AttributeColors } from \"./ColorClasses\"\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport * as actions from '../modules';\r\n\r\nimport React, { useRef, useEffect } from 'react';\r\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\r\n\r\nlet commitBrush = undefined;\r\nlet commitSeqXScale = undefined;\r\n\r\nfunction navRender(props, state) {\r\n    // VARIABLES\r\n    \r\n    const arrowSvgHeight = state.arrowSvgHeight;\r\n    const brushHandleSize = 6;\r\n    const navMarginLeft = brushHandleSize / 2;\r\n    const navMarginBottom = 3;\r\n    const temporalAxisHeight = 22;\r\n    const tagHeight = 50;\r\n    const temporalAreaHeight = state.temporalAreaHeight;\r\n    const leftWidth = state.leftPaneWidth + 11;\r\n    const width = state.width;\r\n    const parseTime = GitAnalyzer.parseTime;\r\n\r\n// console.log(\"navigationRender\");\r\n    const { allNodeList } = props.gitAnalyzer;\r\n// console.log(\"navigationRender--- allnodeList.length=\", allNodeList.length);\r\n    const focusHeight = 25;\r\n    const height = state.temporalSelectorHeight - navMarginBottom;\r\n    const focusRelativeHeightPosition = height - focusHeight;\r\n    const marginLeft = navMarginLeft;\r\n\r\n    let globalStartSeq, globalEndSeq;\r\n    if (state.globalCommitSeqSelectionByTemporalFilter === undefined) {\r\n        globalStartSeq = 0;\r\n        globalEndSeq = allNodeList.length - 1;\r\n    } else {\r\n        [globalStartSeq, globalEndSeq] = state.globalCommitSeqSelectionByTemporalFilter;\r\n    }\r\n\r\n    const globalFilteredNodeList = allNodeList.filter( \r\n            node => node.seq >= globalStartSeq && node.seq <= globalEndSeq );\r\n\r\n    // FUNCTIONS INIT\r\n    const handleTemporalLabel = (selection, xTemporalScale) => {\r\n        let leftAlignWidth = (selection[0] > 50 ? 45 : 0);\r\n        let rightAlignWidth = (selection[1] > width - 50 ? 80 : 40);\r\n        d3.select(\"#temporalStartDiv\")\r\n            // .style(\"left\", (leftWidth + selection[0] + 20) + \"px\")\r\n            .style(\"left\", (selection[0] - leftAlignWidth) + \"px\")\r\n            .text(getTemporalLabelByDate(xTemporalScale.invert(selection[0])));\r\n        d3.select(\"#temporalEndDiv\")\r\n            // .style(\"left\", (leftWidth + selection[1] - 40 + 15) + \"px\")\r\n            .style(\"left\", (selection[1] - rightAlignWidth) + \"px\")\r\n            .text(getTemporalLabelByDate(xTemporalScale.invert(selection[1])));\r\n    }\r\n\r\n    const handleCommitLabel = (selection, commitSeqXScale, globalStartSeq) => {\r\n        let newXScale = d3.scaleLinear().rangeRound([0, globalFilteredNodeList.length - 1]).domain(commitSeqXScale.range());\r\n        let newSel = selection.map(d => newXScale(d));\r\n\r\n        let [startLabel, endLabel] = newSel.map(d => {\r\n            let node = globalFilteredNodeList[d];\r\n            if (node.isRelease) return node.releaseTagString;\r\n            else return \"#\" + node.commit.id.substring(0, 6);\r\n        });\r\n\r\n        let leftAlignWidth = (selection[0] > 60 ? 60 : 0);\r\n        let rightAlignWidth = (selection[1] > width - 70 ? 100 : 60);\r\n        d3.select(\"#commitStartDiv\")\r\n            // .style(\"left\", (leftWidth + selection[0] + 20) + \"px\")\r\n            .style(\"left\", (selection[0] - leftAlignWidth) + \"px\")\r\n            .text(startLabel + \"(\" + (newSel[0] + globalStartSeq) + \")\");\r\n        d3.select(\"#commitEndDiv\")\r\n            // .style(\"left\", (leftWidth + selection[1] - 65 + 15) + \"px\")\r\n            .style(\"left\", (selection[1] - rightAlignWidth) + \"px\")\r\n            .text(endLabel + \"(\" + (newSel[1] + globalStartSeq) + \")\");\r\n    }\r\n\r\n    const drawTemporalToCommitArrow = () => {\r\n        let tSel = d3.brushSelection(d3.select(\"#temporalBrush\").node());\r\n        let cSel = d3.brushSelection(d3.select(\"#commitBrush\").node());\r\n\r\n        if (tSel === null || cSel === null) return;\r\n        drawSelectionArrow(\"navigationSvg\", [[tSel[0], cSel[0]], [tSel[1], cSel[1]]], [temporalAreaHeight, temporalAreaHeight + tagHeight - navMarginBottom]);\r\n    }\r\n\r\n    const drawCommitToClusterArrow = (selection) => {\r\n        if (selection === null) return;\r\n        drawSelectionArrow(\"arrowSvg\",\r\n            [[selection[0], state.clusterOverviewSliderWidth],\r\n            [selection[1], state.clusterOverviewWidth]], [0, arrowSvgHeight]\r\n        );\r\n    }\r\n\r\n    const getCommitBrushSelectionsTriggeredByTemporalBrush = (selection, commitSeqXScale, bins, globalStartSeq) => {\r\n        if (selection === null) return null;\r\n// console.log(\"getCommitBrushSelectionsTriggeredByTemporalBrush\", d3.event.target);\r\n        let newXScale = d3.scaleLinear().rangeRound([0, bins.length - 1]).domain(commitSeqXScale.range());\r\n        let startBinIndex, endBinIndex;\r\n        [startBinIndex, endBinIndex] = selection.map(d => newXScale(d));\r\n// console.log(\"before startBinIndex, endBinIndex\", startBinIndex, endBinIndex, bins)\r\n\r\n        for (; startBinIndex < endBinIndex; startBinIndex++) {\r\n            if (bins[startBinIndex].length !== 0) break;\r\n        }\r\n        for (; endBinIndex > startBinIndex; endBinIndex--) {\r\n            if (bins[endBinIndex].length !== 0) break;\r\n        }\r\n// console.log(\"startBinIndex, endBinIndex\", startBinIndex, endBinIndex, bins, commitSeqXScale)\r\n\r\n        if (bins[startBinIndex] === undefined) {\r\n            return null;\r\n        } else {\r\n// console.log(\"return\", [commitSeqXScale(bins[startBinIndex][0].seq - globalStartSeq), commitSeqXScale(bins[endBinIndex].slice(-1)[0].seq - globalStartSeq)])\r\n            return [commitSeqXScale(bins[startBinIndex][0].seq - globalStartSeq), commitSeqXScale(bins[endBinIndex].slice(-1)[0].seq - globalStartSeq)];\r\n        }\r\n    }\r\n\r\n    const commitBrushFunc = (selection, commitSeqXScale) => {\r\n        console.log(\"brushed width x\", d3.event, selection);\r\n        if (selection === null) return null;\r\n\r\n        let commitSeqScale = d3.scaleLinear().range([0, globalFilteredNodeList.length - 1]).domain(commitSeqXScale.range());\r\n        let commitSeqSelection = selection.map(d => Math.round(commitSeqScale(d)));\r\n\r\n        // STATE UPDATE\r\n        state.udpateCommitsByTemporalBrush(commitSeqSelection.map(d => d + globalStartSeq));\r\n// console.log(\"###udpateCommitsByTemporalBrush\", commitSeqSelection.map(d => d + globalStartSeq))\r\n        // handle deco\r\n        d3.select(\"#navigationSvg\").selectAll(\".handle\")\r\n            .style(\"stroke\", d3.schemeCategory10[0])\r\n            .style(\"fill\", d3.schemeCategory10[0])\r\n            .style(\"fill-opacity\", 0.2)\r\n            ;\r\n\r\n        return commitSeqSelection;\r\n    }\r\n\r\n    const drawSelectionArrow = (svg, rangeX, rangeY) => {\r\n        d3.select(\"#\" + svg).selectAll(\".rangeArrowLine\").remove();\r\n        d3.select(\"#\" + svg).selectAll(\".rangeArrowLine\")\r\n            .data(rangeX)\r\n            .enter()\r\n            .append(\"line\")\r\n            .attr(\"class\", \"rangeArrowLine\")\r\n            .attr(\"id\", svg + \"ArrowLine\")\r\n            .attr(\"x1\", d => d[0])\r\n            .attr(\"x2\", d => d[1])\r\n            .attr(\"y1\", rangeY[0])\r\n            .attr(\"y2\", rangeY[1])\r\n            .style(\"stroke-width\", 1)\r\n            .style(\"stroke\", d3.schemeCategory10[0])\r\n            ;\r\n    }\r\n\r\n    const getTemporalLabelByDate = (dt) => {\r\n        return new Date(dt).toISOString().slice(2, 10);\r\n    }\r\n\r\n    // LOGIC\r\n    let navigationSvg = d3.select(\"#navigationSvg\");\r\n    let commitSeqXScale = d3.scaleBand().range([marginLeft, width - marginLeft]).domain(d3.range(globalFilteredNodeList.length));\r\n    // let colorScale = d3.scaleLinear().range([\"white\", \"black\"]).domain([0, 1000]);\r\n\r\n    ////////////////////////////////////////////\r\n    // commit rects\r\n    navigationSvg.append(\"g\")\r\n        .attr(\"id\", \"commitRects\")\r\n        .attr(\"transform\", \"translate(0 \" + focusRelativeHeightPosition + \")\")\r\n        .selectAll(\"line\")\r\n        .data(globalFilteredNodeList)\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"id\", d => \"commitRect\" + d.seq)\r\n        .attr(\"class\", \"commitRect\")\r\n        .attr(\"x\", d => commitSeqXScale(d.seq - globalStartSeq))\r\n        .attr(\"y\", 0)\r\n        .attr(\"width\", commitSeqXScale.bandwidth())\r\n        .attr(\"height\", focusHeight)\r\n        // .style(\"fill\", d => colorScale(d.cloc))\r\n        .style(\"fill\", d => {\r\n            if (d.isMajorRelease) return AttributeColors.highlight[0];\r\n            else if (d.isRelease) return AttributeColors.highlight[2];\r\n            else return AttributeColors[\"commit\"][2];\r\n            // return \"AAA\";\r\n        })\r\n        .style(\"stroke-width\", d => (d.isRelease === true ? \"1px\" : \"0\"))\r\n        .style(\"stroke\", d => (d.isMajorRelease ? AttributeColors.highlight[0] : (d.isRelease ? AttributeColors.highlight[2] : \"\")))\r\n        .style(\"stroke-opacity\", 0.8);\r\n    ;\r\n    \r\n    // COMMIT SEQ AXIS\r\n//     let commitSeqAxis = d3.axisBottom(commitSeqXScale);    \r\n//     const commitSeqTickCount = 10;\r\n//     const commitSeqTickInterval = parseInt((commitSeqXScale.domain().slice(-1)[0] - commitSeqXScale.domain()[0]) / commitSeqTickCount);\r\n\r\n//     console.log(\"seqscale\", commitSeqTickInterval, commitSeqXScale.domain(), commitSeqXScale.domain().filter( (d, i) => (i % commitSeqTickInterval) === (commitSeqTickInterval - 1)));\r\n\r\n//     let commitSeqAxisArea = d3.select(\"#arrowSvg\").append(\"g\")\r\n//         .attr(\"id\", \"commitSeqAxis\")\r\n//         .call(\r\n//             commitSeqAxis.tickSizeOuter(commitSeqAxis.tickSize()).tickSize(commitSeqAxis.tickSize() * -1)\r\n//             .tickValues( commitSeqXScale.domain().filter( (d, i) => {\r\n//                 return (i % commitSeqTickInterval) === (commitSeqTickInterval - 1);\r\n// //                 const diff = e - s;\r\n// // console.log(\"range\", diff, s, e, diff / 10,  (i%(diff/10)))\r\n// //                 if ( (e - s) > tickCount) {\r\n// //                     return (i % ( diff / 10)) === 0;\r\n// //                 } else {\r\n// //                     return true;\r\n// //                 }\r\n//             }))\r\n//         );\r\n//     commitSeqAxisArea.select(\"path\").style(\"stroke-opacity\", 0);\r\n//     commitSeqAxisArea.selectAll(\".tick line\").style(\"stroke-opacity\", 0);\r\n//     commitSeqAxisArea.selectAll(\"text\").style(\"font-size\", \"8px\");\r\n\r\n\r\n    ///////////////////////////////\r\n    // tagging\r\n    ///////////////////////////////\r\n    // Temporal Area chart Filter (binning by day)\r\n    let startDate = parseTime(globalFilteredNodeList[0].commit.date);\r\n    let endDate = parseTime(globalFilteredNodeList.slice(-1)[0].commit.date);\r\n// console.log(startDate, endDate)\r\n    let xTemporalScale = d3.scaleTime().domain([startDate, endDate]).range([marginLeft, width - marginLeft]);\r\n    let histogram = d3.histogram()\r\n        .value(d => parseTime(d.commit.date))\r\n        .domain(xTemporalScale.domain())\r\n        .thresholds(xTemporalScale.ticks(d3.timeDay))\r\n        ;\r\n    let bins = histogram(globalFilteredNodeList).map(d => {\r\n        d.cloc = d.reduce( (prev, node) => prev + node.cloc, 0);\r\n        return d;\r\n    });\r\n\r\n    let temporalYSizeHalf = (temporalAreaHeight - temporalAxisHeight) / 2;\r\n    let yTemporalCommitCountScale = d3.scaleLinear().range([temporalYSizeHalf, 0]).domain([0, d3.max(bins, d => d.length)]);\r\n    let yTemporalCLOCScale = d3.scaleLinear().range([temporalYSizeHalf, 0]).domain([0, d3.max(bins, d => d.cloc)]);\r\n\r\n    let tempArea = navigationSvg.append(\"g\")\r\n// console.log(\"bins\", bins, temporalAreaHeight)\r\n    tempArea.append(\"path\")\r\n        .attr(\"transform\", \"translate(0, \" + (temporalAxisHeight) + \")\")\r\n        .datum(bins)\r\n        .attr(\"fill\", AttributeColors[\"commit\"][0])\r\n        .attr(\"stroke\", AttributeColors[\"commit\"][0])\r\n        .attr(\"stroke-width\", 1.5)\r\n        .attr(\"opacity\", 0.9)\r\n        .attr(\"d\", d3.area()\r\n            .x(d => xTemporalScale(d.x0))\r\n            .y0(temporalYSizeHalf)\r\n            .y1(d => yTemporalCommitCountScale(d.length))\r\n            .curve(d3.curveCatmullRom.alpha(0.4))\r\n        )\r\n    ;\r\n    tempArea.append(\"path\")\r\n        .attr(\"transform\", \"translate(0, \" + (temporalAxisHeight + temporalYSizeHalf) + \")\")\r\n        .datum(bins)\r\n        .attr(\"fill\", AttributeColors[\"commit\"][0])\r\n        .attr(\"stroke\", AttributeColors[\"commit\"][0])\r\n        .attr(\"stroke-width\", 1.5)\r\n        .attr(\"opacity\", 0.9)\r\n        .attr(\"d\", d3.area()\r\n            .x(d => xTemporalScale(d.x0))\r\n            .y0(temporalYSizeHalf)\r\n            .y1(d => yTemporalCLOCScale(d.cloc))\r\n            .curve(d3.curveCatmullRom.alpha(0.4))\r\n        )\r\n    ;\r\n    tempArea.append(\"text\")\r\n        .attr(\"x\", 7)\r\n        .attr(\"y\", temporalAxisHeight + 10)\r\n        .attr(\"text-anchor\", \"start\")\r\n        .style(\"font-size\", \"10px\")\r\n        .style(\"font-weight\", 500)\r\n        .text(\"COMMIT #\")\r\n    ;\r\n    tempArea.append(\"text\")\r\n        .attr(\"x\", 7)\r\n        .attr(\"y\", temporalAxisHeight + temporalYSizeHalf + 10)\r\n        .attr(\"text-anchor\", \"start\")\r\n        .style(\"font-size\", \"10px\")\r\n        .style(\"font-weight\", 500)\r\n        .text(\"CLOC\")\r\n    ;\r\n\r\n\r\n    let tempAxis = d3.axisTop(xTemporalScale);\r\n    tempArea.append(\"g\")\r\n        .call(tempAxis.tickSizeOuter(tempAxis.tickSize()).tickSize(tempAxis.tickSize() * -1))\r\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + (temporalAxisHeight - 1) + \")\")\r\n        .selectAll(\".tick line\")\r\n        .attr(\"transform\", \"translate(\" + 0 + \",\" + tempAxis.tickSize() / 2 + \")\")\r\n        ;\r\n\r\n    let releaseTagNodeList = globalFilteredNodeList.filter(d => d.isRelease);\r\n    let releaseBins = histogram(releaseTagNodeList);\r\n    // let bar = tempArea.selectAll(\".bar\")\r\n    //     .data(releaseBins)\r\n    //     .enter().append(\"g\")\r\n    //     .attr(\"class\", \"bar\")\r\n    // bar.append(\"rect\")\r\n    //     .attr(\"x\", d => xTemporalScale(d.x0))\r\n    //     .attr(\"y\", temporalAxisHeight)\r\n    //     .attr(\"width\", d => { return xTemporalScale(d.x1) - xTemporalScale(d.x0); })\r\n    //     .attr(\"height\", d => (d.length > 0 ? temporalAreaHeight - temporalAxisHeight : 0))\r\n    //     .style(\"opacity\", 0.3)\r\n    //     .style(\"stroke\", d => (d.filter(node => node.isMajorRelease).length > 0 ? \"black\" : \"#AAAAAA\"))\r\n    //     ;\r\n\r\n    ///////////////////////////////////////////////\r\n    // release link between commitseq and temporal\r\n    // console.log(\"link bt\", releaseTagNodeList)\r\n    let links = navigationSvg.append(\"g\");\r\n    links.selectAll(\"line\")\r\n        .data(releaseTagNodeList)\r\n        .enter()\r\n        .append(\"line\")\r\n        .attr(\"class\", \"linkBetweenCT\")\r\n        .attr(\"x1\", d => xTemporalScale(parseTime(d.commit.date)))\r\n        .attr(\"x2\", d => commitSeqXScale(d.seq - globalStartSeq))\r\n        .attr(\"y1\", temporalAreaHeight)\r\n        .attr(\"y2\", focusRelativeHeightPosition)\r\n        .style(\"stroke-width\", 1)\r\n        .style(\"stroke\", d => (d.isMajorRelease ? \"black\" : \"#BBBBBB\"))\r\n        .style(\"opacity\", 0.3)\r\n        .on(\"mouseenter\", function (d) {\r\n            d3.select(this).style(\"stroke\", \"red\").style(\"stroke-width\", \"3px\");\r\n            d3.select(\"#releaseLabelDiv\")\r\n                .text(d.releaseTagString)\r\n                .style(\"left\", (d3.event.pageX) + \"px\")\r\n                .style(\"top\", (d3.event.pageY - 10) + \"px\")\r\n                .style(\"opacity\", 1)\r\n                ;\r\n            d3.select(\"#commitRect\" + d.seq).attr(\"height\", focusHeight + 10).attr(\"y\", -5);\r\n        })\r\n        .on(\"mouseleave\", function (d) {\r\n            d3.select(this)\r\n                .style(\"stroke\", (d.isMajorRelease ? \"black\" : \"#BBBBBB\"))\r\n                .style(\"stroke-width\", \"1px\")\r\n                ;\r\n            d3.select(\"#commitRect\" + d.seq).attr(\"height\", focusHeight).attr(\"y\", 0);\r\n            d3.select(\"#releaseLabelDiv\").style(\"opacity\", 0.2);\r\n        })\r\n        ;\r\n    ;\r\n    links.selectAll(\"text\")\r\n        .data(releaseTagNodeList.filter(d => d.isMajorRelease && d.releaseTagString.split(\".\")[1] === \"0\"))\r\n        .enter()\r\n        .append(\"text\")\r\n        .attr(\"x\", d => commitSeqXScale(d.seq))\r\n        .attr(\"y\", focusRelativeHeightPosition)\r\n        .attr(\"text-anchor\", \"end\")\r\n        .text(d => d.releaseTagString.split(\".\").slice(0, 2).join(\".\"))\r\n        .style(\"transform\", \"rotate(45)\")\r\n        ;\r\n\r\n\r\n    ////////////////////////////////////////////////\r\n    // brushes\r\n    let commitBrush = d3.brushX()\r\n        .extent([[marginLeft, focusRelativeHeightPosition], [width - marginLeft, height]]);\r\n    let temporalBrush = d3.brushX()\r\n        .extent([[marginLeft, temporalAxisHeight], [width - marginLeft, temporalAreaHeight]]);\r\n    navigationSvg.append(\"g\")\r\n        .attr(\"id\", \"commitBrush\")\r\n        .attr(\"class\", \"brush\")\r\n        .call(commitBrush)\r\n        .call(commitBrush.move, commitSeqXScale.range());\r\n    navigationSvg.append(\"g\")\r\n        .attr(\"id\", \"temporalBrush\")\r\n        .attr(\"class\", \"brush\")\r\n        .call(temporalBrush)\r\n        .call(temporalBrush.move, commitSeqXScale.range())\r\n        ;\r\n\r\n    temporalBrush.on(\"brush\", () => {\r\n        drawTemporalToCommitArrow();\r\n        handleTemporalLabel(d3.event.selection, xTemporalScale);\r\n    });\r\n    commitBrush.on(\"brush\", () => {\r\n        drawCommitToClusterArrow(d3.event.selection);\r\n        drawTemporalToCommitArrow();\r\n// console.log(\"commitBrush\", d3.event.selection, commitSeqXScale)\r\n        handleCommitLabel(d3.event.selection, commitSeqXScale, globalStartSeq);\r\n    });\r\n\r\n    temporalBrush.on(\"end\", () => {\r\n        if (d3.event.selection === null) return;\r\n        let newSelection = getCommitBrushSelectionsTriggeredByTemporalBrush(d3.event.selection, commitSeqXScale, bins, globalStartSeq);\r\n\r\n        d3.select(\"#commitBrush\").call(commitBrush.move, newSelection);\r\n        drawTemporalToCommitArrow();\r\n    });\r\n    commitBrush.on(\"end\", () => {\r\n        if (d3.event.selection === null) return;\r\n        let brushedSeqs = commitBrushFunc(d3.event.selection, commitSeqXScale);\r\n        let newSelection = brushedSeqs.map(d => xTemporalScale(parseTime(globalFilteredNodeList[d].commit.date)));\r\n\r\n        let brushG = d3.select(\"#temporalBrush\");\r\n        brushG.select(\".selection\").attr(\"x\", newSelection[0]).attr(\"width\", newSelection[1] - newSelection[0]);\r\n        brushG.select(\".handle--e\").attr(\"x\", newSelection[1] - brushHandleSize / 2);\r\n        brushG.select(\".handle--w\").attr(\"x\", newSelection[0] - brushHandleSize / 2);\r\n        ;\r\n        brushG._groups[0][0].__brush.selection[0][0] = newSelection[0];\r\n        brushG._groups[0][0].__brush.selection[1][0] = newSelection[1];\r\n        drawTemporalToCommitArrow();\r\n        handleTemporalLabel(newSelection, xTemporalScale);\r\n    });\r\n\r\n    navigationSvg.select(\"#commitBrush\").select(\".selection\")\r\n        .attr(\"asdf\", \"asdf\")\r\n        .style(\"fill\", AttributeColors[\"commit\"][0])\r\n        .style(\"fill-opacity\", 0.2)\r\n        ;\r\n    navigationSvg.select(\"#temporalBrush\").select(\".selection\")\r\n        .style(\"fill\", AttributeColors[\"commit\"][0])\r\n        .style(\"fill-opacity\", 0.2)\r\n        ;\r\n\r\n    // handle deco\r\n    d3.select(\"#navigationSvg\").selectAll(\".handle\")\r\n        .style(\"stroke\", d3.schemeCategory10[0])\r\n        .style(\"fill\", d3.schemeCategory10[0])\r\n        .style(\"fill-opacity\", 0.2)\r\n        ;\r\n    drawTemporalToCommitArrow();\r\n    drawCommitToClusterArrow(commitSeqXScale.range());\r\n    handleTemporalLabel(xTemporalScale.range(), xTemporalScale);\r\n    handleCommitLabel(commitSeqXScale.range(), commitSeqXScale, globalStartSeq);\r\n\r\n// console.log(\"function state,\", state, commitSeqXScale.range(), commitSeqXScale)\r\n\r\n    // state.setCommitBrush(commitBrush);\r\n    // state.setCommitSeqXScale(commitSeqXScale);\r\n\r\n    return [commitBrush, commitSeqXScale];\r\n}\r\n\r\nconst TemporalSelector = props => {\r\n// console.log(\"TemporalSelector render\");\r\n\r\n    const state = useSelector(state => ({\r\n        threshold: state.threshold,\r\n\r\n        titlePanelHeight: state.layout.titlePanelHeight,\r\n        temporalSelectorHeight: state.layout.temporalSelectorHeight,\r\n        temporalAreaHeight: state.layout.temporalAreaHeight,\r\n        width: state.layout.width,\r\n        leftPaneWidth: state.layout.leftPaneWidth,\r\n        clusterOverviewSliderWidth: state.layout.clusterOverviewSliderWidth,\r\n        clusterOverviewWidth: state.layout.clusterOverviewWidth,\r\n        arrowSvgHeight:30,      \r\n        \r\n        globalCommitSeqSelectionByTemporalFilter: state.globalCommitSeqSelectionByTemporalFilter,\r\n    }));\r\n    state.props = props;\r\n\r\n    const dispatch = useDispatch();\r\n    const udpateCommitsByTemporalBrush = (sel) => dispatch(actions.udpateCommitsByTemporalBrush(sel));\r\n    state.udpateCommitsByTemporalBrush = udpateCommitsByTemporalBrush;\r\n    const commitSeqSelectionByTemporalFilter = useSelector(state => state.commitSeqSelectionByTemporalFilter);\r\n\r\n    let isInitRef = useRef(true);\r\n    \r\n    useEffect( () => {\r\n        d3.select(\"#navigationSvg\").selectAll(\"g\").remove();\r\n        d3.select(\"#arrowSvg\").selectAll(\".rangeArrowLine\").remove();\r\n        // d3.select(\"#commitSeqAxis\").remove();\r\n\r\n        [commitBrush, commitSeqXScale] = navRender(props, state); //, state.commitSeqSelection);\r\n        udpateCommitsByTemporalBrush(state.globalCommitSeqSelectionByTemporalFilter);\r\n    }, [state.globalCommitSeqSelectionByTemporalFilter]);\r\n\r\n    useEffect( () => {\r\n        if (isInitRef.current) {\r\n            isInitRef.current = false;\r\n        } else {\r\nconsole.log(\"changed commitseqselection executed\", state, state.commitBrush, commitBrush, commitSeqXScale);\r\n            d3.select(\"#commitBrush\").call(commitBrush.move, commitSeqSelectionByTemporalFilter.map(d => commitSeqXScale(d) + commitSeqXScale.bandwidth()/2));\r\n        }\r\n    }, [commitSeqSelectionByTemporalFilter]);\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"flexVerticalContainer\" style={{ width: state.width }}>\r\n                <div id=\"temporalLabelsDiv\"\r\n                    style={{\r\n                        position: \"relative\",\r\n                        zIndex: 1,\r\n                        float: \"left\",\r\n                        height: 0,\r\n                    }}\r\n                >\r\n                    <div id=\"temporalStartDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalAreaHeight + 4 }}>\r\n                    </div>\r\n                    <div id=\"temporalEndDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalAreaHeight + 4 }}>\r\n                    </div>\r\n                </div>\r\n                <div id=\"commitLabelsDiv\"\r\n                    style={{\r\n                        position: \"relative\",\r\n                        zIndex: 1,\r\n                        float: \"left\",\r\n                        height: 0,\r\n                    }}\r\n                >\r\n                    <div id=\"commitStartDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalSelectorHeight  }}>\r\n                    </div>\r\n                    <div id=\"commitEndDiv\" className=\"rangeTooltip\" style={{ opacity: 1, top: state.temporalSelectorHeight  }}>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <svg id=\"navigationSvg\" width={state.width} height={state.temporalSelectorHeight} />\r\n                    <svg id=\"arrowSvg\" width={state.width} height={state.arrowSvgHeight} />\r\n                    <div id=\"releaseLabelDiv\" className=\"releaseLabelTooltip\" style={{ opacity: 0, }} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TemporalSelector;","import React, { useState, useEffect, useRef } from 'react';\r\nimport \"./ValueSlider.css\";\r\nimport Slider from '@material-ui/core/Slider';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport * as d3 from 'd3';\r\nimport { blueGrey } from '@material-ui/core/colors';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  icon: {\r\n    height: 35,\r\n    width: 35,\r\n    margin: theme.spacing(0),\r\n    color: \"skyblue\",\r\n  },\r\n  button: {\r\n      height:40,\r\n      width:40,\r\n      margin: theme.spacing(0),\r\n      padding: 0,\r\n      minWidth: 40\r\n  }\r\n}));\r\n\r\nconst PrettoSlider = withStyles({\r\n    root: {\r\n      color: \"#78909c\",\r\n      width: 100,\r\n      height: 100\r\n    },\r\n    thumb: {\r\n      height: 20,\r\n      width: 20,\r\n      backgroundColor: \"#fff\",\r\n      border: \"2px solid currentColor\",\r\n      marginTop: -8,\r\n      marginLeft: -12,\r\n      \"&:focus,&:hover,&$active\": {\r\n        boxShadow: \"inherit\"\r\n      }\r\n    },\r\n    active: {},\r\n    valueLabel: {\r\n      left: \"calc(-50%)\"\r\n    },\r\n    track: {\r\n      height: 20,\r\n      borderRadius: 7\r\n    },\r\n    rail: {\r\n      height: 20,\r\n      borderRadius: 5\r\n    },\r\n    mark: {\r\n      height: 1,\r\n      width: 8,\r\n    }\r\n  })(Slider);\r\n\r\n\r\nconst ValueSlider = props => {\r\n    // const classes = useStyles();\r\n    const [stepValue, setStepValue] = useState(props.defaultStepValue);\r\n    const [max, setMax] = useState(1);\r\n\r\n    const index = (props.index === undefined ? \"\" : props.index);\r\n    const divId = props.name + \"ValueSlider\" + index;\r\n\r\n    const maxStepCount = 50;\r\n    const thresholdList = useRef(undefined);\r\n\r\n    useEffect( () => {\r\n// console.log(\"valueslider useEffect called, th=\", props, thresholdList, (props.thresholdList !== undefined ? props.thresholdList.slice(0, maxStepCount).push(props.thresholdList.slice(-1)[0]) : \"aaa\"))\r\n      let arrayIndices = [];//FromMaxStep = d3.range([0, maxStepCount]);\r\n      let fi = 0, aIndex = 0;\r\n      while (aIndex < props.thresholdList.length - maxStepCount) {\r\n        arrayIndices.push(maxStepCount + aIndex);\r\n        aIndex += ++fi;\r\n      }\r\n// console.log(\"arrayIndices\", arrayIndices);\r\n\r\n      thresholdList.current = (props.thresholdList !== undefined && props.thresholdList.length > maxStepCount \r\n        ? props.thresholdList.slice(0, maxStepCount).concat(arrayIndices.map(d => props.thresholdList[d])).concat(props.thresholdList.slice(-1)[0])\r\n        : props.thresholdList);\r\n\r\n      if (thresholdList.current !== undefined && thresholdList.current.length > 0) {\r\n        let sv = thresholdList.current.indexOf(props.threshold);\r\n        if (sv < 0) {\r\n          for (let fi = 0; fi <= thresholdList.current.length - 2; fi++) {\r\n            if (props.threshold > thresholdList.current[fi] && props.threshold <= thresholdList.current[fi+1]) {\r\n// console.log(\"break, \", sv, props.threshold, thresholdList[fi], thresholdList[fi+1], fi)\r\n              sv = fi + 1;\r\n              break;\r\n            }\r\n            if (fi === thresholdList.current.length - 2) sv = fi;\r\n          }\r\n        }\r\n// console.log(\"--\", props.threshold, sv, thresholdList, );\r\n          \r\n        setStepValue(sv);\r\n        setMax(thresholdList.current.length - 1);\r\n      }\r\n\r\n      d3.select(\"#\" + divId).selectAll(\".MuiSlider-rail\").style(\"width\", \"10px\");\r\n      d3.select(\"#\" + divId).selectAll(\".MuiSlider-track\").style(\"width\", \"10px\");\r\n    }, [props.thresholdList]);\r\n\r\n// console.log(\"valueslider\", stepValue, max, props, props.defaultStepValue);\r\n    return (\r\n        <div id={divId} className=\"flexVerticalContainer\" style={{width:props.width}}>\r\n            <div align=\"center\"\r\n                style={{\"margin\":\"0px 10px 5px 0px\", \"height\":props.height - 30}}>\r\n                <PrettoSlider\r\n                    // defaultValue={props.threshold}\r\n                    value={stepValue}\r\n                    onChangeCommitted={(event, newValue) => {\r\n                        setStepValue(newValue);\r\n                        props.changeThreshold(thresholdList.current[newValue]);\r\n                    }}\r\n                    onChange={(event, newValue) => {\r\n                        setStepValue(newValue);\r\n                    }}\r\n                    // aria-labelledby=\"vertical-slider\"\r\n                    min={0}\r\n                    max={max}\r\n                    marks={max < 100 ? true : undefined}\r\n                    step={1}\r\n                    orientation=\"vertical\"\r\n                    valueLabelDisplay=\"auto\"\r\n                    // onChangeCommitted={(threshold) => props.changeThreshold(threshold)}\r\n                />\r\n            </div>\r\n            <div align=\"center\" style={{height:\"25px\", fontSize: \"9px\", fontWeight: \"600\"}}>CLSTR STEP</div>\r\n            {/* <div style={{height:\"50px\", margin: \"0px 10px 0px 5px\"}}>\r\n                <Button className={classes.button} variant=\"outlined\">\r\n                    <RefreshRoundedIcon className={classes.icon} onClick={() => props.changeThreshold(threshold)}/>\r\n                </Button>\r\n            </div> */}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ValueSlider;","\r\nexport class FileStructureAnalyzer {\r\n    constructor(rawData, hideFiles, file2Author) {\r\n\r\n\r\n\r\n        this.fileStructure = {\r\n            \"name\" : \"project\",\r\n            \"children\" : []\r\n        }\r\n        this.hideFiles = hideFiles;\r\n\r\n        // console.log(this.fileStructure);\r\n\r\n        //console.log(rawData);\r\n\r\n        console.log(file2Author);\r\n\r\n\r\n        for (let path in rawData) {\r\n\r\n            //console.log(this.fileStructure);\r\n\r\n            this.analyzePath(path, rawData[path], this.fileStructure[\"children\"], file2Author[path])\r\n\r\n        }\r\n        // console.log(this.fileStructure);\r\n\r\n        this.compressStructure(this.fileStructure);\r\n        this.updateAuthorInfo(this.fileStructure);\r\n\r\n        console.log(this.fileStructure);\r\n\r\n        // console.log(this.fileStructure);\r\n\r\n    }\r\n\r\n\r\n    analyzePath(path, score, root, author) {\r\n        let pathDirectories = path.split(\"/\");\r\n        let fileName = pathDirectories[pathDirectories.length - 1];\r\n        if(this.hideFiles.includes(fileName)) return;\r\n\r\n       // console.log(path, score, root, author);\r\n\r\n        //let size = root.length;\r\n        if (!path.includes(\"/\")) {\r\n            root.push({\r\n                \"name\" : path,\r\n                \"value\" : score, \r\n                \"authors\" : author\r\n            });\r\n            return;\r\n        }\r\n        let curDirectory = pathDirectories[0];\r\n        let subPath = path.substring(curDirectory.length + 1)\r\n\r\n        for (let child in root) {\r\n\r\n            // console.log(rochild, curDirectory, child[\"name\"] == curDirectory)\r\n\r\n            if(root[child][\"name\"] === curDirectory && root[child][\"children\"] !== undefined) {\r\n                this.analyzePath(subPath, score, root[child][\"children\"], author);\r\n                return;\r\n            }\r\n        }\r\n\r\n        root.push({\r\n            \"name\" : curDirectory,\r\n            \"children\" : []\r\n        });\r\n        \r\n        this.analyzePath(subPath, score, root[root.length - 1][\"children\"], author);\r\n    }\r\n\r\n    compressStructure(root) {\r\n\r\n        if(root[\"children\"] == undefined) return;\r\n\r\n        for(let childNum in root[\"children\"]) {\r\n            this.compressStructure(root[\"children\"][childNum]);\r\n        }\r\n\r\n        if(root[\"children\"].length == 1 && root[\"name\"] != \"project\") {\r\n            root[\"name\"] = root[\"name\"] + \"/\" + root[\"children\"][0][\"name\"];\r\n            if(root[\"children\"][0][\"value\"] == undefined)\r\n                root[\"children\"] = root[\"children\"][0][\"children\"];\r\n            else{\r\n                root[\"value\"] = root[\"children\"][0][\"value\"];\r\n                delete root.children;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n    updateAuthorInfo(root) {\r\n        if(root[\"children\"] == undefined) {\r\n            return root[\"authors\"];\r\n        }\r\n\r\n        let authors = {};\r\n        for(let childNum in root[\"children\"]) {\r\n            let childAuthors = this.updateAuthorInfo(root[\"children\"][childNum]);\r\n            for (let author in childAuthors) {\r\n                if(authors.hasOwnProperty(author)) {\r\n                    authors[author].insertions += childAuthors[author].insertions;\r\n                    authors[author].deletions += childAuthors[author].deletions;\r\n                    authors[author].count += childAuthors[author].count;\r\n                }\r\n                else {\r\n                    let dict = {};\r\n                    dict.insertions = childAuthors[author].insertions;\r\n                    dict.deletions = childAuthors[author].deletions;\r\n                    dict.count = childAuthors[author].count;\r\n                    authors[author] = dict;\r\n                }\r\n            }\r\n            \r\n        }\r\n\r\n        root[\"authors\"] = authors;\r\n\r\n        return authors;\r\n    }\r\n\r\n    getFileStructure() {\r\n        return this.fileStructure;\r\n    }\r\n}\r\n\r\nexport default FileStructureAnalyzer;","import React, { useEffect, useRef } from 'react'\r\nimport * as d3 from 'd3';\r\nimport FileStructureAnalyzer from './analyzer/FileStructureAnalyzer'\r\nimport { useSelector } from 'react-redux';\r\nimport { AttributeColors } from \"./ColorClasses\"\r\nimport Select from '@material-ui/core/Select'\r\n\r\nconst FileIcicleSummary = props => {\r\n\r\n    const { width, height, rawModLocData, rawInsertLocData, rawDeleteLocData, rawModNumData, file2Author, pageNum } = props;\r\n    const { summaryByLOC, hideFiles } = useSelector(state => state.summaryParameters);\r\n\r\n    console.log(file2Author);\r\n\r\n    let partition = data => {\r\n        const root = d3.hierarchy(data)\r\n            .sum(d => d.value)\r\n            .sort((a, b) => b.height - a.height || b.value - a.value);\r\n        return d3.partition()\r\n            .size([height, ((root.height + 1) * width / pageNum)])\r\n            (root);\r\n    }\r\n\r\n    let format = d3.format(\",d\")\r\n\r\n    function rectHeight(d) {\r\n        return (d.x1 - d.x0 - Math.min(1, (d.x1 - d.x0) / 2));\r\n    }\r\n    function labelVisible(d) {\r\n        return ((d.x1 - d.x0) > 16);\r\n    }\r\n\r\n    let focus = useRef();\r\n    let root = useRef();\r\n\r\n    let currentCLocMode = useRef(\"sum\");\r\n\r\n    useEffect(() => {\r\n        const svg = d3.select(\"#icicleSvg\");\r\n        svg.selectAll(\"g\").remove();\r\n\r\n        let fileAnalyzer;\r\n        // console.log(\"rawData\", rawModLocData, rawInsertLocData, rawDeleteLocData);\r\n\r\n        if (summaryByLOC) {\r\n            let rawModData;\r\n            switch(currentCLocMode.current) {\r\n                case \"sum\" : rawModData = rawModLocData; break;\r\n                case \"insertion\" : rawModData = rawInsertLocData; break;\r\n                case \"deletion\" : rawModData = rawDeleteLocData; break;\r\n            }\r\n            fileAnalyzer = new FileStructureAnalyzer(rawModData, hideFiles, file2Author);\r\n        }\r\n        else\r\n            fileAnalyzer = new FileStructureAnalyzer(rawModNumData, hideFiles, file2Author);\r\n\r\n        let data = fileAnalyzer.getFileStructure();\r\n\r\n        // function rectHeight(d) {\r\n        //     return (d.x1 - d.x0 - Math.min(1, (d.x1 - d.x0) / 2));\r\n        // }\r\n\r\n        function clicked(p) {\r\n            try {\r\n                focus.current = focus.current === p ? p = p.parent : p;\r\n\r\n                let widthScale;\r\n                let curHeight = focus.current.height + 1;\r\n                if (focus.current.data.name === \"project\") curHeight--;\r\n                if (curHeight < pageNum)\r\n                    widthScale = pageNum / curHeight;\r\n                else\r\n                    widthScale = 1;\r\n\r\n                let isRoot = false;\r\n                if (focus.current.data.name === \"project\")\r\n                    isRoot = true;\r\n                if (isRoot) {\r\n                    root.current.each(d => d.target = {\r\n                        x0: ((d.x0 - p.x0) / (p.x1 - p.x0) * height),\r\n                        x1: ((d.x1 - p.x0) / (p.x1 - p.x0) * height),\r\n                        y0: ((d.y0 - p.y0) - width / pageNum),\r\n                        y1: ((d.y1 - p.y0) - width / pageNum)\r\n                    });\r\n                }\r\n                else {\r\n                    root.current.each(d => d.target = {\r\n                        x0: ((d.x0 - p.x0) / (p.x1 - p.x0) * height),\r\n                        x1: ((d.x1 - p.x0) / (p.x1 - p.x0) * height),\r\n                        y0: (d.y0 - p.y0),\r\n                        y1: (d.y1 - p.y0)\r\n                    });\r\n                }\r\n                let cell = d3.selectAll(\".icicleTreeCells\");\r\n                let rect = d3.selectAll(\".icicleTreeRects\");\r\n                let text = d3.selectAll(\".icicleTreeTexts\");\r\n                let tspan = d3.selectAll(\".icicleTreeTspans\")\r\n\r\n\r\n                // console.log(widthScale);\r\n                const t = cell.transition().duration(750)\r\n                    .attr(\"transform\", d => `translate(${d.target.y0 * widthScale},${d.target.x0})`);\r\n\r\n                rect.transition(t).attr(\"height\", d => rectHeight(d.target))\r\n                    .attr(\"width\", d => (d.y1 - d.y0 - 1) * widthScale);\r\n                text.transition(t).attr(\"fill-opacity\", d => labelVisible(d.target) ? 1 : 0);\r\n                tspan.transition(t).attr(\"fill-opacity\", d => labelVisible(d.target) ? 0.7 : 0);\r\n            } catch (e) {\r\n                console.log(\"debugging\");\r\n            }\r\n        }\r\n\r\n        root.current = partition(data);\r\n        focus.current = root.current;\r\n        // console.log(focus);\r\n\r\n        let widthScale;\r\n        let curHeight = focus.current.height;\r\n        if (curHeight < pageNum)\r\n            widthScale = pageNum / curHeight;\r\n        else\r\n            widthScale = 1;\r\n\r\n        const cell = svg.selectAll(\"g\")\r\n            .data(root.current.descendants())\r\n            .join(\"g\")\r\n            .attr(\"class\", \"icicleTreeCells\")\r\n            .attr(\"transform\", d => `translate(${(d.y0 - width / pageNum) * widthScale},${d.x0})`)\r\n            .attr(\"id\", d => d.data.name);\r\n\r\n        const rect = cell.append(\"rect\")\r\n            .attr(\"width\", d => (d.y1 - d.y0 - 1) * widthScale)\r\n            .attr(\"height\", d => rectHeight(d))\r\n            .attr(\"class\", \"icicleTreeRects\")\r\n            .style(\"fill\", d => {\r\n                if (d.data.value !== undefined) return AttributeColors.file[3];\r\n                else return AttributeColors.dir[3];\r\n            })\r\n            .style(\"cursor\", \"pointer\")\r\n            .style(\"stroke-width\", \"0px\")\r\n            .on(\"click\", clicked)\r\n\r\n        const text = cell.append(\"text\")\r\n            .attr(\"class\", \"icicleTreeTexts\")\r\n            .style(\"user-select\", \"none\")\r\n            .attr(\"pointer-events\", \"none\")\r\n            .attr(\"x\", 4)\r\n            .attr(\"y\", 13)\r\n            .style(\"font-weight\", 400)\r\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 1 : 0)\r\n            .style(\"overflow\", \"visible\");\r\n\r\n        text.append(\"tspan\")\r\n            .text(d => {\r\n                if (d.data.children !== undefined)\r\n                    return d.data.name + \"/\";\r\n                else\r\n                    return d.data.name;\r\n            });\r\n\r\n        const tspan = text.append(\"tspan\")\r\n            .attr(\"class\", \"icicleTreeTspans\")\r\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 0.7 : 0)\r\n            .text(d => ` ${format(d.value)}`);\r\n\r\n        let title = cell.append(\"title\")\r\n\r\n        title.append(\"tspan\").text(d => {\r\n            if (d.data.children !== undefined)\r\n                return d.data.name + \"/\" + \"\\n\";\r\n            else\r\n                return d.data.name + \"\\n\";\r\n        })\r\n        title.append(\"tspan\").text(d => {\r\n            if (summaryByLOC) return `${format(d.value)}` + \" lines modified\\n\"\r\n            else return `${format(d.value)}` + \" times touched\\n\"\r\n        })\r\n\r\n        title.append(\"tspan\").text(d => {\r\n            let authors = d.data.authors;\r\n\r\n            let authorArray = [];\r\n\r\n            if(summaryByLOC) {\r\n                if(currentCLocMode.current == \"sum\") {\r\n                    for(let author in authors) \r\n                        authorArray.push([author, authors[author].insertions + authors[author].deletions]);\r\n                }\r\n                else if(currentCLocMode.current == \"insertion\") {\r\n                    for(let author in authors) \r\n                        authorArray.push([author, authors[author].insertions]);\r\n                }\r\n                else {  // if deletion\r\n                    for(let author in authors) \r\n                        authorArray.push([author, authors[author].deletions]);\r\n                }\r\n            }\r\n            else {\r\n                for(let author in authors) \r\n                    authorArray.push([author, authors[author].count]);\r\n            }\r\n\r\n\r\n            authorArray.sort((a, b) => b[1] - a[1]);\r\n\r\n            let message = \"  \";\r\n            authorArray.forEach(node => {\r\n                message = message + \"\\n  \" + node[0] + \" :: \" + node[1];\r\n            })\r\n            // console.log(message);\r\n\r\n            return \"Contributors:\" + message;\r\n        })\r\n    }, [\r\n        summaryByLOC, hideFiles, rawModLocData, rawModNumData, file2Author\r\n    ])\r\n\r\n    function updateLOCType(event) {\r\n        let rawData;\r\n        switch (event.target.value) {\r\n            case \"sum\": rawData = rawModLocData; break;\r\n            case \"insertion\": rawData = rawInsertLocData; break;\r\n            case \"deletion\": rawData = rawDeleteLocData; break;\r\n        }\r\n        \r\n        switch (event.target.value) {\r\n            case \"sum\": currentCLocMode.current = \"sum\"; break;\r\n            case \"insertion\": currentCLocMode.current = \"insertion\"; break;\r\n            case \"deletion\": currentCLocMode.current = \"deletion\"; break;\r\n        }\r\n\r\n        let fileAnalyzer = new FileStructureAnalyzer(rawData, hideFiles, file2Author);\r\n        let data = fileAnalyzer.getFileStructure();\r\n        root.current = partition(data);\r\n        focus.current = root.current;\r\n\r\n        let widthScale;\r\n        let curHeight = focus.current.height;\r\n        if (curHeight < pageNum)\r\n            widthScale = pageNum / curHeight;\r\n        else\r\n            widthScale = 1;\r\n\r\n\r\n        let rootData = root.current.descendants();\r\n\r\n        let cell = d3.selectAll(\".icicleTreeCells\")\r\n            .data(rootData)\r\n            .join();\r\n\r\n        const t = cell.transition()\r\n            .duration(750)\r\n            .attr(\"transform\", d => `translate(${(d.y0 - width / pageNum) * widthScale},${d.x0})`)\r\n            .attr(\"id\", d => d.data.name);\r\n\r\n        // console.log(rootData);\r\n        // console.log(cell.select(\"rect\"));\r\n\r\n        cell.select(\"rect\")\r\n            .transition()\r\n            .duration(750)\r\n            .attr(\"width\", d => (d.y1 - d.y0 - 1) * widthScale)\r\n            .attr(\"height\", d => {\r\n                return rectHeight(d)\r\n            })\r\n            .style(\"fill\", d => {\r\n                if (d.data.value !== undefined) return AttributeColors.file[3];\r\n                else return AttributeColors.dir[3];\r\n            })\r\n\r\n        let text = cell.select(\"text\")\r\n            .style(\"user-select\", \"none\")\r\n            .attr(\"pointer-events\", \"none\")\r\n            .attr(\"x\", 4)\r\n            .attr(\"y\", 13)\r\n            .style(\"font-weight\", 400)\r\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 1 : 0)\r\n            .style(\"overflow\", \"visible\");\r\n\r\n        text.selectAll(\"tspan\").remove();\r\n        text.append(\"tspan\")\r\n            .text(d => {\r\n                if (d.data.children !== undefined)\r\n                    return d.data.name + \"/\";\r\n                else\r\n                    return d.data.name;\r\n            });\r\n\r\n        text.append(\"tspan\")\r\n            .attr(\"class\", \"icicleTreeTspans\")\r\n            .attr(\"fill-opacity\", d => labelVisible(d) ? 0.7 : 0)\r\n            .text(d => ` ${format(d.value)}`);\r\n\r\n        cell.selectAll(\"title\").remove();\r\n\r\n        let title = cell.append(\"title\");\r\n\r\n        title.append(\"tspan\").text(d => {\r\n            if (d.data.children !== undefined)\r\n                return d.data.name + \"/\" + \"\\n\";\r\n            else\r\n                return d.data.name + \"\\n\";\r\n        });\r\n        title.append(\"tspan\").text(d => {\r\n            let str;\r\n            switch (event.target.value) {\r\n                case \"sum\": str = \" lines modified\\n\"; break;\r\n                case \"insertion\": str = \" lines inserted\\n\"; break;\r\n                case \"deletion\": str = \" lines deleted\\n\"; break;\r\n            }\r\n            return (`${format(d.value)}` + str);\r\n        });\r\n\r\n        title.append(\"tspan\").text(d => {\r\n            let authors = d.data.authors;\r\n\r\n            let authorArray = [];\r\n\r\n            if(summaryByLOC) {\r\n                if(currentCLocMode.current == \"sum\") {\r\n                    for(let author in authors) \r\n                        authorArray.push([author, authors[author].insertions + authors[author].deletions]);\r\n                }\r\n                else if(currentCLocMode.current == \"insertion\") {\r\n                    for(let author in authors) \r\n                        authorArray.push([author, authors[author].insertions]);\r\n                }\r\n                else {  // if deletion\r\n                    for(let author in authors) \r\n                        authorArray.push([author, authors[author].deletions]);\r\n                }\r\n            }\r\n            else {\r\n                for(let author in authors) \r\n                    authorArray.push([author, authors[author].count]);\r\n            }\r\n\r\n            authorArray.sort((a, b) => b[1] - a[1]);\r\n\r\n            let message = \"  \";\r\n            authorArray.forEach(node => {\r\n                message = message + \"\\n  \" + node[0] + \" :: \" + node[1];\r\n            })\r\n\r\n            return \"Contributors:\" + message;\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {summaryByLOC &&\r\n                <Select\r\n                    id={\"icicleTreeLocSelector\"}\r\n                    style={{ width: \"90px\", fontSize: \"12px\", height: \"12px\" }}\r\n                    onChange={updateLOCType}\r\n                    native\r\n                >\r\n                    <option value=\"sum\">Sum</option>\r\n                    <option value=\"insertion\">Insertion</option>\r\n                    <option value=\"deletion\">Deletion</option>\r\n                </Select>\r\n            }\r\n            <svg\r\n                id=\"icicleSvg\"\r\n                width={width}\r\n                height={summaryByLOC ? height - 18 : height}\r\n            ></svg>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FileIcicleSummary;","import React, { useEffect, useRef, Fragment, } from 'react';\r\nimport { Table, TableRow, TableCell, TableBody, Hidden } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport * as d3 from 'd3';\r\nimport { getScoreColor, AttributeColors, BranchColors } from './ColorClasses';\r\nimport { PreferenceList, ClusterData, DataTypeByNameMap, BranchTypes } from './analyzer/GithruClasses';\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport FileIcicleSummary from './FileIcicleSummary';\r\nimport WordCloud from 'wordcloud';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  table: {\r\n    padding: 1,\r\n  },\r\n  tableCell: {\r\n    fontSize: \"12px\",\r\n    paddingLeft: 2,\r\n    paddingRight: 1,\r\n    paddingTop: 2,\r\n    paddingBottom: 2,\r\n    verticalAlign: \"text-top\",\r\n    minWidth: \"40px\"\r\n  },\r\n  nodeList: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    maxHeight: \"450px\",\r\n    maxWidth: \"100%\",\r\n    overflowY: \"auto\",\r\n  },\r\n  bar: {\r\n    padding: 0,\r\n  },\r\n  div: {\r\n    font: \"14px bold\"\r\n  },\r\n  vseparator: {\r\n    width: \"100%\",\r\n    height: \"10px\"\r\n  },\r\n}));\r\n\r\n\r\nconst hover = (event) => {\r\n  event.target.style.textDecoration = \"underline\";\r\n  event.target.style.fontWeight = \"bold\";\r\n  // event.target.style.color = \"red\";\r\n  // event.target.style.fill = \"red\";\r\n}\r\nconst hout = event => {\r\n  event.target.style.textDecoration = \"\";\r\n  event.target.style.color = \"\";\r\n  event.target.style.fill = \"\";\r\n  event.target.style.fontWeight = \"400\";\r\n}\r\n\r\nfunction Cause(props) {\r\n  const { cluster, prefMap, gitAnalyzer, width } = props;\r\n\r\n  if (cluster.id === -1) return \"\";\r\n\r\n  const nodeList = cluster.nodeList;\r\n  if (nodeList.length > 1) {\r\n    let scoreSumMap = d3.range(nodeList.length - 1).reduce((prev, cur, i) => {\r\n      let scoreMap = gitAnalyzer.getScoreByPreferences(nodeList[cur], nodeList[cur + 1], prefMap);\r\n      // let scoreMap = scoreData[nodeList[cur].commit.no][nodeList[cur + 1].commit.no];\r\n      PreferenceList.forEach(prefName => {\r\n        let normedScore = +scoreMap[prefName] * prefMap[prefName];\r\n        if (i === 0) prev[prefName] = normedScore;\r\n        else prev[prefName] += normedScore;\r\n      });\r\n      return prev;\r\n    }, {});\r\n\r\n    let scoreSumList = Object.entries(scoreSumMap).map(d => [d[0], d[1] / (nodeList.length - 1)]);\r\n    scoreSumList.sort((a, b) => b[1] - a[1]);\r\n    let sum = scoreSumList.reduce((prev, cur) => { prev += cur[1]; return prev }, 0);\r\n    let pos = 0;\r\n\r\n    return (\r\n      <div id=\"causeDiv\"\r\n        className=\"flexContainer\"\r\n        height=\"20px\" width=\"100%\">\r\n        {scoreSumList.map((d, i) => {\r\n          let xWidth = width * d[1] / sum;\r\n          // let xPos = pos;\r\n          pos += xWidth;\r\n\r\n          return (\r\n            <div\r\n              key={i}\r\n              height=\"20px\"\r\n              style={{\r\n                fontSize: \"12px\",\r\n                width: xWidth,\r\n                background: getScoreColor(d[0], 3),\r\n                strokeWidth: 0,\r\n                overflow: \"hidden\",\r\n              }}\r\n            >\r\n              {d[0]}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  } else {\r\n    return (<div></div>);\r\n  }\r\n}\r\n\r\nconst BarChartSummary = (props) => {\r\n  const ref = useRef();\r\n  const yAxisHeight = 20;\r\n  // const itemHeight = 20;\r\n  const nameMargin = 2;\r\n\r\n  const { dataNameList, clusterData, width, height } = props;\r\n  const totalCount = clusterData.cluster.nodeCount;\r\n\r\n  const numByDataName = { \"authors\": 15, \"commitTypes\": 4, \"keywords\": 10 };\r\n\r\n  let dataList = dataNameList.map(dataName => {\r\n    let data = Object.entries(clusterData[dataName]);\r\n\r\n    // console.log(dataName, data)\r\n    if (dataName != \"keywords\") data.sort((a, b) => b[1] - a[1]);\r\n    else data.sort((a, b) => b[1][1] - a[1][1]);\r\n\r\n    return data.filter((d, i) => i < numByDataName[dataName]).map(d => {\r\n      if (dataName !== \"keywords\") d[1] = d[1] / totalCount;\r\n      else d[1] = d[1][0] / totalCount;\r\n      return d.concat(dataName)\r\n    }\r\n    );\r\n  });\r\n  // console.log(\"dataList\", dataList)\r\n  let authorList = dataList[0];\r\n  let commitTypeList = dataList[1];\r\n  let keywordList = dataList[2];\r\n\r\n  keywordList = keywordList.sort((a, b) => b[1] - a[1]);\r\n  console.log(keywordList);\r\n\r\n  function processKey(word) {\r\n    if (word === undefined) return word;\r\n    return word.replace(/[`~! @#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\r\n    // return replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(word, \".\", \"\"), \">\", \"\"), \"=\", \"\"), \"}\", \"\"), \"{\", \"\"), \" \", \"\"), \"/\", \"\");\r\n}\r\n\r\n\r\n\r\n  let authorRatio = 0.6;\r\n  let commitTypeRatio = 0.2;\r\n  \r\n  // let sortedAuthorList = dataList.reduce((prev, cur) => prev.concat(cur), []);\r\n  // console.log(sortedAuthorList)\r\n  let xScaleDomainMax = 1;\r\n  let xScale = d3.scaleLinear().domain([0, xScaleDomainMax]).range([0, width - nameMargin]);\r\n  let yAuthorScale = d3.scaleBand().domain(authorList.map(d => d[0])).range([0, (height - yAxisHeight) * authorRatio * 0.95]).paddingInner(0.1).paddingOuter(0.1);\r\n  let yCommitTypeScale = d3.scaleBand().domain(commitTypeList.map(d => d[0])).range([0, (height - yAxisHeight) * commitTypeRatio * 0.95]).paddingInner(0.1).paddingOuter(0.1);\r\n\r\n  useEffect(() => {\r\n    const svgAuthor = d3.select(\"#barStatAuthor\").attr(\"transform\", \"translate(0,\" + (0) + \")\");\r\n    const svgCommitType = d3.select(\"#barStatCommitType\").attr(\"transform\", \"translate(0,\" + (0) + \")\");\r\n    \r\n    svgAuthor.selectAll(\"g\").remove();\r\n    svgCommitType.selectAll(\"g\").remove();\r\n\r\n    const yAuthorAxis = d3.axisLeft(yAuthorScale).ticks(0).tickSizeInner(0).tickSizeOuter(0);\r\n    const yCommitTypeAxis = d3.axisLeft(yCommitTypeScale).ticks(0).tickSizeInner(0).tickSizeOuter(0);\r\n\r\n    const xAxis = d3.axisBottom(xScale).ticks(5).tickFormat(d3.format(\".0%\")).tickSizeOuter(0);\r\n    let textSize = 15;\r\n\r\n    // auhor's detailed chart bar\r\n    let rectsAuthor = svgAuthor.selectAll(\"g\")\r\n      .data(authorList)\r\n      .enter()\r\n      .append(\"g\")\r\n      ;\r\n    rectsAuthor.append(\"rect\")\r\n      .attr(\"x\", nameMargin)\r\n      .attr(\"y\", d => yAuthorScale(d[0]))\r\n      .attr(\"width\", d => xScale(d[1]))\r\n      .attr(\"height\", yAuthorScale.bandwidth())\r\n      .style(\"stroke-width\", 0)\r\n      .style(\"fill\", d => AttributeColors[DataTypeByNameMap[d[2]]][1])\r\n      .style(\"fill-opacity\", 0.3)\r\n      ;\r\n    rectsAuthor.append(\"text\")\r\n      .attr(\"x\", nameMargin + 1)\r\n      .attr(\"y\", d => (yAuthorScale(d[0]) + yAuthorScale.bandwidth() - (yAuthorScale.bandwidth() - textSize) / 2))\r\n      .style(\"font-size\", \"12px\")\r\n      .style(\"font-weight\", \"400\")\r\n      .style(\"cursor\", \"pointer\")\r\n      .text(d => GitAnalyzer.getTextValue(d[2], d[0]))\r\n      .on(\"mouseover\", () => hover(d3.event))\r\n      .on(\"mouseout\", () => hout(d3.event))\r\n      .on(\"click\", d => props.registerFavoriteFragment([d[2], d[0]]));\r\n    ;\r\n\r\n    let xAxisRenderAuthor = svgAuthor.append(\"g\")\r\n      .attr(\"transform\", \"translate(\" + nameMargin + \",\" + (height - yAxisHeight) * (authorRatio * 0.95) + \")\")\r\n      .call(xAxis);\r\n    xAxisRenderAuthor.selectAll(\"text\").style(\"font-size\", \"10px\");\r\n    xAxisRenderAuthor.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\r\n      ;\r\n    let yAxisRenderAuthor = svgAuthor.append(\"g\")\r\n      .attr(\"transform\", \"translate(1, 0)\")\r\n      .call(yAuthorAxis);\r\n    yAxisRenderAuthor.selectAll(\"text\").style(\"font-size\", \"10px\");\r\n    yAxisRenderAuthor.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\r\n\r\n    // commit type's detailed char bar (TODO)\r\n\r\n\r\n    let rectsCommitType = svgCommitType.selectAll(\"g\")\r\n      .data(commitTypeList)\r\n      .enter()\r\n      .append(\"g\")\r\n      ;\r\n    rectsCommitType.append(\"rect\")\r\n      .attr(\"x\", nameMargin)\r\n      .attr(\"y\", d => yCommitTypeScale(d[0]))\r\n      .attr(\"width\", d => xScale(d[1]))\r\n      .attr(\"height\", yCommitTypeScale.bandwidth())\r\n      .style(\"stroke-width\", 0)\r\n      .style(\"fill\", d => AttributeColors[DataTypeByNameMap[d[2]]][1])\r\n      .style(\"fill-opacity\", 0.3)\r\n      ;\r\n    rectsCommitType.append(\"text\")\r\n      .attr(\"x\", nameMargin + 1)\r\n      .attr(\"y\", d => (yCommitTypeScale(d[0]) + yCommitTypeScale.bandwidth() - (yCommitTypeScale.bandwidth() - textSize) / 2))\r\n      .style(\"font-size\", \"12px\")\r\n      .style(\"font-weight\", \"400\")\r\n      .style(\"cursor\", \"pointer\")\r\n      .text(d => GitAnalyzer.getTextValue(d[2], d[0]))\r\n      .on(\"mouseover\", () => hover(d3.event))\r\n      .on(\"mouseout\", () => hout(d3.event))\r\n      .on(\"click\", d => props.registerFavoriteFragment([d[2], d[0]]));\r\n    ;\r\n\r\n    let xAxisRenderCommitType = svgCommitType.append(\"g\")\r\n      .attr(\"transform\", \"translate(\" + nameMargin + \",\" + (height - yAxisHeight) * (commitTypeRatio * 0.95) + \")\")\r\n      .call(xAxis);\r\n    xAxisRenderCommitType.selectAll(\"text\").style(\"font-size\", \"10px\");\r\n    xAxisRenderCommitType.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\r\n      ;\r\n    let yAxisRenderCommitType = svgCommitType.append(\"g\")\r\n      .attr(\"transform\", \"translate(1, 0)\")\r\n      .call(yCommitTypeAxis);\r\n    yAxisRenderCommitType.selectAll(\"text\").style(\"font-size\", \"10px\");\r\n    yAxisRenderCommitType.selectAll(\".domain\").style(\"stroke\", \"#AAAAAA\")\r\n\r\n    let max = 5;\r\n    let min = 3;\r\n\r\n    let aMin = keywordList[0][1];\r\n    let aMax = keywordList[0][1];\r\n\r\n    keywordList.forEach(node => {\r\n        if(node[1] > aMax) aMax = node[1];\r\n        if(node[1] < aMin) aMin = node[1];\r\n    })\r\n\r\n    keywordList.forEach(node => {\r\n        node[1] = ((node[1] - aMin) / (aMax - aMin)) * (max - min) + min;\r\n    })\r\n\r\n    console.log(AttributeColors.keyword[2])\r\n\r\n    WordCloud(document.getElementById(\"keywordsDetailedList\"), {\r\n      list: keywordList,\r\n      wait: 0,\r\n      rotateRatio: 0,\r\n      weightFactor: 3,\r\n      color: AttributeColors.keyword[1],\r\n      classes: function(word) {\r\n          return \"wordCloud wordCloud_\" + processKey(word); \r\n      },\r\n      hover: function(item, dimension, event) {\r\n          if(item !== undefined) {\r\n              d3.selectAll(\".wordCloud\")\r\n                .style(\"font-weight\", \"300\")\r\n                .style(\"opacity\", 0.5);\r\n              d3.selectAll(\".wordCloud_\" + processKey(item[0]))\r\n                .style(\"font-weight\", \"900\")\r\n                .style(\"opacity\", 1);\r\n          }\r\n      }\r\n\r\n    \r\n  });\r\n  d3.select(\"#keywordsDetailedList\")\r\n        .on(\"mouseleave\", function(d) {\r\n            d3.selectAll(\".wordCloud\")\r\n            .style(\"font-weight\", 300)\r\n            .style(\"opacity\", 1);\r\n        })\r\n        \r\n  \r\n\r\n  }, [clusterData]);\r\n\r\n  return (\r\n    // <div style={{\r\n    //overflowY:\"auto\", \r\n    // height:summaryHeight}}>\r\n    <div>\r\n      <div id=\"keywordsDetailedList\" style={{position: \"relative\", top: \"-40px\", width: \"151px\", height: \"120px\"}}>\r\n      </div>\r\n      <div className=\"flexVerticalContainer\" style={{ width: \"100%\", position: \"relative\", top: \"-40px\"}}>\r\n      {/* <div style={{font:\"14px bold\"}}>{dataName}</div> */}\r\n      <svg id={\"barStatAuthor\"} width=\"100%\" ref={ref} height={height * authorRatio }></svg>\r\n      <svg id={\"barStatCommitType\"} width=\"100%\" ref={ref} height={height * authorRatio}></svg>\r\n      </div>\r\n    \r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nconst MessagePrint = (props) => {\r\n  let message = (props.message !== undefined && props.message !== null ? props.message : \"\");\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexWrap: \"wrap\", fontSize: \"10px\", marginLeft:props.marginLeft }}>\r\n      {message.trim().split(\"\\n\").map( (line, li) => \r\n        <Fragment key={li}>\r\n          {line.trim() !== \"\" && line.trim().split(\" \").map((word, i) => (\r\n            <div key={i} style={{ display: \"inline\", cursor: \"pointer\", }}>\r\n              <span\r\n                onMouseOver={hover}\r\n                onMouseOut={hout}\r\n                onClick={() => props.registerFavoriteFragment([\"keywords\", word])}\r\n              >\r\n                {word}\r\n              </span>\r\n              &nbsp;\r\n            </div>\r\n          ))}\r\n          {line.trim() !== \"\" && <br />}\r\n        </Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst NodeDetail = (props) => {\r\n  const classes = useStyles();\r\n  const { node, parentNode, registerFavoriteFragment, gitAnalyzer } = props;\r\n  // console.log(\"NodeDetail\", props);\r\n  const isParent = (parentNode === undefined && node.mergeNodes.length > 0);\r\n  const isChild = (parentNode !== undefined);\r\n  const className = (isChild ? \"commitChildRow\" + parentNode.seq : \"commitRow\" + node.seq);\r\n\r\n  const toggleRowShow = () => {\r\n    let childClass = \".\" + \"commitChildRow\" + node.seq;\r\n    // console.log(\"togrowshow\", d3.select(childClass).style(\"visibility\"));\r\n    let visible = d3.select(childClass).style(\"visibility\") === \"visible\";\r\n\r\n    d3.selectAll(childClass).style(\"visibility\", (visible ? \"collapse\" : \"\"));\r\n  }\r\n\r\n  return (\r\n    <TableRow\r\n      className={\"flexContainer \" + className}\r\n      style={{ visibility: (isChild ? \"collapse\" : \"\") }}\r\n    >\r\n      {props.useHeuristicMerge && (\r\n        <TableCell className={classes.tableCell} style={{ width: \"40px\", cursor: \"pointer\" }}>\r\n          <div align=\"center\"\r\n            onClick={isParent ? toggleRowShow : undefined}\r\n          // onClick = {parentNode !== undefined ? () => toggleRowShow : undefined}\r\n          >\r\n            {isChild ? \"+\" :\r\n              (isParent &&\r\n                <u>CM({node.mergeNodes.length})</u>\r\n              )\r\n            }\r\n          </div>\r\n          {/* <div>{(hasMergeNodes ? \"M(\" + node.mergeNodes.length + \")\" : (isMergeNode ? \"⎿\" : \"\"))}</div> */}\r\n        </TableCell>\r\n      )}\r\n      {!props.useHeuristicMerge && (\r\n        <TableCell className={classes.tableCell} style={{ width: \"40px\", }}>\r\n          <div align=\"center\">\r\n            {node.isMergeTraversed && node.mergedToNode !== undefined &&\r\n              <Fragment>\r\n                CMed \r\n                <br />\r\n                <span style={{fontSize: \"8px\"}}>({node.mergedToNode.id.substring(0, 7)})</span>\r\n              </Fragment>\r\n            }\r\n          </div>\r\n          {/* <div>{(hasMergeNodes ? \"M(\" + node.mergeNodes.length + \")\" : (isMergeNode ? \"⎿\" : \"\"))}</div> */}\r\n        </TableCell>\r\n      )}\r\n      <TableCell className={classes.tableCell}>\r\n        <div\r\n          style={{ width: \"55px\", fontSize: \"10px\", cursor: \"pointer\" }}\r\n          onMouseOver={hover}\r\n          onMouseOut={hout}\r\n          onClick={() => registerFavoriteFragment([\"keywords\", node.commit.id.substring(0, 6)])}\r\n        >#{node.commit.id.substring(0, 6)}</div>\r\n      </TableCell>\r\n      <TableCell className={classes.tableCell}>\r\n        <div\r\n          style={{ width: \"55px\", fontSize: \"10px\" }}\r\n          // onMouseOver={hover}\r\n          // onMouseOut={hout}\r\n        // onClick={() => registerFavoriteFragment([\"date\", node.commit.date])}\r\n        >{GitAnalyzer.getTextValue(\"date\", GitAnalyzer.trimYYYYMMDD(node.commit.date)).substring(2, 10)}</div>\r\n      </TableCell>\r\n      <TableCell className={classes.tableCell} style={{cursor: \"pointer\"}}>\r\n        <div\r\n          style={{}}\r\n          onMouseOver={hover}\r\n          onMouseOut={hout}\r\n          onClick={() => registerFavoriteFragment([\"authors\", node.commit.author])}\r\n        >\r\n          {/* {GitAnalyzer.getTextValue(\"authors\", node.commit.author)} */}\r\n          {GitAnalyzer.getTextValue(\"authors#2\", node.commit.author)}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell className={classes.tableCell} >\r\n        <div\r\n          style={{ width: \"30px\", fontSize: \"10px\", cursor: \"pointer\" }}\r\n          onMouseOver={hover}\r\n          onMouseOut={hout}\r\n          onClick={() => registerFavoriteFragment([\"commitTypes\", node.commit.commitType])}\r\n        >{GitAnalyzer.getTextValue(\"commitTypes\", node.commit.commitType).substring(0, 3)}</div>\r\n      </TableCell>\r\n      <TableCell className={classes.tableCell}>\r\n        <div className=\"flexVerticalContainer\">\r\n          <MessagePrint message={node.commit.message} registerFavoriteFragment={registerFavoriteFragment} />\r\n          {node.pullRequestHeads.map((prNum, i) => {\r\n            \r\n            let {message, body, state, merged} = gitAnalyzer.pullMapByNumber[prNum];\r\n            let closed = (state === \"closed\");\r\n            let type;\r\n\r\n            if (merged) {\r\n                type = BranchTypes.PR_MERGED;\r\n            } else if (closed) {\r\n                type = BranchTypes.PR_CLOSED;\r\n            } else {\r\n                type = BranchTypes.PR_OPEN;\r\n            }\r\n            \r\n            return (\r\n              <React.Fragment key={i}>\r\n                <div style={{fontWeight:\"900\", color: BranchColors[type] }}>[Pull Request #{prNum}] - {type.substring(3, type.length)}</div>\r\n                {message !== undefined && message !== null && message.trim() !== \"\" && \r\n                  <MessagePrint marginLeft={10} message={message} registerFavoriteFragment={registerFavoriteFragment}/>\r\n                }\r\n                {body !== undefined && body !== null && body.trim() !== \"\" && \r\n                  <MessagePrint marginLeft={10} message={body} registerFavoriteFragment={registerFavoriteFragment}/>\r\n                }\r\n              </React.Fragment>\r\n            );\r\n          })}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell className={classes.tableCell} >\r\n        <div\r\n          style={{ width: \"80px\", wordBreak: \"break-word\", }}\r\n        // onMouseOver={hover}\r\n        // onMouseOut={hout}\r\n        >\r\n          {node.commit.tags !== undefined && node.commit.tags.length > 0 && GitAnalyzer.getTextValue(\"tags\", node.commit.tags.join(\", \"))}\r\n          {node.commit.tags !== undefined && node.commit.tags.length > 0 && <br />}\r\n          {node.commit.branches !== undefined && GitAnalyzer.getTextValue(\"branches\", node.commit.branches.map(b => (b.startsWith(\"origin/\") ? b.split(\"origin/\")[1] : b)).join(\", \"))}\r\n        </div>\r\n      </TableCell>\r\n      {/* <TableCell className={classes.tableCell} style={{ width: \"50px\" }}>\r\n        <div\r\n          onMouseOver={hover}\r\n          onMouseOut={hout}\r\n        >{node.commit.branches !== undefined && GitAnalyzer.getTextValue(\"branches\", node.commit.branches.join(\", \"))}</div>\r\n      </TableCell> */}\r\n    </TableRow>\r\n  )\r\n}\r\n\r\nconst NodeDetailList = (props) => {\r\n  const classes = useStyles();\r\n  const { nodeList, gitAnalyzer, } = props;\r\n\r\n  return (\r\n    <Table size=\"small\" className={classes.table}>\r\n      <TableBody>\r\n        {nodeList.map((node, i) => {\r\n          return (\r\n            <React.Fragment key={node.id}>\r\n              <NodeDetail\r\n                node={node}\r\n                gitAnalyzer={gitAnalyzer}\r\n                registerFavoriteFragment={props.registerFavoriteFragment}\r\n                useHeuristicMerge={props.useHeuristicMerge}\r\n              />\r\n              {node.mergeNodes.map((mn, fi) => (\r\n                <NodeDetail\r\n                  gitAnalyzer={gitAnalyzer}\r\n                  parentNode={node}\r\n                  node={mn}\r\n                  key={fi}\r\n                  registerFavoriteFragment={props.registerFavoriteFragment}\r\n                  useHeuristicMerge={props.useHeuristicMerge}\r\n                />\r\n              ))}\r\n            </React.Fragment>\r\n          );\r\n        })}\r\n      </TableBody>\r\n    </Table>\r\n  );\r\n}\r\n\r\n\r\n\r\n///////////////////////////////////////\r\n// DEFAULT HOOK\r\n///////////////////////////////////////\r\nconst GroupSummary = props => {\r\n  const classes = useStyles();\r\n  const { selectedClusterNode, width, gitAnalyzer, arrowStartX, arrowWidth, registerFavoriteFragment } = props;\r\n  //const clusterData = new ClusterData(selectedClusterNode.cluster, gitAnalyzer.corpusData);\r\n  const clusterData = selectedClusterNode.clusterData;\r\n  const { cluster } = clusterData;\r\n  const { nodeList } = cluster;\r\n  const marginLeft = 10;\r\n  // const width = props.width - marginLeft;\r\n  const height = 400;\r\n  const barChartWidth = 150;\r\n  const fileSummaryWidth = 400;\r\n  const rightWidth = width - barChartWidth - fileSummaryWidth;\r\n  const arrowHeight = 20;\r\n  const showNameList = [\"authors\", \"commitTypes\", \"keywords\",];\r\n\r\n  // console.log(\"groupsummary rerender\", clusterData)\r\n  return (\r\n    <div className=\"flexVerticalContainer\">\r\n      <div id=\"GroupSummaryArrowAreaDiv\"\r\n        style={{ height: arrowHeight + \"px\", width: \"100%\" }}>\r\n        <svg\r\n          id={\"GroupSummaryArrowAreaSvg\"}\r\n          className=\"branchSummaryArrowArea\"\r\n          style={{\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            height: arrowHeight + \"px\",\r\n            pointerEvents: \"none\"\r\n          }}\r\n        >\r\n          <line\r\n            // className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\r\n            x1={arrowStartX}\r\n            x2={0}\r\n            y1={0}\r\n            y2={arrowHeight}\r\n            style={{\r\n              strokeWidth: 1,\r\n              stroke: selectedClusterNode.color,\r\n              strokeOpacity: 1\r\n            }}\r\n          />\r\n          <line\r\n            // className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\r\n            x1={arrowStartX + arrowWidth}\r\n            x2={width}\r\n            y1={0}\r\n            y2={arrowHeight}\r\n            style={{\r\n              strokeWidth: 1,\r\n              stroke: selectedClusterNode.color,\r\n              strokeOpacity: 1\r\n            }}\r\n          />\r\n        </svg>\r\n      </div>\r\n      <div\r\n        id=\"GroupSummaryTitle\"\r\n        className=\"flexVerticalContainer\"\r\n        style={{ width: width }}\r\n      >\r\n        <div className={classes.div + \" flexContainer\"}>\r\n          <div style={{ width: \"60px\" }}>CAUSE: &nbsp;</div>\r\n          <Cause\r\n            cluster={cluster}\r\n            width={340}\r\n            // scoreData={gitAnalyzer.scoreData}\r\n            prefMap={cluster.pref}\r\n            gitAnalyzer={gitAnalyzer}\r\n          />\r\n        </div>\r\n        <div className={classes.div + \" flexContainer\"}>\r\n          <div style={{ width: \"60px\" }}>RANGE: &nbsp;</div>\r\n          <div>\r\n            {GitAnalyzer.trimYYYYMMDD(nodeList[0].commit.date).substring(2, 10)}(#{nodeList[0].commit.id.substring(0, 6)})\r\n            ~ &nbsp;\r\n          {GitAnalyzer.trimYYYYMMDD(nodeList.slice(-1)[0].commit.date).substring(2, 10)}(#{nodeList.slice(-1)[0].commit.id.substring(0, 6)})\r\n          , {cluster.nodeCount} commits, {cluster.locStat.clocSum} CLOC\r\n          </div>\r\n        </div>\r\n        <div className={classes.div + \" flexContainer\"}>\r\n          <div>\r\n            {cluster.nodeCount} COMMITS, {cluster.locStat.clocSum} CLOC\r\n          </div>\r\n        </div>\r\n        <div style={{ height: \"2px\" }} />\r\n      </div>\r\n      <div id=\"GroupSummaryDiv\"\r\n        className=\"flexContainer\"\r\n        style={{ width: width }}>\r\n        {/* style={{width:props.width-marginLeft, marginLeft:marginLeft + \"px\"}}> */}\r\n        {/* <div>FOCUS SELECTED Cluster Context (ⓒx{nodeList.length})</div> */}\r\n        <div className=\"flexVerticalContainer\" style={{ width: fileSummaryWidth + \"px\" }}>\r\n          <div id=\"groupFileSummaryDiv\">\r\n            <FileIcicleSummary\r\n              width={fileSummaryWidth}\r\n              height={height}\r\n              rawModLocData={clusterData.clocByFiles}\r\n              rawInsertLocData={clusterData.insertionByFiles}\r\n              rawDeleteLocData={clusterData.deletionByFiles}\r\n              rawModNumData={clusterData.touchCountByFiles}\r\n              file2Author={clusterData.fileToAuthor}\r\n              pageNum={5}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div name=\"nodeList\" className={classes.nodeList} style={{\r\n          width: rightWidth + \"px\",\r\n          marginLeft: marginLeft,\r\n          height: height\r\n        }}>\r\n          <NodeDetailList\r\n            gitAnalyzer={gitAnalyzer}\r\n            nodeList={nodeList}\r\n            registerFavoriteFragment={registerFavoriteFragment}\r\n            useHeuristicMerge={props.useHeuristicMerge}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flexContainer\" style={{\r\n          width: barChartWidth + \"px\",\r\n          // flexWrap: \"wrap\",\r\n          marginLeft: \"5px\",\r\n          marginRight: \"5px\"\r\n        }}>\r\n          {/* {showNameList.map((dataName, i) => ( */}\r\n          <BarChartSummary\r\n            // key={i}\r\n            dataNameList={showNameList}\r\n            clusterData={clusterData}\r\n            width={barChartWidth - 10}\r\n            height={height}\r\n            registerFavoriteFragment={registerFavoriteFragment}\r\n          />\r\n          {/* ))} */}\r\n        </div>\r\n      </div>\r\n      <div style={{ height: \"50px\" }}></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default GroupSummary;","import * as d3 from 'd3';\r\nimport React, { useLayoutEffect, useRef, useState, Fragment } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClusterBlock, ClusterNode, ClusterData, AttrsAbbreviationMap, DataTypeByNameMap, LOCStat } from \"./analyzer/GithruClasses\";\r\nimport { AttributeColors } from './ColorClasses';\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport GroupSummary from './GroupSummary';\r\nimport * as actions from '../modules';\r\n\r\n\r\nconst branchSummaryValueRectMouseover = (d, color, rectMargin) => {\r\n// console.log(\"branchSummaryValueRectMouseover\", d);\r\n    if (d === undefined) return;\r\n\r\n    let sameValueElements = d3.selectAll(\".branchSummaryValueRect\")\r\n        // .filter(selection => (selection !== undefined && d[0] === selection[0] && d[1] === selection[1]));\r\n        .filter(selection => {return (selection.data !== undefined && d[0] === selection.data[0] && d[1] === selection.data[1]);})\r\n        .each( function() {\r\n            let newColor = d3.select(this).attr(\"highlight-color\");\r\n            d3.select(this)\r\n                .style(\"font-weight\", \"bold\")\r\n                .style(\"background-color\", newColor);\r\n            d3.select(this).select(\"span\").style(\"background\", newColor);\r\n        });\r\n\r\n    // sameValueElements.style(\"opacity\", \"1\");\r\n    // sameValueElements.style(\"border\", \"2px blue solid\");\r\n    // sameValueElements.style(\"font-weight\", \"bold\");\r\n    sameValueElements.style(\"font-weight\", \"bold\")\r\n    // sameValueElements.style(\"border\", \"2px blue solid\")\r\n    sameValueElements.style(\"opacity\", 1.0)\r\n// console.log(\"samevalue\", sameValueElements);\r\n\r\n    sameValueElements.each(function () {\r\n        let [clusterId, valueId] = d3.select(this).attr(\"id\").split(\"_\").slice(1, 3);    \r\n        d3.select(\"#branchSummaryClusterRect_\" + clusterId).style(\"border\", rectMargin + \"px \" + color + \" solid\");\r\n        d3.select(\"#blocksBox\" + clusterId).style(\"stroke-width\", \"3px\");\r\n        // d3.select(\"#\" + d3.select(this).attr(\"id\") + \"_text\").style(\"font-weight\", \"normal\");\r\n        d3.selectAll(\".branchSummaryArrowLine_\" + clusterId)\r\n            // .style(\"stroke-width\", \"2px\")\r\n            .style(\"stroke-opacity\", 1);\r\n    });\r\n}\r\n\r\nconst branchSummaryValueRectMouseleave = (rectMargin) => {\r\n    d3.selectAll(\".branchSummaryValueRect\").each( function() {\r\n        let orgColor = d3.select(this).attr(\"org-color\");\r\n        d3.select(this)\r\n            .style(\"font-weight\", \"normal\")\r\n            .style(\"background-color\", orgColor);\r\n        d3.select(this).select(\"span\").style(\"background\", orgColor);\r\n    })\r\n    ;\r\n\r\n    d3.selectAll(\".branchSummaryClusterRect\").style(\"border\", \"dotted \" + rectMargin + \"px WhiteSmoke\");\r\n    d3.selectAll(\".blocksBox\").style(\"stroke-width\", \"1px\");\r\n    d3.selectAll(\".branchSummaryArrowLine\").style(\"stroke-width\", \"1px\").style(\"stroke-opacity\", 0.3);\r\n    // d3.selectAll(\".branchSummaryValueRectText\").style(\"font-weight\", \"\");\r\n}\r\n\r\n\r\n\r\n///////////////////////////////////////////////////\r\n// MAIN HOOK\r\nconst BranchSummary = (props) => {\r\n// console.log(\"BranchSummary start!!\", props);\r\n    const {branchNo, width, height, hideFiles, summaryByLOC} = props;\r\n    const clusterOverviewHeight = useSelector(state => state.layout.clusterOverviewHeight);\r\n    let isInitRef = useRef(true);\r\n\r\n    const clusterNodes = (props.clusterNodes === undefined ? [] : props.clusterNodes.filter(d => !d.isNonConfilctMerge));\r\n    clusterNodes.sort((a, b) => a.x - b.x);\r\n\r\n    const itemHeight = 20;\r\n    const itemTopCount = 5;\r\n    let arrowHeight = 20;\r\n\r\n    let showAttrs;\r\n    let showAttrValueCount;\r\n    let showAttrRenderFlow;\r\n    let showByCommitCountOnly;\r\n\r\n    const dispatch = useDispatch();\r\n    const registerFavoriteFragment = (f) => {\r\n        dispatch(actions.registerFavoriteFragment(f));\r\n    }\r\n    const [selectedClusterNodeIndex, setSelectedClusterNodeIndex] = useState(undefined);\r\n\r\n\r\n    if (!summaryByLOC) {\r\n        showAttrs = [[\"authors\"], [\"commitTypes\"], [\"touchCountByFiles\", \"touchCountByDirs\"], [\"keywords\"], ];\r\n        showAttrValueCount = [3, 3, 4, 3];\r\n        // showAttrRenderFlow = [false, false, true, false];\r\n        showAttrRenderFlow = [true, true, true, true];\r\n        showByCommitCountOnly = [true, true, false, true];\r\n    } else {\r\n        showAttrs = [[\"authorsLOCStat\"], [\"commitTypesLOCStat\"], [\"clocByDirs\"], [\"clocByFiles\"], [\"keywords\"], ];\r\n        showAttrValueCount = [2, 2, 2, 3, 3];\r\n        // showAttrRenderFlow = [false, false, true, true, false];\r\n        showAttrRenderFlow = [true, true, true, true, true];\r\n        showByCommitCountOnly = [false, false, false, false, true];\r\n    }\r\n\r\n    const margin = 2;\r\n    const divHeight = itemHeight * showAttrValueCount.reduce( (prev, cur, i) => prev + (showAttrRenderFlow[i] ? cur : 1), 0) + margin * 2;\r\n    const summaryWidth = 0;\r\n    const underlineHeight = 10;\r\n    let itemMinWidth = 20;\r\n    const summaryMinWidth = 600;\r\n    const totalCommitCount = clusterNodes.filter(d => !d.isNonConfilctMerge).reduce((prev, node) => prev + node.cluster.nodeCount, 0);\r\n    const totalCLOC = clusterNodes.filter(d => !d.isNonConfilctMerge).reduce((prev, node) => prev + node.cluster.locStat.clocSum, 0);\r\n    const totalValue = (!summaryByLOC ? totalCommitCount : totalCLOC);\r\n\r\n    if (itemMinWidth * clusterNodes.length > width) itemMinWidth = 10;\r\n    let maxWidth = Math.max(width, itemMinWidth * clusterNodes.length);\r\n\r\n    let summaryStartX = 0;\r\n    let summaryEndX = width;\r\n    let arrowDivStartX = 0;\r\n    let arrowDivWidth = width;\r\n\r\n    clusterNodes.forEach(clusterNode => {\r\n        let clusterData = new ClusterData(clusterNode.cluster, props.gitAnalyzer.corpusData, props.useHeuristicMerge);\r\n        clusterData[\"touchCountByDirs\"] = Object.entries(clusterData[\"touchCountByDirs\"])\r\n            .filter(d => d[0].split(\"/\").length === 4)\r\n            .reduce((prev, cur) => { prev[cur[0]] = cur[1]; return prev }, {});\r\n        clusterData[\"clocByDirs\"] = Object.entries(clusterData[\"clocByDirs\"])\r\n            .filter(d => d[0].split(\"/\").length === 4)\r\n            .reduce((prev, cur) => { prev[cur[0]] = cur[1]; return prev }, {});\r\n\r\n        clusterNode.clusterData = clusterData;\r\n// console.log(\"clusterData\", clusterData);\r\n    });\r\n\r\n    // branch name\r\n    clusterNodes.reverse();\r\n\r\n    let branchNames = GitAnalyzer.getBranchNamesFromBranchClusterNodes(clusterNodes);\r\n\r\n    clusterNodes.reverse();\r\n    // if (!props.showPullRequestBranch) branchNames = branchNames.filter( b => b.startsWith(\"origin/pr\") === false);\r\n    let branchName = branchNames.join(\", \")\r\n    \r\n    let widthScale, rectWidths;\r\n// console.log(\"overflow?\", itemMinWidth * totalValue > width, itemMinWidth * totalValue , width)\r\n    if (itemMinWidth * totalValue > width) {\r\n        widthScale = d3.scaleLinear().range([0, maxWidth - (itemMinWidth * clusterNodes.length)]).domain([0, totalValue - clusterNodes.length]);\r\n        rectWidths = clusterNodes.map( clusterNode => itemMinWidth + widthScale(\r\n            (summaryByLOC ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount - 1)\r\n        ));\r\n    } else {\r\n        widthScale = d3.scaleLinear().range([0, width]).domain([0, totalValue]);\r\n        \r\n        rectWidths = clusterNodes.map( clusterNode => widthScale(\r\n            (summaryByLOC ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount)\r\n        ));\r\n    }\r\n    \r\n    const rectMargin = 2;\r\n\r\n    /////////////////////////////////////////////\r\n    // DRAW SUMMARY FUNC\r\n    const drawSummary = (clusterNode, index) => {\r\n        if (clusterNode.isNonConfilctMerge) return;\r\n\r\n        let branchSummaryClusterRectStr = \"branchSummaryClusterRect_\" + clusterNode.cluster.id;\r\n        // d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\"div\").remove();\r\n// console.log(\"removed? \", d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\"div\"));\r\n        let topDataList = showAttrs.reduce((prev, attrList, attrIndex) => {\r\n            let dataList = attrList.reduce((p, attr) => p.concat(\r\n                Object.entries(clusterNode.clusterData[attr]).map(d => \r\n                    [attr].concat( [d[0], (d[1] instanceof LOCStat ? d[1].clocSum : d[1])] )\r\n            )), []);\r\n            // let ignoreList = dataList.filter(d => d[0].endsWith(\"Files\") && hideFiles.indexOf(d[1]) >= 0);\r\n// console.log(dataList);\r\n            if (dataList.length === 0) return prev;\r\n            if(dataList.length === 0 || dataList[0][0] != \"keywords\") {\r\n                dataList = dataList.filter(d => !(d[0].endsWith(\"Files\") && hideFiles.indexOf(d[1]) >= 0))\r\n                    .sort((a, b) => b[2] - a[2])\r\n                    // .concat(ignoreList)\r\n            } else {\r\n                dataList = dataList.filter(d => !(d[0].endsWith(\"Files\") && hideFiles.indexOf(d[1]) >= 0))\r\n                    .sort((a, b) => b[2][1] - a[2][1])\r\n                    .map( d => [d[0], d[1], d[2][0]])\r\n                ;\r\n            }\r\n            dataList = dataList.filter((d, i) => i < showAttrValueCount[attrIndex]);\r\n\r\n            Array(showAttrValueCount[attrIndex] - dataList.length).fill().forEach(() => dataList.push(undefined));\r\n            prev.push(dataList);\r\n            return prev;\r\n        }, []);\r\n\r\n        // d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\".branchSummaryClusterRect\").selectAll(\"div\").remove();\r\n        // let borderRect = d3.select(\"#branchSummary\" + branchNo + \"_\" + index + \"_border_rect\").selectAll(\".branchSummaryClusterRect\").data(topDataList).enter();\r\n        d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\".branchSummaryValueWrap\").remove();\r\n        let borderRect = d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\".branchSummaryClusterRect\").data(topDataList).enter();\r\n// console.log(\"borderRect = \", branchSummaryClusterRectStr, d3.select(branchSummaryClusterRectStr), borderRect, topDataList)\r\n\r\n        borderRect.append(\"div\")\r\n            .attr(\"id\", (d, i) => \"branchSummaryValueWrap_\" + clusterNode.cluster.id + \"_\" + i)\r\n            // .attr(\"class\", (d, i) => (showAttrRenderFlow[i] ? \"flexVerticalContainer\": \"flexContainer\"))\r\n            .attr(\"class\", (d, i) => \"branchSummaryValueWrap \" + (showAttrRenderFlow[i] ? \"flexVerticalContainer\": \"flexContainer\"))\r\n            .style(\"width\", \"100%\")//(rectWidths[index] - rectMargin * 2) + \"px\")\r\n            // .style(\"height\", itemHeight + \"px\")\r\n            .style(\"background-color\",\"#EEEEEE\")//\"rgba(128,128,128,0.1)\")\r\n            .style(\"border\", \"1px \" + clusterNode.color)\r\n            .style(\"flex-wrap\", \"wrap\")\r\n            .style(\"font-size\", \"12px\")\r\n            .on(\"click\", () => {\r\n                d3.selectAll(\".branchSummaryClusterRectOver\").style(\"opacity\", 0)\r\n                d3.select(\"#branchSummaryClusterRect_\" + clusterNode.cluster.id + \"_over\").style(\"opacity\", 0.2).style(\"background\", clusterNode.color);\r\n                setSelectedClusterNodeIndex(index);\r\n            })\r\n            .on(\"mouseenter\", function(d) {\r\n                // if (!showAttrRenderFlow[d.parentIndex]) \r\n                d3.select(branchSummaryClusterRectStr).style(\"border\", rectMargin + \"px \" + clusterNode.color + \" solid\");\r\n                d3.select(this).style(\"overflow\", \"visible\").style(\"font-size\", \"12px\").style(\"z-index\", 100);\r\n                d3.select(this).selectAll(\"span\").style(\"background\")\r\n                branchSummaryValueRectMouseover(d.data, clusterNode.color, rectMargin);\r\n            })\r\n            .on(\"mouseleave\", function(d) {\r\n                // if (!showAttrRenderFlow[d.parentIndex]) \r\n                d3.select(this).style(\"overflow\", \"hidden\");\r\n                d3.select(this).style(\"z-index\", undefined).style(\"font-size\", \"12px\");\r\n                branchSummaryValueRectMouseleave(rectMargin);\r\n            })\r\n            // .style(\"z-index\", (d, i) => showAttrRenderFlow[i] ? i * 10 + 1 : (i * 10))\r\n                .selectAll(\".branchSummaryValueRect\")\r\n                .data( (d, i) => d.map( (data) => { return {\"data\": data, \"parentIndex\": i}; }))\r\n                .enter()\r\n                    .append(\"div\")\r\n                    .attr(\"id\", (d, i) => \"branchSummaryValueRect_\" + clusterNode.cluster.id + \"_\" + d.parentIndex + \"_\" + i)\r\n                    .attr(\"class\", \"branchSummaryValueRect\")\r\n                    // .style(\"width\", d => (d.data ? (100 * d.data[2] / \r\n                    //         (summaryByLOC && showAttrRenderFlow[d.parentIndex] ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount)\r\n                    //     ) : 0) + \"%\")\r\n                    .style(\"width\", d => { \r\n                        // console.log(\"summaryByLOC\", d, summaryByLOC, !showByCommitCountOnly[d.parentIndex]);\r\n                        return (d.data ? (100 * d.data[2] / \r\n                        (summaryByLOC && !showByCommitCountOnly[d.parentIndex] ? clusterNode.cluster.locStat.clocSum : clusterNode.cluster.nodeCount)\r\n                    ) : 0) + \"%\";})\r\n                    .style(\"height\", itemHeight + \"px\")\r\n                    // .style(\"height\", d => (d.data === undefined && showAttrRenderFlow[d.parentIndex]) ? (itemHeight) + \"px\" : \"\")\r\n                    .style(\"border-radius\", \"5px\")\r\n                    .style(\"background-color\", d => { return (d.data ? AttributeColors[DataTypeByNameMap[d.data[0]]][3] : \"\");  } )\r\n                    .attr(\"highlight-color\", d => { return (d.data ? AttributeColors[DataTypeByNameMap[d.data[0]]][1] : \"\");  } )\r\n                    .attr(\"org-color\", d => { return (d.data ? AttributeColors[DataTypeByNameMap[d.data[0]]][3] : \"\");  } )\r\n                    // .style(\"opacity\", 1)\r\n                    .style(\"font-size\", \"12px\")\r\n                    .style(\"overflow\", \"hidden\")\r\n                    .style(\"padding-left\", \"2px\")\r\n                    .style(\"color\", d => (d.data === undefined ? \"\" : (d.data[0].endsWith(\"Files\") && hideFiles.indexOf(d.data[1]) >= 0 ? \"grey\" : \"\")))\r\n                    .on(\"mouseover\", function(d) {\r\n                        // if (!showAttrRenderFlow[d.parentIndex]) \r\n                        d3.select(this).style(\"overflow\", \"visible\").style(\"font-size\", \"12px\").style(\"z-index\", 100);\r\n                        d3.select(this).selectAll(\"span\").style(\"background\")\r\n                        branchSummaryValueRectMouseover(d.data, clusterNode.color, rectMargin);\r\n                    })\r\n                    .on(\"mouseleave\", function(d) {\r\n                        // if (!showAttrRenderFlow[d.parentIndex]) \r\n                        d3.select(this).style(\"overflow\", \"hidden\");\r\n                        d3.select(this).style(\"z-index\", undefined).style(\"font-size\", \"12px\");\r\n                        branchSummaryValueRectMouseleave(rectMargin);\r\n                    })\r\n                    .append(\"span\")\r\n                        .attr(\"class\", \"valueRectSpan\")\r\n                        .text(d => d.data === undefined ? \"\" : GitAnalyzer.getTextValue(d.data[0], d.data[1]))\r\n                        .style(\"overflow\", d => showAttrRenderFlow[d.parentIndex] ? \"visible\" : \"hidden\")\r\n                        .style(\"white-space\", \"pre\")\r\n        ;\r\n        \r\n        // resize height(rendered) \r\n        // let bsrect = d3.select(\"#\" + branchSummaryClusterRectStr);\r\n        // let totalWrapHeight = showAttrRenderFlow.reduce( (prev, cur, i) => prev + bsrect.select(\"#branchSummaryValueWrap_\" + clusterNode.cluster.id + \"_\" + i).node().getBoundingClientRect().height, 0);\r\n        // d3.select(\"#\" + branchSummaryClusterRectStr).style(\"height\", (totalWrapHeight + rectMargin * 2) + \"px\");\r\n// console.log(\"totalWrapHeight\", totalWrapHeight)\r\n    }\r\n    \r\n\r\n    useLayoutEffect( () => {\r\n        setSelectedClusterNodeIndex(undefined);\r\n// console.log(\"useEffect (NOT INIT)\", branchNo, clusterNodes, hideFiles)\r\n        // if (!isInitRef.current) {\r\n            // d3.selectAll(\".branchSummaryClusterRect\").selectAll(\"div\").remove();\r\n            clusterNodes.forEach( (clusterNode, i) => {\r\n                let branchSummaryClusterRectStr = \"branchSummaryClusterRect_\" + clusterNode.cluster.id;\r\n                // d3.select(\"#\" + branchSummaryClusterRectStr).selectAll(\"div\").remove();\r\n                drawSummary(clusterNode, i);\r\n            });\r\n\r\n            if (clusterNodes.length === 1 && clusterNodes[0].cluster.nodeList.length < 100) setSelectedClusterNodeIndex(0);\r\n        // }\r\n    // });\r\n    }, [branchNo, JSON.stringify(clusterNodes.map(d => d.cluster.id)), hideFiles]);\r\n\r\n    useLayoutEffect( () => {\r\n        let prevIndex = selectedClusterNodeIndex;\r\n        setSelectedClusterNodeIndex(undefined);\r\n        clusterNodes.forEach( (clusterNode, i) => {\r\n            drawSummary(clusterNode, i);\r\n        });\r\n// console.log(\"useLayoutEffect prevIndex\", prevIndex)\r\n        setSelectedClusterNodeIndex(prevIndex);\r\n    }, [summaryByLOC]);\r\n\r\n    if (clusterNodes.length === 0) return (<div></div>);\r\n\r\n    let currentX = 0;\r\n    let descriptionHeight = 30;\r\n\r\n    let branchNum = (clusterNodes.length > 0 ? clusterNodes[0].cluster.nodeList[0].implicitBranchNo : -1);\r\n    arrowHeight = clusterOverviewHeight - Number(d3.select(\"#underlines\" + branchNum).attr(\"y\")) + descriptionHeight;\r\n// console.log(\"BS render?\", divHeight,  branchNo, arrowHeight, clusterOverviewHeight, d3.select(\"#underlines\" + branchNum).attr(\"y1\"));\r\n// console.log(\"selectedClusterNodeIndex !== undefined && clusterNodes[selectedClusterNodeIndex] !== undefined\", props,selectedClusterNodeIndex !== undefined, clusterNodes[selectedClusterNodeIndex] !== undefined)\r\n\r\n    let containReleaseList = clusterNodes.reduce( (prev, clusterNode) => \r\n        prev.concat( clusterNode.blockList.reduce( (p, block) => p.concat(block.releaseNodeList.map(d => d.releaseTagString)), []) )\r\n    , []);\r\n    if (containReleaseList.length > 3) containReleaseList = [containReleaseList[0], containReleaseList[1], \"...\", containReleaseList.slice(-1)[0]];\r\n    let containReleaseNames = containReleaseList.join(\", \");\r\n\r\n    return (\r\n        <div id={\"branchSummaryDiv\" + branchNo}>\r\n            <svg id={\"branchSummaryArrow\" + branchNo}\r\n                className=\"branchSummaryArrowArea\"\r\n                style={{\r\n                    position:\"absolute\",\r\n                    width: arrowDivWidth + \"px\",\r\n                    height: arrowHeight + \"px\",\r\n                    left: arrowDivStartX + \"px\",\r\n                    top: clusterNodes[0].height + underlineHeight + \"px\",\r\n                    pointerEvents: \"none\"\r\n                }}\r\n            >\r\n                {clusterNodes.map( (clusterNode, i) => {\r\n                    let startCurrentX = currentX;\r\n                    currentX += rectWidths[i];\r\n                    return (\r\n                        <React.Fragment key={i}>\r\n                        <line \r\n                            className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\r\n                            x1={Math.max(0, clusterNode.x - summaryStartX)}\r\n                            x2={startCurrentX}\r\n                            y1={0}\r\n                            y2={arrowHeight}\r\n                            style={{\r\n                                strokeWidth: 1,\r\n                                stroke: clusterNode.color,\r\n                                strokeOpacity: 0.3\r\n                            }}\r\n                        />\r\n                        <line \r\n                            className={[\"branchSummaryArrowLine\", clusterNode.cluster.id].join(\"_\") + \" branchSummaryArrowLine\"}\r\n                            x1={Math.max(0, clusterNode.x - summaryStartX + clusterNode.width)}\r\n                            x2={currentX}\r\n                            y1={0}\r\n                            y2={arrowHeight}\r\n                            style={{\r\n                                strokeWidth: 1,\r\n                                stroke: clusterNode.color,\r\n                                strokeOpacity: 0.3\r\n                            }}\r\n                        />\r\n                        </React.Fragment>\r\n                    );\r\n                })}\r\n            </svg>\r\n\r\n            <div id={\"branchDescription\" + branchNo}\r\n                align=\"left\"\r\n                style={{\r\n                    position: \"absolute\",\r\n                    width: arrowDivWidth + \"px\",\r\n                    height: \"20px\",\r\n                    left: arrowDivStartX + \"px\",\r\n                    top: (clusterNodes[0].height + underlineHeight + arrowHeight - descriptionHeight + 10 ) + \"px\",\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"bold\",\r\n                    overflow: \"visible\",\r\n                    whiteSpace: \"nowrap\",\r\n                }}\r\n            >\r\n                [{containReleaseNames}] {branchName}  \r\n                <span style={{fontWeight: \"normal\"}}> (total {(summaryByLOC ? \"CLOC\" : \"commit #\")}: {totalValue})</span>\r\n                {/* {clusterNodes[0].cluster.implicitBranchNo} */}\r\n            </div>\r\n            \r\n            <div id={\"branchSummary\" + branchNo}\r\n                className=\"branchSummaryArea\"\r\n                style={{\r\n                    position: \"absolute\",\r\n                    \"width\": maxWidth + summaryWidth + \"px\",\r\n                    \"height\": (divHeight) + \"px\",\r\n                    \"left\": summaryStartX + \"px\",\r\n                    \"top\": (clusterNodes[0].height + underlineHeight + arrowHeight) + \"px\",\r\n                }}\r\n                className=\"flexContainer\"\r\n            >\r\n                {clusterNodes.map( (clusterNode, i) => {\r\n                    let overWidth = (i > 0 ? rectWidths.slice(0, i).reduce( (prev, cur) => prev + cur, 0) : 0);\r\n                    return(\r\n                        <Fragment key={clusterNode.cluster.id}>\r\n                            <div\r\n                                id={\"branchSummaryClusterRect_\" + clusterNode.cluster.id}\r\n                                className=\"branchSummaryClusterRect flexVerticalContainer\"\r\n                                style={{\r\n                                    width: rectWidths[i],\r\n                                    // height: clusterNode.isNonConfilctMerge ? itemHeight : itemHeight * showAttrValueCount.length,\r\n                                    fill: \"white\",\r\n                                    // strokeDasharray: (clusterNode.isNonConfilctMerge ? 4 : 0),\r\n                                    backgroundColor: \"white\",\r\n                                    border: \"dotted \" + rectMargin + \"px WhiteSmoke\",\r\n                                    cursor: \"pointer\",\r\n                                }}\r\n                            >\r\n                            </div>\r\n                            <div\r\n                                id={\"branchSummaryClusterRect_\" + clusterNode.cluster.id + \"_over\"}\r\n                                className=\"branchSummaryClusterRectOver flexVerticalContainer\"\r\n                                style={{\r\n                                    position: \"absolute\",\r\n                                    height: (divHeight) + \"px\",\r\n                                    left: overWidth + \"px\",\r\n                                    top: \"0px\",\r\n                                    width: rectWidths[i],\r\n                                    pointerEvents: \"none\",\r\n                                    opacity: 0,\r\n                                    // height: clusterNode.isNonConfilctMerge ? itemHeight : itemHeight * showAttrValueCount.length,\r\n                                    // background: \"white\",\r\n                                    // strokeDasharray: (clusterNode.isNonConfilctMerge ? 4 : 0),\r\n                                    // backgroundColor: \"white\",\r\n                                    // border: \"dotted \" + rectMargin + \"px WhiteSmoke\",\r\n                                    // cursor: \"pointer\",\r\n                                }}\r\n                            >\r\n                            </div>\r\n                        </Fragment>\r\n                    );\r\n                })}\r\n            </div>\r\n            <div\r\n                style={{\r\n                    position: \"absolute\",\r\n                    // \"width\": maxWidth + summaryWidth + \"px\",\r\n                    \"width\" : width + \"px\",\r\n                    // \"height\": (divHeight) + \"px\",\r\n                    \"left\": summaryStartX + \"px\",\r\n                    \"top\": (clusterNodes[0].height + underlineHeight + arrowHeight + divHeight) + \"px\",\r\n            }}\r\n            >\r\n                {selectedClusterNodeIndex !== undefined && clusterNodes[selectedClusterNodeIndex] !== undefined &&\r\n                    <GroupSummary\r\n                        gitAnalyzer={props.gitAnalyzer}\r\n                        width={width}\r\n                        selectedClusterNode={clusterNodes[selectedClusterNodeIndex]}\r\n                        arrowStartX={rectWidths.filter( (d, i) => i < selectedClusterNodeIndex).reduce( (prev, cur) => prev + cur, 0)}\r\n                        arrowWidth={rectWidths[selectedClusterNodeIndex]}\r\n                        registerFavoriteFragment={registerFavoriteFragment}\r\n                        useHeuristicMerge={props.useHeuristicMerge}\r\n                    />\r\n                }\r\n            </div>\r\n            \r\n        </div>\r\n    );\r\n}\r\n        \r\nexport default BranchSummary;","import * as d3 from 'd3';\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport { intersection } from \"lodash\";\r\nimport { BranchColors } from './ColorClasses';\r\n\r\n\r\nconst moverLinks = (HALinkIds) => {\r\n    HALinkIds.forEach(l => d3.select(\"#mergedRelationLink_\" + l)\r\n        .style(\"stroke-dasharray\", \"\")\r\n        .style(\"stroke\", \"BLACK\").style(\"visibility\", \"\"));\r\n}\r\n\r\nconst mleaveLinks = (HALinkIds) => {\r\n    HALinkIds.forEach(l => {\r\n        let link = d3.select(\"#mergedRelationLink_\" + l);\r\n        link.style(\"stroke\", link.attr(\"orgColor\"))\r\n            .style(\"stroke-dasharray\", \"1, 1\")\r\n            .style(\"visibility\", link.attr(\"orgVisibility\"));\r\n    });\r\n}\r\n\r\n// selectedClusters 조정해야함\r\nexport function drawClusters(\r\n    layout, sel, clusterNodeList, maxBlockIndex, gitAnalyzer, pref, threshold,\r\n    nonConflictGroupingLevel = 0, ignoreFiles = [], useHeuristicMerge, showMergeLink, showGroupSummaryFunc) {\r\n    const defaultBlockOpacity = 0.4;\r\n    const defaultClusterOpacity = 0.05;\r\n    // const selectedClusterOpacity = 0.5;\r\n\r\n// console.log(\"DRAWCLUSTER!!!\", clusterNodeList, maxBlockIndex, showGroupSummaryFunc)\r\n    if (sel === undefined) sel = [0, gitAnalyzer.allNodeList.length - 1];\r\n    d3.select(\"#clusterOverviewSvg\").selectAll(\"g\").remove();\r\n    // console.log(\"brushed\", sel);\r\n\r\n    let marginLeft = 1;\r\n    let marginRight = 1;\r\n    let width = layout.clusterOverviewWidth - marginLeft - marginRight;\r\n    let height = layout.orgClusterOverviewHeight;\r\n    let maxHeightCommitCount = 10;\r\n    let startBlockIndex, endBlockIndex;\r\n    let summaryLineHeight = 10;\r\n\r\n    startBlockIndex = 0;\r\n    endBlockIndex = maxBlockIndex + 1;\r\n\r\n    const yRange = d3.range(0, d3.max(clusterNodeList.map(d => d.y)) + 1);\r\n    const minHeight = yRange.slice(-1)[0] * 60;\r\n    // console.log(\"minHeight = \", minHeight, height);\r\n\r\n    if (minHeight > layout.orgClusterOverviewHeight) height = minHeight;\r\n    // else if (minHeight < layout.clusterOverviewHeight) height = layout.orgClusterOverviewHeight;\r\n// console.log(\"overview height adjust\", yRange, minHeight, height, layout)\r\n    d3.select(\"#clusterOverviewSvg\").attr(\"height\", height);\r\n\r\n    console.log(\"BRUSHING CONVERTED\", startBlockIndex, endBlockIndex, width, layout.clusterOverviewWidth);\r\n    let xBandScale = d3.scaleBand().domain(d3.range(0, endBlockIndex - 1)).range([0, width]);\r\n    let yBandScale = d3.scaleBand().domain(yRange).range([0, height - summaryLineHeight]).paddingInner(0.2).paddingOuter(0.2);\r\n    let xRectScale = d3.scaleLinear().domain([0, endBlockIndex - 1]).range([0, width]);\r\n    let blockHeightScale = d3.scaleLinear().range([0, yBandScale.bandwidth() - 2]).domain([0, maxHeightCommitCount]);\r\n    let clusterOverviewSvg = d3.select(\"#clusterOverviewSvg\")\r\n        .append(\"g\")\r\n        .attr(\"transform\", \"translate(\" + marginLeft + \" 0)\")\r\n        .attr(\"id\", \"clusters\");\r\n\r\n    let colorByBranchNo = {};\r\n\r\n    // console.log(\"BRUSHED clusterNodeList\", clusterNodeList)\r\n    // console.log(\"BRUSHED clusternodelist\", clusterNodeList.filter(cn => cn.blockList[0].x <= endBlockIndex && cn.blockList.slice(-1)[0].x >= startBlockIndex));\r\n    // let brushedClusterNodeList = clusterNodeList.filter(cn => cn.blockList[0].x <= endBlockIndex && cn.blockList.slice(-1)[0].x >= startBlockIndex);\r\n    let brushedClusterNodeList = clusterNodeList;\r\n    //////////////////////////////////////////////\r\n    // nonConflictGroupMerging (나중에 function으로 빼라.)\r\n    //////////////////////////////////////////////\r\n    if (nonConflictGroupingLevel > 0) {\r\n        let branchNodesListForSwitching = Object.values(brushedClusterNodeList\r\n            .reduce((prev, clusterNode) => {\r\n                let branchNum = clusterNode.cluster.nodeList[0].implicitBranchNo;\r\n                if (branchNum in prev) prev[branchNum].push(clusterNode);\r\n                else prev[branchNum] = [clusterNode];\r\n                return prev;\r\n            }, {}))\r\n            .filter(cn => cn.length > 2);\r\n        // console.log(\"branchNodesListForSwitching\", branchNodesListForSwitching);\r\n\r\n        // switch non-confilct groups\r\n        branchNodesListForSwitching.forEach(branchNodes => {\r\n            branchNodes.sort((a, b) => a.blockList[0].x - b.blockList[0].x);\r\n            let fileSetList = branchNodes.map(clusterNode => getFileSetForCluster(clusterNode.cluster, ignoreFiles));\r\n\r\n            branchNodes.filter((d, i) => i < branchNodes.length - 2).forEach((clusterNode, i) => {\r\n                // break recursive\r\n                if (clusterNode.isNonConfilctMerge) return;\r\n\r\n                // A(org) -> B(skip) -> C(target)\r\n                let fileSetOrg = Array.from(fileSetList[i]);\r\n                let fileSetSkip = Array.from(fileSetList[i + 1]);\r\n                let fileSetTarget = Array.from(fileSetList[i + 2]);\r\n                // console.log(\"fileSet\", fileSetOrg, fileSetSkip, fileSetTarget);\r\n                // console.log(\"check check!!\", intersection(fileSetOrg, fileSetSkip), intersection(fileSetSkip, fileSetTarget));\r\n                // check non-conflict\r\n                if (intersection(fileSetOrg, fileSetSkip).length > 0 || intersection(fileSetSkip, fileSetTarget).length > 0) return;\r\n\r\n                // check similarity between A end and C first\r\n                // console.log(\"compare\", clusterNode.cluster.nodeList.slice(-1)[0], branchNodes[i+2].cluster.nodeList[0]);\r\n                let scores = gitAnalyzer.getScoreByPreferences(clusterNode.cluster.nodeList.slice(-1)[0], branchNodes[i + 2].cluster.nodeList[0], pref, false);\r\n                // console.log(\"NONCONFLICT SWITCH\", branchNodes, threshold, scores.sum, fileSetOrg, fileSetSkip, fileSetTarget);\r\n\r\n                // \r\n                if (threshold <= scores.sum) {\r\n                    let targetClusterNode = branchNodes[i + 2];\r\n                    targetClusterNode.isNonConfilctMerge = true;\r\n\r\n                    targetClusterNode.cluster.nodeList.forEach(n => clusterNode.cluster.addNode(n, scores));\r\n                    // clusterNode.cluster.nodeList.concat(targetCluster.nodeList);\r\n                    clusterNode.blockList.slice(-1)[0].isNonConflictMergedSource = true;\r\n                    clusterNode.blockList.slice(-1)[0].commitCount += targetClusterNode.cluster.nodeList.length;\r\n                    targetClusterNode.blockList.forEach(b => b.isNonConflictMergedTarget = true);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    //////////////////////////////////////////////\r\n    let blockMapByNode = {};\r\n    // SET MERGED NODE RELATION\r\n    brushedClusterNodeList.forEach(clusterNode => {\r\n        let blockList = clusterNode.blockList.filter(d => !d.isNonConflictMergedTarget);\r\n        blockList.forEach(block => {\r\n            block.nodeList.forEach(node => {\r\n                blockMapByNode[node.id] = block;\r\n            });\r\n        })\r\n    });\r\n\r\n    let clusterNodesByBranchNo = brushedClusterNodeList\r\n        .reduce((prev, clusterNode) => {\r\n            let branchNum = clusterNode.cluster.nodeList[0].implicitBranchNo;\r\n            if (branchNum in prev) prev[branchNum].push(clusterNode);\r\n            else prev[branchNum] = [clusterNode];\r\n            return prev;\r\n        }, {});\r\n\r\n    // console.log(\"brushedClusterNodeList\", brushedClusterNodeList, xBandScale.bandwidth());\r\n    //////////////////////////////////////////\r\n    // PRE-BUILD HA MergeLINKS\r\n    let toBlockListMapByBlock = {};\r\n    brushedClusterNodeList.forEach(clusterNode => {\r\n        clusterNode.blockList.filter(b => b.containsMergeTraversedNodes).map(block => {\r\n            let toBlockList = Array.from(block.mergedToNodeList.reduce((prev, node) => {\r\n                let matchedBlock = blockMapByNode[node.id];\r\n                if (matchedBlock !== undefined) prev.add(matchedBlock);\r\n                return prev;\r\n            }, new Set()));\r\n            toBlockListMapByBlock[block.id] = toBlockList;\r\n            toBlockList.map(toBlock => {\r\n                let id = block.id + \"_\" + toBlock.id;\r\n                block.HALinkIds.push(id);\r\n                toBlock.HALinkIds.push(id);\r\n            });\r\n        });\r\n    });\r\n\r\n    brushedClusterNodeList\r\n        .forEach(clusterNode => {\r\n            let blocksBox = clusterOverviewSvg.append(\"g\");\r\n            let boxWidth = (clusterNode.blockList.slice(-1)[0].x - clusterNode.blockList[0].x + 1) * xBandScale.bandwidth();\r\n            let boxHeight = yBandScale.bandwidth();\r\n            let x = xRectScale(clusterNode.blockList[0].x);\r\n            let y = yBandScale(clusterNode.y);\r\n\r\n            clusterNode.branchType = gitAnalyzer.getClusterBranchType(clusterNode.cluster);\r\n            clusterNode.color = getClusterNodeColor(clusterNode);\r\n            let clusterColor = clusterNode.color;\r\n            \r\n            clusterNode.x = x;\r\n            clusterNode.width = boxWidth;\r\n            clusterNode.height = y + boxHeight;\r\n\r\n            // let drawBlockList = clusterNode.blockList.filter(b => b.x >= startBlockIndex && b.x <= endBlockIndex);\r\n            let drawBlockList = clusterNode.blockList;\r\n            let elem = clusterOverviewSvg.append(\"g\").selectAll(\"rect\")\r\n                // .data(drawBlockList.filter(d => d.x >= startBlockIndex && d.x <= endBlockIndex))\r\n                .data(drawBlockList)\r\n                .enter();\r\n            elem.append(\"rect\")\r\n                .attr(\"class\", \"block\")\r\n                .attr(\"id\", d => \"block\" + d.id)\r\n                // .attr(\"x\", d => {console.log(\"xxx\", d, d.x, xBandScale(d.x)); return xBandScale(d.x)})\r\n                .attr(\"x\", d => xBandScale(d.x))\r\n                .attr(\"y\", d => yBandScale(clusterNode.y) + (yBandScale.bandwidth() - blockHeightScale(Math.min(d.commitCount, maxHeightCommitCount))) / 2)\r\n                .attr(\"width\", xBandScale.bandwidth())\r\n                .attr(\"height\", d => blockHeightScale(Math.min(d.commitCount, maxHeightCommitCount)))\r\n                .attr(\"rx\", (xBandScale.bandwidth() >= 10 ? 5 : 2))\r\n                .style(\"pointer-events\", \"none\")\r\n                .style(\"fill\", d => {\r\n                    if (d.isNonConflictMergedTarget) return \"white\";\r\n                    else return clusterColor;\r\n                })\r\n                .style(\"fill-opacity\", d => {\r\n                    if (d.isNonConflictMergedSource || d.isNonConflictMergedTarget) return 1;\r\n                    else if (d.containsMergeTraversedNodes) return 0;\r\n                    else return defaultBlockOpacity;\r\n                })\r\n                .style(\"stroke-width\", d => {\r\n                    // if (useHeuristicMerge && d.containsMergedNodes && !d.isNonConflictMergedTarget) {\r\n                    if (d.containsMergedNodes && !d.isNonConflictMergedTarget) {\r\n                        if (xBandScale.bandwidth() < 15) return 1;\r\n                        else return 2;\r\n                    }\r\n                    else if (d.containsMergeTraversedNodes) return 1;\r\n                    else return 0;\r\n                })\r\n                .style(\"stroke\", d => {\r\n                    // if (useHeuristicMerge && d.containsMergedNodes && !d.isNonConflictMergedTarget) return \"black\";\r\n                    if (d.containsMergedNodes && !d.isNonConflictMergedTarget) return \"black\";\r\n                    else if (d.containsMergeTraversedNodes) return \"grey\";\r\n                    else return \"\";\r\n                })\r\n                .style(\"stroke-dasharray\", d => (!useHeuristicMerge && (d.containsMergedNodes || d.containsMergeTraversedNodes) ? \"1, 1\" : \"\"))\r\n                ;\r\n\r\n            //////////////////////////////////////////////\r\n            // SET releaseStr to block\r\n            drawBlockList.forEach(block => {\r\n                let releaseNodeList = block.nodeList.filter(node => node.isRelease);\r\n\r\n                if (useHeuristicMerge) {\r\n                    releaseNodeList = releaseNodeList.concat(\r\n                        block.nodeList.reduce((prev, node) =>\r\n                            prev.concat(node.mergeNodes.filter(node => node.isRelease && node.seq >= sel[0] && node.seq <= sel[1]))\r\n                            , [])\r\n                    );\r\n                }\r\n                block.releaseNodeList = releaseNodeList;\r\n                releaseNodeList.sort((a, b) => b.seq - a.seq);\r\n                if (releaseNodeList.length === 1) block.releaseTagString = releaseNodeList[0].releaseTagString;\r\n                if (releaseNodeList.length > 1)\r\n                    block.releaseTagString = releaseNodeList[0].releaseTagString + \" (~\" + releaseNodeList.slice(-1)[0].releaseTagString + \")\";\r\n                if (releaseNodeList.filter(node => node.isMajorRelease).length > 0) block.containsMajorRelease = true;\r\n                else block.containsMajorRelease = false;\r\n                // console.log(\"block\", releaseNodeList, block);\r\n\r\n                ////////////////////////////////// \r\n                // HA MERGED EDGES\r\n                if (block.containsMergeTraversedNodes) {\r\n                    let toBlockList = toBlockListMapByBlock[block.id];\r\n                    let linkVertical = d3.linkVertical().x(d => d.x).y(d => d.y);\r\n                    let linkHorizontal = d3.linkHorizontal().x(d => d.x).y(d => d.y);\r\n\r\n                    let dataset = toBlockList.map(toBlock => {\r\n                        // console.log(\"check\", clusterNode, toBlock.clusterNode, clusterNode === toBlock.clusterNode);\r\n                        let sx, sy, tx, ty;\r\n                        sx = xRectScale(block.x) + xBandScale.bandwidth() / 2;\r\n                        sy = yBandScale(clusterNode.y) + boxHeight / 2;\r\n                        tx = xRectScale(toBlock.x) + xBandScale.bandwidth() / 2;\r\n                        ty = yBandScale(toBlock.clusterNode.y) + boxHeight / 2;\r\n                        // console.log(\"coordinagtes, \", sx, sy, tx, ty, block.mergedToNodeList, toBlock.nodeList, block.mergedToNodeList.map(n => blockMapByNode[n.id]), blockMapByNode,)\r\n// if (toBlock.clusterNode.y === clusterNode.y) console.log(\"appeared horizon\", block, toBlock);\r\n                        return {\r\n                            source: { x: sx, y: sy, }, target: { x: tx, y: ty }, toBlock: toBlock,\r\n                            id:block.id + \"_\" + toBlock.id,\r\n                            linkFunc: (toBlock.clusterNode.y !== clusterNode.y ? linkVertical : linkHorizontal),\r\n                        }\r\n                    });\r\n                    clusterOverviewSvg.append(\"g\").selectAll(\"path\")\r\n                        .data(dataset)\r\n                        .enter()\r\n                        .append(\"path\")\r\n                        .attr(\"id\", d => \"mergedRelationLink_\" + block.id + \"_\" + d.toBlock.id)\r\n                        .attr(\"class\", \"mergedRelationLinks\")// + \"mergedRelationLinks_\" + d.id)\r\n                        .attr(\"d\", d => d.linkFunc(d))\r\n                        .attr(\"orgColor\", clusterColor)\r\n                        .attr(\"orgVisibility\", (showMergeLink ? \"visible\" : \"hidden\"))\r\n                        .style(\"pointer-events\", \"none\")\r\n                        .style(\"stroke-dasharray\", (\"1, 1\"))\r\n                        .style(\"stroke\", clusterColor)\r\n                        .style(\"stroke-width\", 2)\r\n                        .style(\"fill-opacity\", 0)\r\n                        .style(\"stroke-opacity\", \"0.6\")\r\n                        .style(\"visibility\", function () {\r\n                            return (showMergeLink ? \"visible\" : \"hidden\");\r\n                        });\r\n                }\r\n            });\r\n\r\n            let releaseBlockList = drawBlockList.filter(block => block.releaseTagString !== undefined && block.releaseTagString !== \"\");\r\n            let releases = clusterOverviewSvg.append(\"g\").selectAll(\"line\")\r\n                .data(releaseBlockList)\r\n                .enter();\r\n            releases.append(\"line\")\r\n                .attr(\"id\", d => d.releaseTagString)\r\n                .attr(\"stroke\", \"red\")\r\n                .style(\"stroke-width\", \"2px\")\r\n                .attr(\"x1\", d => xBandScale(d.x) + xBandScale.bandwidth())\r\n                .attr(\"x2\", d => xBandScale(d.x) + xBandScale.bandwidth())\r\n                .attr(\"y1\", yBandScale(clusterNode.y) - 3)\r\n                .attr(\"y2\", yBandScale(clusterNode.y) + yBandScale.bandwidth() + 3)\r\n                .style(\"stroke-dasharray\", \"2\")\r\n                ;\r\n            releases\r\n                .append(\"text\")\r\n                .attr(\"x\", d => xBandScale(d.x) + xBandScale.bandwidth())\r\n                .attr(\"y\", yBandScale(clusterNode.y))\r\n                .attr(\"text-anchor\", \"start\")\r\n                .style(\"font-size\", \"10px\")\r\n                .style(\"font-weight\", d => (d.containsMajorRelease ? \"bold\" : \"\"))\r\n                .text(d => d.releaseTagString)\r\n                ;\r\n\r\n            colorByBranchNo[clusterNode.cluster.nodeList[0].implicitBranchNo] = clusterColor;\r\n\r\n\r\n            /////////////////////////////////////\r\n            // BLOCKS BOX\r\n            let HALinkIds = clusterNode.blockList.reduce((prev, block) => prev.concat(block.HALinkIds), []);\r\n            blocksBox.append(\"rect\")\r\n                .attr(\"class\", \"blocksBox\")\r\n                .attr(\"id\", \"blocksBox\" + clusterNode.cluster.id)\r\n                .attr(\"style\", \"stroke:\" + clusterColor + \";fill-opacity:\" + defaultClusterOpacity + \";fill:\" + clusterColor)\r\n                .style(\"stroke-dasharray\", (clusterNode.isNonConfilctMerge ? 4 : 0))\r\n                .style(\"stroke-opacity\", (clusterNode.isNonConfilctMerge ? 0.3 : 1))\r\n                .style(\"stroke-width\", 1)\r\n                .style(\"cursor\", \"pointer\")\r\n                .attr(\"x\", x)\r\n                .attr(\"y\", y)\r\n                .attr(\"width\", boxWidth)\r\n                .attr(\"height\", boxHeight)\r\n                .attr(\"rx\", (boxWidth >= 10 ? 5 : 2))\r\n                .on(\"click\", function () {\r\n                    // BLOCK CLICK EVENT (NOT BRANCH)\r\n                    if (clusterNode.isNonConfilctMerge) return;\r\n\r\n                    let isMulti = showGroupSummaryFunc(-1, [clusterNode]);\r\n                    if (!isMulti) {\r\n                        d3.selectAll(\".blocksBox\").style(\"fill-opacity\", defaultClusterOpacity);\r\n                    }\r\n                    // d3.selectAll(\".blocksBox\").style(\"fill-opacity\", defaultClusterOpacity);\r\n                    d3.select(this).style(\"fill-opacity\", \"0.4\");\r\n                    d3.selectAll(\".branchUnderlines\").style(\"fill-opacity\", 0.4);\r\n                    // showBranchSummary(clusterNodesByBranchNo[branchNo], branchNo, width, height, ignoreFiles, summaryByLOC);\r\n                })\r\n                .on(\"mouseover\", function () {\r\n                    if (clusterNode.isNonConfilctMerge) return;\r\n                    d3.select(this).style(\"stroke-width\", 3);\r\n\r\n                    if (!useHeuristicMerge) moverLinks(HALinkIds);\r\n                })\r\n                .on(\"mouseleave\", function () {\r\n                    if (clusterNode.isNonConfilctMerge) return;\r\n                    d3.select(this).style(\"stroke-width\", 1);\r\n\r\n                    if (!useHeuristicMerge) mleaveLinks(HALinkIds);\r\n                })\r\n                ;\r\n            if (boxWidth >= 10) {\r\n                blocksBox\r\n                    .append(\"text\")\r\n                    .attr(\"x\", x + boxWidth)\r\n                    .attr(\"y\", y + yBandScale.bandwidth() - 1)\r\n                    .attr(\"text-anchor\", \"end\")\r\n                    .style(\"font-size\", \"12px\")\r\n                    .text(clusterNode.isNonConfilctMerge ? \"\" : clusterNode.cluster.nodeCount)// + clusterNode.cluster.mergedNodeCount)\r\n                    // .text(clusterNode.blockList.reduce((prev, cur) => (prev + cur.commitCount), 0))\r\n                    ;\r\n            }\r\n\r\n            ////////////////////////////////// \r\n            // EDGES\r\n            let dataset = [];\r\n            let child = clusterNode.cluster.child;\r\n            let parent = clusterNode.cluster.parent;\r\n            const pushDataSet = (node, isChild) => {\r\n                if (node === undefined) return true;\r\n\r\n                let sx, sy, tx, ty;\r\n\r\n                let [minNX, maxNX] = d3.extent(node.blockList.map(d => d.x));\r\n                if (isChild) {\r\n                    sx = x + boxWidth;\r\n                    sy = y + boxHeight / 2;\r\n                    tx = xRectScale(minNX);\r\n                    ty = yBandScale(node.y) + boxHeight / 2;\r\n                } else {\r\n                    sx = xRectScale(maxNX) + xBandScale.bandwidth();\r\n                    sy = yBandScale(node.y) + boxHeight / 2;\r\n                    tx = x;\r\n                    ty = y + boxHeight / 2;\r\n                }\r\n\r\n                dataset.push({\r\n                    source: { x: sx, y: sy, }, target: { x: tx, y: ty }\r\n                });\r\n            }\r\n\r\n            if (child !== undefined) pushDataSet(clusterNodeList.filter(d => d.cluster === child)[0], true);\r\n            if (parent !== undefined) pushDataSet(clusterNodeList.filter(d => d.cluster === parent)[0], false);\r\n            // console.log(\"datset.lnegth = \", clusterNode.cluster, child, parent, clusterNode.cluster.id, dataset.length, dataset)\r\n            blocksBox.selectAll(\"path\")\r\n                .data(dataset)\r\n                .enter()\r\n                .append(\"path\")\r\n                .attr(\"class\", \"edge\" + clusterNode.cluster.id)\r\n                .attr(\"d\", d3.linkHorizontal().x(d => d.x).y(d => d.y))\r\n                .style(\"pointer-events\", \"none\")\r\n                // .style(\"stroke-dasharray\", (\"1, 1\"))\r\n                .style(\"stroke\", clusterColor)\r\n                .style(\"stroke-width\", 2)\r\n                .style(\"fill-opacity\", 0)\r\n                .style(\"stroke-opacity\", \"0.3\")\r\n            ;\r\n        });\r\n\r\n    //////////////////////////////////////////////////\r\n    // UNDERLINES\r\n    Object.values(clusterNodesByBranchNo).forEach(branchClusterNodes => {\r\n        branchClusterNodes.sort((a, b) => a.blockList[0].x - b.blockList[0].x);\r\n        let branchNo = branchClusterNodes[0].cluster.nodeList[0].implicitBranchNo;\r\n        let elem = clusterOverviewSvg.append(\"g\");\r\n        let branchUnderlineWidth = xRectScale(branchClusterNodes.slice(-1)[0].blockList.slice(-1)[0].x) + xBandScale.bandwidth() - xRectScale(branchClusterNodes[0].blockList[0].x);\r\n\r\n        let HALinkIds = branchClusterNodes.reduce((p, clusterNode) =>\r\n            p.concat(clusterNode.blockList.reduce((prev, block) => prev.concat(block.HALinkIds), []))\r\n            , []);\r\n        \r\n        let branchNames = GitAnalyzer.getBranchNamesFromBranchClusterNodes(branchClusterNodes);\r\n\r\n        elem.append(\"rect\")\r\n            .attr(\"class\", \"branchUnderlines\")\r\n            .attr(\"id\", \"underlines\" + branchNo)\r\n            // .style(, \"stroke-width:\" + summaryLineHeight + \"px\")\r\n            .attr(\"x\", xRectScale(branchClusterNodes[0].blockList[0].x))\r\n            .attr(\"width\", branchUnderlineWidth)\r\n            .attr(\"y\", yBandScale(branchClusterNodes[0].y) + yBandScale.bandwidth())// + summaryLineHeight / 2)\r\n            .attr(\"rx\", (xRectScale(branchClusterNodes.slice(-1)[0].blockList.slice(-1)[0].x) + xBandScale.bandwidth() - xRectScale(branchClusterNodes[0].blockList[0].x) >= 10 ? 4 : 2))\r\n            .attr(\"height\", summaryLineHeight)\r\n            .style(\"fill\", colorByBranchNo[branchNo])\r\n            .style(\"fill-opacity\", \"0.4\")\r\n            .style(\"stroke\", colorByBranchNo[branchNo])\r\n            .style(\"stroke-opacity\", 0.4)\r\n            .style(\"cursor\", \"pointer\")\r\n            .on(\"click\", function () {\r\n                console.log(\"branch show\", branchNo);\r\n                showGroupSummaryFunc(branchNo, branchClusterNodes);\r\n                // d3.select(this)\r\n                //     .attr(\"y\", yBandScale(branchNodes[0].y) + yBandScale.bandwidth())\r\n                //     .attr(\"height\", summaryLineHeight);\r\n                d3.selectAll(\".branchUnderlines\").style(\"fill-opacity\", 0.4);\r\n                d3.select(this).style(\"fill-opacity\", 1);\r\n                d3.select(\".blocksBox\").style(\"fill-opacity\", defaultClusterOpacity);\r\n            })\r\n            .on(\"mouseover\", function (d) {\r\n                // d3.select(this)\r\n                //     .attr(\"y\", yBandScale(branchNodes[0].y))\r\n                //     .attr(\"height\", yBandScale.bandwidth() + summaryLineHeight);\r\n                d3.select(this).style(\"stroke-width\", \"3px\").style(\"stroke-opacity\", 1)//.style(\"fill-opacity\", 0);\r\n\r\n                if (!useHeuristicMerge) moverLinks(HALinkIds);\r\n                \r\n                d3.select(\"#clusterToolTip\")\r\n                    .html(branchNames.join(\"<br />\"))\r\n                    .style(\"visibility\", \"visible\")\r\n                    .style(\"opacity\", 0.8)\r\n                    .style(\"left\", (d3.event.pageX + 4) + \"px\")\r\n                    .style(\"top\", (d3.event.pageY - 2) + \"px\");\r\n            })\r\n            .on(\"mouseleave\", function (d) {\r\n                // d3.select(this)\r\n                // .attr(\"y\", yBandScale(branchNodes[0].y) + yBandScale.bandwidth())\r\n                // .attr(\"height\", summaryLineHeight);\r\n                d3.select(this).style(\"stroke-width\", \"1px\").style(\"stroke-opacity\", 0.4)//.style(\"fill-opacity\", 0.4);\r\n\r\n                if (!useHeuristicMerge) mleaveLinks(HALinkIds);\r\n                d3.select(\"#clusterToolTip\").style(\"visibility\", \"hidden\");\r\n            })\r\n            ;\r\n\r\n        elem.append(\"text\")\r\n            .attr(\"id\", \"foldButton\" + branchNo)\r\n            .attr(\"x\", Math.min(xRectScale(branchClusterNodes.slice(-1)[0].blockList.slice(-1)[0].x) + xBandScale.bandwidth(), width) + 2)\r\n            .attr(\"y\", yBandScale(branchClusterNodes[0].y) + yBandScale.bandwidth() + summaryLineHeight)\r\n            // .text(branchNo + \"<\")\r\n            // .text( (branchNodes[0].cluster.branches.length > 0 ? branchNodes[0].cluster.branches.map(b => b.split(\"/\").slice(-1)[0]) : \"\") + \"▼\")\r\n            .text(\r\n                // GitAnalyzer.getBranchNamesFromBranchClusterNodes(branchClusterNodes).join(\",\") + \r\n                \"▼\")\r\n            .style(\"font-size\", (branchUnderlineWidth > 30 ? \"14px\" : (branchUnderlineWidth > 8 ? \"12px\" : \"8px\")))\r\n            .style(\"font-weight\", \"bold\")\r\n            .style(\"pointer-events\", \"none\")\r\n            .attr(\"fill\", colorByBranchNo[branchNo])\r\n            .attr(\"text-anchor\", \"end\")\r\n    });\r\n\r\n    return [clusterNodesByBranchNo, width, height];\r\n}\r\n\r\nfunction getClusterNodeColorFromClusterNodes(clusterNodes) {\r\n    return getClusterNodeColor(clusterNodes.slice(-1)[0].cluster);\r\n}\r\n\r\nfunction getClusterNodeColor(clusterNode) {\r\n    return BranchColors[clusterNode.branchType];\r\n}\r\n\r\nfunction getFileSetForCluster(cluster, ignoreFiles) {\r\n    return cluster.nodeList.reduce((prev, node) => {\r\n        let fileNameList = Object.keys(node.commit.diffStat.files);\r\n        fileNameList.filter(f => ignoreFiles.indexOf(f) < 0).forEach(d => prev.add(d));\r\n        return prev;\r\n    }, new Set());\r\n}","import Button from '@material-ui/core/Button';\r\nimport * as d3 from 'd3';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport * as actions from '../modules';\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport ValueSlider from './ValueSlider';\r\nimport BranchSummary from './BranchSummary';\r\nimport { intersection } from \"lodash\";\r\n\r\nimport { drawClusters } from './CommitGraphDrawCluster';\r\nimport { buildClusterNodes } from './CommitGraphClustering';\r\n\r\nfunction highlightKeywordMatchBlock(searchResultList, currentClusterNodeList) {\r\n    // highlight blocks\r\n    let searchResultCommitSeqList = searchResultList.reduce((prev, cur) => {\r\n        prev.push(cur.seq);\r\n        return prev;\r\n    }, []);\r\n    d3.selectAll(\".matches\").remove();\r\n    if (searchResultList.length === 0) return;\r\n    \r\n    let matchSvg = d3.select(\"#clusters\").append(\"g\").attr(\"class\", \"matches\");\r\n    currentClusterNodeList\r\n        .reduce((prev, cur) => {\r\n            prev = prev.concat(cur.blockList);\r\n            return prev;\r\n        }, [])\r\n        .filter(block => d3.select(\"#block\" + block.id).size() > 0)\r\n        .forEach(block => {\r\n            if (intersection(searchResultCommitSeqList, block.nodeList.map(d => d.seq)).length > 0) {\r\n                let blockNode = d3.select(\"#block\" + block.id);\r\n                let x = +blockNode.attr(\"x\");\r\n                let y = +blockNode.attr(\"y\");\r\n                let width = +blockNode.attr(\"width\");\r\n                let height = +blockNode.attr(\"height\");\r\n\r\n                const over = 4;\r\n                matchSvg\r\n                    .append(\"ellipse\")\r\n                    .attr(\"class\", \"matchRect\")\r\n                    .attr(\"cx\", x + width / 2.0)\r\n                    .attr(\"cy\", y + height / 2.0)\r\n                    .attr(\"rx\", width / 2.0 + over)\r\n                    .attr(\"ry\", height / 2.0 + over)\r\n                    .style(\"fill\", \"red\")\r\n                    .style(\"fill-opacity\", \"0.2\")\r\n                    .style(\"stroke\", \"red\")\r\n                    .style(\"stroke-width\", \"2\")\r\n                    .style(\"pointer-events\", \"none\")\r\n                ;\r\n            }\r\n        });\r\n    \r\n    searchResultCommitSeqList.forEach ( seq => {\r\n        const commitRect = d3.select(\"#commitRect\" + seq);\r\n        const x = +commitRect.attr(\"x\");\r\n        const y = +commitRect.attr(\"y\");\r\n        const width = +commitRect.attr(\"width\");\r\n        const height = +commitRect.attr(\"height\");\r\n        const over = 2;\r\n\r\n        d3.select(\"#commitRects\")\r\n            .append(\"ellipse\")\r\n            .attr(\"class\", \"matchRect\")\r\n            .attr(\"cx\", x + width / 2.0)\r\n            .attr(\"cy\", y + height / 2.0)\r\n            .attr(\"rx\", width / 2.0 + over)\r\n            .attr(\"ry\", height / 2.0)\r\n            .style(\"fill\", \"red\")\r\n            .style(\"fill-opacity\", \"0.2\")\r\n            .style(\"stroke\", \"red\")\r\n            .style(\"stroke-width\", \"2\")\r\n            .style(\"pointer-events\", \"none\")\r\n        ;\r\n    });\r\n}\r\n\r\n/////////////////////\r\n// HOOK CLASS\r\nconst CommitGraph = (props) => {\r\n    // const ignoreFiles = [\"CHANGELOG.md\", \"version.txt\"];\r\n    const state = useSelector(state => state);\r\n    const layout = JSON.parse(JSON.stringify(state.layout));\r\n    const overviewWidth = layout.clusterOverviewWidth;\r\n    const width = layout.clusterOverviewWidth - layout.clusterOverviewSliderWidth;\r\n    const height = layout.clusterOverviewHeight;\r\n\r\n    // local layout vars\r\n    layout.height = height;\r\n    layout.sliderWidth = layout.clusterOverviewSliderWidth;\r\n    // layout.clusterOverviewMarginRight = 3;\r\n    layout.clusterOverviewWidth = layout.width - layout.sliderWidth// - this.clusterOverviewMarginRight;\r\n    layout.minBlockShow = 0;\r\n\r\n    const dispatch = useDispatch();\r\n    const updateClusterThreshold = (th) => dispatch(actions.updateClusterThreshold(th));\r\n    const updateClusterOverviewHeight = (height) => dispatch(actions.updateClusterOverviewHeight(height));\r\n    const [thresholdList, setThresholdList] = useState([]);\r\n\r\n    // info = [clusterNodes, isBranch]\r\n    let prevSelectedClusterNodesInfo = useRef([undefined, undefined]);\r\n    const [selectedClusterNodesInfo, setSelectedClusterNodesInfo] = useState([undefined, undefined]);\r\n\r\n    let clusteringResult = useRef();\r\n    let clusterNodesResult = useRef();\r\n    let clusterNodesByBranchNo = useRef();\r\n    let groupSvgWidth = useRef(0);\r\n    let totalStat = useRef([0, 0]);\r\n    \r\n    const showGroupSummaryFunc = (branchNo, clusterNodes) => {\r\n        // CONTROL MULTI CLICK (SHIFT)\r\n        let currentClusterNodes = prevSelectedClusterNodesInfo.current[1];\r\n// console.log(\"prev = \", prevSelectedClusterNodesInfo.current);\r\n        let multi = false;\r\n        if (d3.event !== null \r\n                && d3.event.shiftKey \r\n                && branchNo === -1\r\n                && prevSelectedClusterNodesInfo.current !== undefined && prevSelectedClusterNodesInfo.current[0] === -1 \r\n                && prevSelectedClusterNodesInfo.current[1][0].cluster.nodeList[0].implicitBranchNo === clusterNodes[0].cluster.nodeList[0].implicitBranchNo\r\n                ) {\r\n            // already chosen => pass\r\n            if (prevSelectedClusterNodesInfo.current[1].filter(d => d.cluster.id === clusterNodes[0].cluster.id).length === 0) {\r\n                currentClusterNodes.push(clusterNodes[0]);\r\n            }\r\n            multi = true;\r\n        } else {\r\n            currentClusterNodes = clusterNodes;\r\n        }\r\n        prevSelectedClusterNodesInfo.current = [branchNo, currentClusterNodes];\r\n        setSelectedClusterNodesInfo([branchNo, currentClusterNodes]);\r\n\r\n        if (branchNo >= 0) d3.select(\"#underlines\" + branchNo).style(\"fill-opacity\", 1);\r\n        \r\n        return multi;\r\n// console.log(\"showGroupSummaryFunc called\", [branchNo, clusterNodes])\r\n    }\r\n\r\n    const buildAndDrawClusterNodes = () => {\r\n        let [threshold, thresholdList, clusterList] = clusteringResult.current;\r\n\r\n        setSelectedClusterNodesInfo([undefined, undefined]);\r\n\r\n        clusterNodesResult.current = buildClusterNodes(props.gitAnalyzer, threshold, thresholdList, clusterList, state.groupingParameters.branchShowMapByType);\r\n        setThresholdList(clusterNodesResult.current[2]);\r\n\r\n        let svgHeight;\r\n        [clusterNodesByBranchNo.current, groupSvgWidth.current, svgHeight] = drawClusters(\r\n            layout, state.commitSeqSelection, clusterNodesResult.current[0], clusterNodesResult.current[1], \r\n            props.gitAnalyzer, state.groupingParameters.preferenceWeights, state.groupingParameters.threshold,\r\n            state.groupingParameters.nonConflictGroupingLevel, state.summaryParameters.hideFiles,\r\n            state.groupingParameters.useHeuristicMerge, state.showMergeLink, \r\n            showGroupSummaryFunc);\r\n        updateClusterOverviewHeight(svgHeight);\r\n        \r\n        totalStat.current = [\r\n            clusterNodesResult.current[0].filter(d => !d.isNonConfilctMerge).length,\r\n            clusterNodesResult.current[0].filter(d => !d.isNonConfilctMerge).reduce( (prev, d) => prev + d.cluster.nodeCount, 0),\r\n            // (useHeuristicMerge ? clusteringResult.current[0].filter(d => !d.isNonConfilctMerge).reduce( (prev, d) => prev + d.mergeNodes.nodeCount, 0) : 0)\r\n        ];\r\n\r\n// console.log(\"clusterNodesByBranchNo\", clusterNodesByBranchNo.current, selectedClusterNodesInfo[0] in clusterNodesByBranchNo.current)\r\n        if (!(selectedClusterNodesInfo[0] in clusterNodesByBranchNo.current)) {\r\n            setSelectedClusterNodesInfo([undefined, undefined]);\r\n            prevSelectedClusterNodesInfo.current = [undefined, undefined];\r\n        } else {\r\n            showGroupSummaryFunc(selectedClusterNodesInfo[0], clusterNodesByBranchNo.current[selectedClusterNodesInfo[0]]);\r\n            // setSelectedClusterNodesInfo([selectedClusterNodesInfo[0], ]);\r\n            // prevSelectedClusterNodesInfo.current()\r\n        }\r\n\r\n        highlight();\r\n    }\r\n\r\n    const highlight = () => {\r\n        if (state.highlightQuery !== undefined && state.highlightQuery.length > 0) {\r\n            let searchResultNodeList = GitAnalyzer.searchByKeywords(\r\n                clusterNodesResult.current[0].reduce( (prev, clusterNode) => prev.concat(clusterNode.cluster.nodeList.map(d => d)), []), \r\n                state.highlightQuery);\r\n            highlightKeywordMatchBlock(searchResultNodeList, clusterNodesResult.current[0]);\r\n        } else {\r\n            highlightKeywordMatchBlock([], undefined);\r\n        }\r\n    }\r\n\r\n    //////////////////////////////////////\r\n    // USE EFFECTS\r\n    //////////////////////////////////////\r\n    useEffect( () => {\r\n        setSelectedClusterNodesInfo([undefined, undefined]);\r\n    }, [state.globalCommitSeqSelectionByTemporalFilter]);\r\n\r\n    useEffect(() => {\r\n// console.log(\"called useEffect buildAndDrawClusterNodes\");\r\n// console.log(\"CHANGED USEEFFECT\", state, prevSelectedClusterNodesInfo, selectedClusterNodesInfo, props.gitAnalyzer.allNodeList.filter(d => d.mergeNodes.length > 0));\r\n        clusteringResult.current = props.gitAnalyzer.getOverviewClusters(\r\n                state.groupingParameters.threshold, state.commitSeqSelection, state.groupingParameters.preferenceWeights, \r\n                state.groupingParameters.keywordFilterList, state.groupingParameters.releaseBinningLevel, state.groupingParameters.useHeuristicMerge);\r\n        \r\n        buildAndDrawClusterNodes();\r\n    }, [\r\n        state.groupingParameters.useHeuristicMerge,\r\n        state.commitSeqSelection,\r\n        state.groupingParameters.threshold, \r\n        state.groupingParameters.nonConflictGroupingLevel, \r\n        state.groupingParameters.releaseBinningLevel,\r\n        state.groupingParameters.keywordFilterList,\r\n        state.groupingParameters.preferenceWeights,\r\n    ]);\r\n\r\n    useEffect( () => {\r\n        buildAndDrawClusterNodes();\r\n    }, [\r\n        state.groupingParameters.branchShowMapByType,\r\n    ]);\r\n\r\n    useEffect( () => {\r\n        highlight();\r\n    }, [state.highlightQuery,]);\r\n\r\n    useEffect( () => {\r\n        if(state.showMergeLink) {\r\n            d3.selectAll(\".mergedRelationLinks\")\r\n                .attr(\"orgVisibility\", \"visible\")\r\n                .style(\"visibility\", \"visible\");\r\n        }\r\n        else {\r\n            d3.selectAll(\".mergedRelationLinks\")\r\n                .attr(\"orgVisibility\", \"hidden\")\r\n                .style(\"visibility\", \"hidden\");\r\n        }\r\n    }, [state.showMergeLink,]);\r\n\r\n\r\n    return (\r\n        <div className=\"flexVerticalContainer\" style={{ width: overviewWidth }}>\r\n            <div className=\"flexContainer\">\r\n                <div width={layout.sliderWidth} align=\"right\">\r\n                    <ValueSlider\r\n                        name={\"clusterOverview\"}\r\n                        defaultStepValue={0}\r\n                        threshold={state.groupingParameters.threshold}\r\n                        changeThreshold={updateClusterThreshold}\r\n                        height={height}\r\n                        thresholdList={thresholdList}\r\n                        width={layout.sliderWidth} />\r\n                </div>\r\n                <div \r\n                    id=\"branchSummaryDiv\" \r\n                    style={{ position: \"relative\", zIndex: 1, float: \"left\" }} \r\n                    width={width} \r\n                    height={height}\r\n                    visible={\"visible\"}\r\n                >\r\n                    {/* {selectedClusterNodesInfo[0] !== undefined && selectedClusterNodesInfo[1] !== undefined  && */}\r\n                        <BranchSummary\r\n                            clusterNodes = {selectedClusterNodesInfo[1]}\r\n                            branchNo = {selectedClusterNodesInfo[0]}\r\n                            width = {groupSvgWidth.current}\r\n                            height = {state.layout.clusterOverviewHeight}\r\n                            hideFiles = {state.summaryParameters.hideFiles}\r\n                            summaryByLOC = {state.summaryParameters.summaryByLOC}\r\n                            useHeuristicMerge = {state.groupingParameters.useHeuristicMerge}\r\n                            branchShowMapByType = {state.groupingParameters.branchShowMapByType}\r\n                            gitAnalyzer = {props.gitAnalyzer}\r\n                        />\r\n                    {/* } */}\r\n                </div>\r\n                <div>\r\n                    <svg id=\"clusterOverviewSvg\" width={width} height={height}\r\n                        style={{ \"background\": \"#fafafa\", \"opacity\": \"0.95\" }}\r\n                    // transform={\"translate(\" + this.margin.left + \",\" + this.margin.top + \")\"}>           \r\n                    >\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n            <div className=\"flexContainer\" style={{ width: overviewWidth, justifyContent: \"space-between\", height: \"25px\" }}>\r\n                <div style={{width:layout.sliderWidth + 10}}></div>\r\n                <div style={{width:\"100%\"}}>\r\n                    ({totalStat.current[0]} CLUSTERS, {totalStat.current[1]} COMMITS)\r\n                </div>\r\n                <div align=\"right\" style={{width:\"300px\", paddingTop:\"5px\", paddingRight:\"5px\"}}>\r\n                    {selectedClusterNodesInfo[1] !== undefined &&\r\n                        <Button style={{ \"fontSize\": \"11px\", \"zIndex\": 10 }} size=\"small\" variant=\"outlined\" \r\n                            onClick={ () => {\r\n                                // if (selectedClusterNodesInfo[1] === undefined) return;\r\n                                const maxCaptureCount = 6;\r\n                                if (state.capturedSummaryInfoList.length >= maxCaptureCount) {\r\n                                    alert(\"# of max CAPTURE is \" + maxCaptureCount);\r\n                                    return;\r\n                                }\r\n                                dispatch(actions.addCapturedSummaryInfoList(\r\n                                    [\r\n                                        selectedClusterNodesInfo[1],\r\n                                        state.groupingParameters,\r\n                                    ]\r\n                                ));\r\n                                console.log(\"button click\", selectedClusterNodesInfo, selectedClusterNodesInfo[1], state.capturedSummaryInfoList.concat(selectedClusterNodesInfo[1]));\r\n                            }}>\r\n                            CAPTURE SELECTION\r\n                        </Button>\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n            <div className=\"flexContainer\">\r\n                \r\n            </div>\r\n            {/* <ClusterToolTip\r\n                    cluster={overCluster}\r\n                /> */}\r\n            <div id=\"clusterToolTip\" className=\"tooltip\" style={{ visibility: \"hidden\", opacity: 0.8 }}></div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default CommitGraph;","import * as d3 from 'd3';\r\nimport { ClusterBlock, ClusterNode } from \"./analyzer/GithruClasses\";\r\n\r\nexport function buildClusterNodes(gitAnalyzer, threshold, thresholdList, clusterList, branchShowMapByType) {\r\n    // console.log(\"clusterOverviewRender\", pref, threshold, releaseBinningLevel, gitAnalyzer, selection, keywordFilterList);\r\n    if (threshold === undefined) threshold = 0;\r\n    let clusterNodeList = [];\r\n    // let pointSet = new Set();\r\n    \r\n    let [startPoint, endPoint] = d3.extent(clusterList.reduce((prev, cluster) => prev.concat(cluster.nodeList), []).map(n => n.seq));\r\n    // let startPoint = clusterList[0].nodeList[0].seq;\r\n    // let endPoint = clusterList.slice(-1)[0].nodeList.slice(-1)[0].seq;\r\n    // let pointArrayForCheckEmptyBlock = d3.range(startPoint, endPoint + 1).map(d => false);\r\n    // console.log(\"nodeList = \", clusterList.map(c => c.nodeList), clusterList.reduce( (prev, cluster) => prev.concat(cluster.nodeList), []).map(n => n.seq).sort( (a, b) => a - b ));\r\n    let xArray = d3.range(startPoint, endPoint + 1).map(d => -1);\r\n    let clusterNodeMapByCluster = {};\r\n    let cIndex = 0;\r\n\r\n    clusterList.forEach(cluster => {\r\n        ////////////////////////////////\r\n        // FILTER branchShowMapByType\r\n        let branchType = gitAnalyzer.getClusterBranchType(cluster);\r\n        let noShowTypes = Object.entries(branchShowMapByType).filter(entry => entry[1] === false).map(e => e[0]);\r\n        // SKIP IF NO SHOW\r\n        if (noShowTypes.findIndex(t => t === branchType) >= 0) return;\r\n\r\n        ////////////////////////////////\r\n        // BUILD NODES\r\n        cluster.nodeList.forEach(n => xArray[n.seq - startPoint] = cIndex);\r\n        \r\n        let clusterNode = new ClusterNode(cluster);\r\n        clusterNode.branchType = branchType;\r\n        clusterNodeList.push(clusterNode);\r\n        clusterNodeMapByCluster[clusterNode.cluster.id] = clusterNode;\r\n        cIndex++;\r\n    });\r\n\r\n    // console.log(\"xArray\", xArray, startPoint, endPoint)\r\n    let fi, blockStartSeq = startPoint, blockIndex = 0, prevClusterIndexOfBlock = xArray[0];\r\n    for (fi = startPoint + 1; fi <= endPoint + 1; fi++) {\r\n        let currentClusterIndexOfBlock = xArray[fi - startPoint];\r\n        // console.log(\"looping!!\", fi - startPoint, prevClusterIndexOfBlock, currentClusterIndexOfBlock, \"blockIndex = \", blockIndex);\r\n\r\n        if (fi !== endPoint + 1 && currentClusterIndexOfBlock < 0) continue;\r\n        if (prevClusterIndexOfBlock === -1) prevClusterIndexOfBlock = currentClusterIndexOfBlock;\r\n\r\n        if (currentClusterIndexOfBlock !== prevClusterIndexOfBlock) {\r\n            // console.log(\"changed!!\", fi - startPoint, prevClusterIndexOfBlock, currentClusterIndexOfBlock, \"blockIndex = \", blockIndex);\r\n            // console.log(\"clusterNode?\", prevClusterIndexOfBlock, currentClusterIndexOfBlock, clusterNodeList[prevClusterIndexOfBlock])\r\n            // create and insert cluster node\r\n            let clusterNode = clusterNodeList[prevClusterIndexOfBlock];\r\n            let nodeList = clusterNode.cluster.nodeList.filter(n => (n.seq >= blockStartSeq && n.seq < fi));\r\n            let containsMergedNodes = nodeList.filter(node => node.mergeNodes.length > 0).length > 0;\r\n            let containsMergeTraversedNodes = nodeList.filter(node => node.isMergeTraversed).length > 0;\r\n            let mergedToNodeList = nodeList.filter(node => node.mergedToNode !== undefined).map(n => n.mergedToNode);\r\n            // console.log(\"mergedToNodeList\", nodeList, mergedToNodeList);\r\n            clusterNode.y = Math.min(...clusterNode.cluster.nodeList.map(d => d.implicitBranchNo));\r\n            clusterNode.blockList.push(new ClusterBlock(blockIndex, nodeList, blockStartSeq, fi, blockIndex, containsMergedNodes, containsMergeTraversedNodes, mergedToNodeList, clusterNode));\r\n            blockIndex++;\r\n            blockStartSeq = fi;\r\n        }\r\n        prevClusterIndexOfBlock = currentClusterIndexOfBlock;\r\n    }\r\n\r\nconsole.log(\"clusterNodeList Reslut\", clusterNodeList);\r\n\r\n    // compress vertical\r\n    clusterNodeList.sort((a, b) => (b.blockList.slice(-1)[0].x - a.blockList.slice(-1)[0].x));\r\n\r\n    let maxBlockIndex = blockIndex;\r\n    // let maxBlockIndex = pointList.length - 1;\r\n    let xMargin = 3;\r\n    let maxY = 1;\r\n    let yArray = Array.from({ length: maxBlockIndex }, d => maxBlockIndex);\r\n    clusterNodeList.filter(nodeList => nodeList.y !== 0).forEach(cn => {\r\n        if (cn.cluster.child !== undefined && clusterNodeMapByCluster[cn.cluster.child.id] !== undefined) return;\r\n        // if (cn.cluster.child !== undefined && (!showPullRequestBranch && cn.cluster.child.onPullRequestBranch)) return;\r\n        let startX = cn.blockList[0].x;\r\n        let endX = cn.blockList[cn.blockList.length - 1].x;\r\n        // let endX = Math.max(cn.blockList[cn.blockList.length - 1].x + xMargin, pointList.length - 1);\r\n        let y;\r\n        for (y = 1; y < maxY; y++) {\r\n            if (Math.max(0, yArray[y] - xMargin) > endX) {\r\n                break;\r\n            }\r\n        }\r\n        if (y === maxY) {\r\n            maxY++;\r\n        }\r\n        // yArray[y] = startX;\r\n\r\n        let endXOfClusterTree = startX;\r\n        let pc = cn.cluster.parent;\r\n        while (pc !== undefined) {\r\n            // there can be some cases when parent is hidden but grandparent is not... -_-\r\n            if (clusterNodeMapByCluster[pc.id] === undefined) {\r\n                pc = pc.parent;\r\n                continue;\r\n            }\r\n            endXOfClusterTree = clusterNodeMapByCluster[pc.id].blockList[0].x;\r\n            clusterNodeMapByCluster[pc.id].y = y;\r\n            pc = pc.parent;\r\n        }\r\n        yArray[y] = endXOfClusterTree;\r\n        cn.y = y;\r\n    });\r\n\r\n    return [clusterNodeList, maxBlockIndex, thresholdList];\r\n}","import React, { useState } from 'react';\r\nimport { useDispatch } from \"react-redux\";\r\nimport * as actions from '../modules';\r\n\r\n// import \"./Search.css\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import TextField from '@material-ui/core/TextField';\r\n\r\nimport Form from 'react-bootstrap/Form';\r\nimport { KeywordFilter } from './analyzer/GithruClasses';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textArea: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        marginBottom: \"8px\",\r\n        fontSize: \"12px\",\r\n        minHeight: \"50px\",\r\n    },\r\n}));\r\n\r\nconst KeywordTextAreaFilter = props => {\r\n    const classes = useStyles();\r\n    const [ includeFilterStr, setIncludeFilterStr ] = useState(\"\");\r\n    const [ excludeFilterStr, setExcludeFilterStr ] = useState(\"\");\r\n    const dispatch = useDispatch();\r\n\r\n    const parseFilterStr = (str, isIncludes) => {\r\n        console.log(\"parseFilterStr\", str, isIncludes, str.split(\"\\n\"))\r\n        return str.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\").map(line => {\r\n            let items = line.split(\":\");\r\n            if (items.length !== 2) {\r\n                return undefined;\r\n            } else {\r\n                return new KeywordFilter(isIncludes, items[ 0 ], items[ 1 ]);\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div align=\"center\" className=\"flexVerticalContainer\" style={{ width: \"100%\", alignItems: \"center\" }}>\r\n            {/* <TextField\r\n                style={{ \"fontSize\": \"11px\" }} \r\n                id=\"standard-basic\"\r\n                className={classes.textField}\r\n                margin=\"none\"\r\n                size=\"small\"\r\n\r\n                defaultValue={filters}\r\n                onChange={(event) => {\r\n                    console.log(\"addFilter!!\", event.target.value);\r\n                    setFilters(event.target.value);\r\n                }}\r\n            /> */}\r\n            <form className={classes.container} noValidate autoComplete=\"on\">\r\n                <Form.Control\r\n                    className={classes.textArea} as=\"textarea\" rows=\"2\"\r\n                    placeholder=\"INCLUDES (a:author, f:file, t:commitType, m:message)\"\r\n                    onChange={(event) => {\r\n                        setIncludeFilterStr(event.target.value);\r\n                    }}\r\n                />\r\n\r\n                <Form.Control\r\n                    className={classes.textArea} as=\"textarea\" rows=\"2\"\r\n                    placeholder=\"EXCLUDES (a:author, f:file, t:commitType, m:message)\"\r\n                    onChange={(event) => {\r\n                        setExcludeFilterStr(event.target.value);\r\n                    }}\r\n                />\r\n            </form>\r\n            <div className=\"flexVerticalContainer\" style={{ width: \"100%\", alignItems: \"center\" }}>\r\n                <Button\r\n                    style={{ \"fontSize\": \"11px\", width: \"95%\" }} size=\"small\" variant=\"outlined\"\r\n                    onClick={() => {\r\n                        let kfList = [];\r\n                        kfList = kfList.concat(parseFilterStr(includeFilterStr, true));\r\n                        kfList = kfList.concat(parseFilterStr(excludeFilterStr, false));\r\n\r\n                        if (kfList.filter(d => d === undefined).length > 0) {\r\n                            alert(\"insert [dataType]:[keyword]\");\r\n                            return;\r\n                        }\r\n                        console.log(\"keyword filters\", kfList);\r\n\r\n                        dispatch(actions.updateKeywordFilterList(kfList));\r\n                    }}>\r\n                    FILTER IN/OUT BY KEYWORDS\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default KeywordTextAreaFilter;","import React, { useState, } from 'react';\r\nimport \"./ValueSlider.css\";\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { PreferenceList } from './analyzer/GithruClasses';\r\nimport { cloneDeep } from 'lodash';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as actions from '../modules';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  icon: {\r\n    height: 35,\r\n    width: 35,\r\n    margin: theme.spacing(0),\r\n    color: \"skyblue\",\r\n  },\r\n  button: {\r\n      height:40,\r\n      width:40,\r\n      margin: theme.spacing(0),\r\n      padding: 0,\r\n      minWidth: 40\r\n  },\r\n  div: {\r\n    fontSize: \"16px\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  prefDiv: {\r\n    display: \"flex\",\r\n    fontSize: \"12px\",\r\n    width: \"100%\",\r\n    height: \"20px\",\r\n    padding: 0\r\n  },\r\n  prefName: {\r\n    // display: \"flex\",\r\n    fontWeight: \"bold\",\r\n    fontSize: \"10px\",\r\n    width: \"90px\",\r\n    textAlign: \"right\",\r\n    paddingRight: 10,\r\n    paddingTop: 5,\r\n    textTransform: \"uppercase\"\r\n  },\r\n  buttons: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    marginTop: \"8px\",\r\n    paddingLeft: \"8px\",\r\n    paddingRight: \"8px\"\r\n  }\r\n}));\r\n\r\nconst HorizontalSlider = withStyles({\r\n  root: {\r\n    color: \"#78909c\",\r\n    height: 8,\r\n    padding: \"10px 0px\"\r\n  },\r\n  thumb: {\r\n    height: \"8px\",\r\n    width: \"8px\",\r\n    marginTop: \"-3px\",\r\n  },\r\n  valueLabel: {\r\n    fontSize: \"10px\",\r\n    circle: {\r\n      width: \"10px\",\r\n      height: \"10px\",\r\n    }\r\n  },\r\n  // valueLabelCircle: {\r\n  //   width: \"10px\",\r\n  //   height: \"10px\",\r\n  // }\r\n  // thumb: {\r\n  //   height: 10,\r\n  //   width: 10,\r\n  //   backgroundColor: '#fff',\r\n  //   border: '2px solid currentColor',\r\n  //   // marginTop: -8,\r\n  //   // marginLeft: -12,\r\n  //   // '&:focus,&:hover,&$active': {\r\n  //   //   boxShadow: 'inherit',\r\n  //   // },\r\n  // },\r\n  // valueLabel: {\r\n  //   left: 'calc(-50% + 4px)',\r\n  // },\r\n  // track: {\r\n  //   height: 8,\r\n  //   borderRadius: 4,\r\n  // },\r\n  // rail: {\r\n  //   height: 8,\r\n  //   borderRadius: 4,\r\n  // },\r\n})(Slider);\r\n\r\nconst PreferenceSliders = props => {\r\n  const classes = useStyles();\r\n// console.log(\"??\", props.pref);\r\n  const preferenceWeights = useSelector(state => state.groupingParameters.preferenceWeights);\r\n  const [pref, setPref] = useState(preferenceWeights);\r\n\r\n  const width = useSelector(state => state.layout.leftPaneWidth);\r\n  const dispatch = useDispatch();\r\n\r\n// console.log(\"PrefSliders ---\", PreferenceList);\r\n\r\n  // useEffect( () => {\r\n  //   setPref(preferenceWeights);\r\n  // }, [preferenceWeights]);\r\n\r\n  // if (pref === undefined) return null;\r\n\r\n  return (\r\n    <div id=\"preferenceSliders\" className=\"flexVerticalContainer\" style={{ width: width, marginRight:10 }}>\r\n      {PreferenceList.map((prefName, i) => (\r\n        <div key={i} className={classes.prefDiv}>\r\n          <div className={classes.prefName}>\r\n            {prefName.startsWith(\"commit\") ? \"commit \" + prefName.split(\"commit\")[1] : prefName}\r\n          </div>\r\n          \r\n          <div style={{width:\"150px\"}}>\r\n            <HorizontalSlider\r\n              value={pref[prefName]}\r\n              min={0}\r\n              max={1}\r\n              step={0.1}\r\n              valueLabelDisplay=\"auto\"\r\n              onChangeCommitted={(event, newValue) => {\r\n                let newPref = cloneDeep(pref);\r\n                newPref[prefName] = newValue;\r\n                setPref(newPref);\r\n              }}\r\n              onChange={(event, newValue) => {\r\n                let newPref = cloneDeep(pref);\r\n                newPref[prefName] = newValue;\r\n                setPref(newPref);\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      ))}\r\n      {/* <div style={{height:10}}/> */}\r\n      <div className={classes.buttons} >\r\n          <Button style={{ \"fontSize\": \"11px\", \"flex\": 1, \"marginRight\": \"8px\"}}variant=\"outlined\" size=\"small\" onClick={() => {\r\n              let newPref = cloneDeep(pref);\r\n              PreferenceList.forEach(d => newPref[d] = 1);\r\n              setPref(newPref);\r\n          }}>\r\n            RESET\r\n          </Button>\r\n          <Button style={{ \"fontSize\": \"11px\"}} size=\"small\" variant=\"outlined\" \r\n            onClick={() => dispatch(actions.updatePreferenceWeights(pref))}>\r\n            CHANGE PREFERENCES\r\n          </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PreferenceSliders;","import React, { useState, Fragment } from 'react';\r\nimport * as actions from '../modules';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Checkbox } from '@material-ui/core';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport \"./ManageParameter.css\"\r\nimport Form from 'react-bootstrap/Form';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        margin: \"0px\",\r\n        padding: \"2px\",\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textArea: {\r\n        marginTop: \"8px\",\r\n        marginBottom: \"8px\",\r\n        minHeight: \"50px\",\r\n        fontSize: \"12px\",\r\n    },\r\n}));\r\n\r\nconst ManageParameters = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const {\r\n        width,\r\n        releaseBinningLevel,\r\n        nonConflictGroupingLevel,\r\n        summaryByLOC,\r\n        hideFiles,\r\n        useHeuristicMerge,\r\n        // showPullRequestBranch,\r\n        showMergeLink,\r\n        branchShowMapByType,\r\n    } = useSelector(state => ({\r\n        width: state.layout.leftPaneWidth,\r\n        releaseBinningLevel: state.groupingParameters.releaseBinningLevel,\r\n        nonConflictGroupingLevel: state.groupingParameters.nonConflictGroupingLevel,\r\n        useHeuristicMerge: state.groupingParameters.useHeuristicMerge,\r\n        // showPullRequestBranch: state.groupingParameters.showPullRequestBranch,\r\n        branchShowMapByType: state.groupingParameters.branchShowMapByType,\r\n        summaryByLOC: state.summaryParameters.summaryByLOC,\r\n        hideFiles: state.summaryParameters.hideFiles,\r\n        showMergeLink: state.showMergeLink,\r\n    }));\r\n\r\n    // console.log(\"hidefile\", hideFiles)\r\n    const [ hideFilesStr, setHideFilesStr ] = useState(hideFiles.join(\"\\n\"));\r\n    const dispatch = useDispatch();\r\n\r\n    const parseFilterStr = (str, isIncludes) => {\r\n        // console.log(\"parseFilterStr\", str, isIncludes, str.split(\"\\n\"))\r\n        return str.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\");\r\n    }\r\n\r\n    const defaultHideFilesValue = \"CHANGELOG.md\\nversion.txt\"\r\n\r\n    return (\r\n        <div className=\"flexVerticalContainer\">\r\n\r\n            {/* <SectionTitle title=\"\" /> */}\r\n            {/* <div style={{ fontSize: \"12px\" }}>\r\n                <Checkbox\r\n                    className={classes.root}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    checked={(!showPullRequestBranch)}\r\n                    onChange={() => {\r\n                        dispatch(actions.updateShowPullRequestBranch(!showPullRequestBranch));\r\n                    }}\r\n                />\r\n                Hide Pull Request Branches\r\n            </div> */}\r\n            <SectionTitle title=\"BRANCH TYPE FILTER\" />\r\n            <div className=\"parameter-body\">\r\n                {[\"EXPLICIT\", \"IMPLICIT\", \"PR_OPEN\", ].map( (type, i) => {\r\n                    let bool = branchShowMapByType[type];\r\n                    return (<Fragment key={i}>\r\n                        <Checkbox\r\n                            className={classes.root}\r\n                            size=\"small\"\r\n                            color=\"default\"\r\n                            checked={bool}\r\n                            onChange={() => {\r\n                                dispatch(actions.updateBranchShowMapByType([type, !bool]));\r\n                            }}\r\n                        />{type}\r\n                    </Fragment>);\r\n                })}\r\n            </div>\r\n            <div className=\"parameter-body\">\r\n                {[\"PR_MERGED\", \"PR_CLOSED\"].map( (type, i) => {\r\n                    let bool = branchShowMapByType[type];\r\n                    return (<Fragment key={i}>\r\n                        <Checkbox\r\n                            className={classes.root}\r\n                            size=\"small\"\r\n                            color=\"default\"\r\n                            checked={bool}\r\n                            onChange={() => {\r\n                                dispatch(actions.updateBranchShowMapByType([type, !bool]));\r\n                            }}\r\n                        />{type}\r\n                    </Fragment>);\r\n                })}\r\n            </div>\r\n            <SectionTitle title=\"CLUSTERING\" />\r\n            <div className=\"parameter-body\">\r\n                <Checkbox\r\n                    className={classes.root}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    checked={(useHeuristicMerge)}\r\n                    onChange={() => {\r\n                        dispatch(actions.updateUseHeuristicMerge(!useHeuristicMerge));\r\n                    }}\r\n                />\r\n                Apply CONTEXTUAL squash MERGE\r\n            </div>\r\n            <div style={{\r\n                marginLeft: \"17px\",\r\n                fontSize: \"12px\",\r\n                display: (!useHeuristicMerge ? \"\" : \"none\")\r\n            }}>\r\n                <Checkbox\r\n                    className={classes.root}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    checked={(!showMergeLink)}\r\n                    onChange={() => {\r\n                        dispatch(actions.updateShowMergeLink(!showMergeLink));\r\n                    }}\r\n                />\r\n                    Hide CONTEXTUAL squash MERGE Edges\r\n            </div>\r\n            <div className=\"parameter-body\">\r\n                <Checkbox\r\n                    className={classes.root}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    checked={(nonConflictGroupingLevel > 0)}\r\n                    onChange={() => {\r\n                        let val = (nonConflictGroupingLevel > 0 ? 0 : 1);\r\n                        dispatch(actions.updateNonConflictGroupingLevel(val));\r\n                    }}\r\n                />\r\n                Non-Conflict Clustering\r\n            </div>\r\n            <div className=\"parameter-body\">\r\n                <Checkbox\r\n                    className={classes.root}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    checked={(releaseBinningLevel === 1)}\r\n                    onChange={() => {\r\n                        let val = (releaseBinningLevel === 1 ? 0 : 1);\r\n                        dispatch(actions.updateReleaseBinningLevel(val));\r\n                    }}\r\n                />\r\n                CUT at RELEASE\r\n            </div>\r\n            <div className=\"parameter-body\">\r\n                <Checkbox\r\n                    className={classes.root}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    checked={(releaseBinningLevel === 2)}\r\n                    onChange={() => {\r\n                        let val = (releaseBinningLevel === 2 ? 0 : 2);\r\n                        dispatch(actions.updateReleaseBinningLevel(val));\r\n                    }}\r\n                />\r\n                CUT at MAJOR RELEASE\r\n            </div>\r\n            <div className=\"parameter-body\" align=\"right\">\r\n                <span\r\n                    style={{ \"fontSize\": \"11px\", width: \"100%\", textDecoration: \"underline\", cursor:\"pointer\" }}\r\n                    onClick={() => {\r\n                        dispatch(actions.updateUseHeuristicMerge(false));\r\n                        [\"EXPLICIT\", \"IMPLICIT\", \"PR_OPEN\", \"PR_MERGED\", \"PR_CLOSED\"].map( type => dispatch(actions.updateBranchShowMapByType([type, true])));\r\n                    }}>\r\n                    SHOW ALL BRANCHES/NODES\r\n                </span>\r\n            </div>\r\n            {/* <div style={{ height: \"20px\" }}></div> */}\r\n            <SectionTitle title={\"SUMMARY\"} />\r\n            <div className=\"parameter-body\">\r\n                <Checkbox\r\n                    className={classes.root}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    checked={(summaryByLOC)}\r\n                    onChange={() => {\r\n                        console.log(\"summaryByLOC\", summaryByLOC);\r\n                        dispatch(actions.updateSummaryByLOC(!summaryByLOC));\r\n                    }}\r\n                />\r\n                Summary by CLOC\r\n            </div>\r\n            <div className=\"flexVerticalContainer\" style={{\r\n                fontSize: \"12px\",\r\n                paddingLeft: \"8px\",\r\n                paddingRight: \"8px\"\r\n            }}>\r\n                <form className={classes.container} noValidate autoComplete=\"on\">\r\n                    <Form.Control\r\n                        className={classes.textArea}\r\n                        as=\"textarea\" rows=\"2\"\r\n                        placeholder=\"INSERT FILE NAMES\"\r\n                        defaultValue={hideFilesStr}\r\n                        onChange={(event) => {\r\n                            setHideFilesStr(event.target.value);\r\n                        }}\r\n                    />\r\n                </form>\r\n                <div style={{ width: \"100%\", alignItems: \"center\" }}>\r\n                    <Button\r\n                        style={{ \"fontSize\": \"11px\", width: \"100%\" }} size=\"small\" variant=\"outlined\"\r\n                        onClick={() => {\r\n                            let fList = hideFilesStr.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\");\r\n                            console.log(\"hide files\", fList);\r\n                            dispatch(actions.updateHideFiles(fList));\r\n                        }}>\r\n                        Hide files on Summary\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default ManageParameters;\r\n\r\nconst SubTitle = (props) => {\r\n    return <div style={{\r\n        fontSize: '13px',\r\n        fontWeight: '500',\r\n        marginTop: \"5px\",\r\n        fontWeight: \"600\",\r\n        fontSize: \"0.75rem\"\r\n    }}>{props.title}</div>\r\n}\r\n\r\nconst SectionTitle = (props) => {\r\n    return <div style={{\r\n        fontWeight: \"500\",\r\n        // fontSize: \"0.86rem\",\r\n        borderBottom: \"1px solid #ccc\",\r\n        paddingLeft: \"3px\",\r\n        paddingBottom: \"1px\",\r\n        marginBottom: \"4px\",\r\n        marginTop: \"4px\"\r\n    }}>{props.title}</div>\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport { Table, TableRow, TableCell, TableBody, Button } from '@material-ui/core';\r\nimport * as d3 from 'd3';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as actions from '../modules';\r\nimport { AttributeColors } from './ColorClasses';\r\nimport './InformationFragments.css';\r\nimport { DataTypeByNameMap } from './analyzer/GithruClasses';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    table: {\r\n        padding: 1,\r\n    },\r\n    tableCell: {\r\n        fontSize: \"12px\",\r\n        paddingLeft: 2,\r\n        paddingRight: 1,\r\n        paddingTop: 1,\r\n        paddingBottom: 1,\r\n        maxHeight: \"20px\",\r\n        // verticalAlign: \"text-top\",\r\n        // minWidth: \"40px\"\r\n    },\r\n    favorites: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        maxWidth: \"100%\",\r\n        overflowY: \"auto\",\r\n        // maxHeight: \"300px\",\r\n        width: \"100%\",\r\n        // minHeight: \"300px\",\r\n        padding: 2,\r\n    },\r\n    history: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        // maxHeight: \"450px\",\r\n        maxWidth: \"100%\",\r\n        width: \"100%\",\r\n        overflowY: \"auto\",\r\n    },\r\n}));\r\n\r\nconst InformationFragments = (props) => {\r\n    const classes = useStyles();\r\n    const { width } = props;\r\n    const buttonWidth = 15;\r\n\r\n    const dispatch = useDispatch();\r\n    const { fragmentHistory, favoriteFragments, currentCapturedSummaryInfoId } = useSelector(state => state);\r\n    const addFavoriteFragment = (f) => dispatch(actions.registerFavoriteFragment(f));\r\n    const removeFavoriteFragment = (f) => dispatch(actions.unregisterFavoriteFragment(f));\r\n    const clearFragment = () => dispatch(actions.clearFragments());\r\n\r\n    const addInterestsItems = (fragments) => {\r\n        dispatch(actions.addItemsToCapturedSummaryInfo(fragments));\r\n        // console.log(\"updated?\", capturedSummaryInfoList, fragments)\r\n    };\r\n\r\n\r\n    // console.log(classes.favorites, favoriteFragments, props);\r\n    return (\r\n        <div className=\"flexVerticalContainer\">\r\n            {\r\n                (favoriteFragments.length > 0 || fragmentHistory.length > 0) ? <>\r\n\r\n                    <div className=\"fragment-list\">\r\n                        {\r\n                            favoriteFragments.map((item, i) => {\r\n                                return <div className=\"fragment-row\" key={i}>\r\n                                    <div className=\"fragment-cell-title\" cursor=\"pointer\">\r\n                                        <span\r\n                                        style={{\r\n                                            color: AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ],\r\n                                            fontSize: \"12px\",\r\n                                            overflow: \"hidden\",\r\n                                            fontWeight: \"bold\",\r\n                                        }}\r\n                                        onMouseOver={(event) => event.target.style.color = \"red\"}\r\n                                        onMouseOut={(event) => event.target.style.color = AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ]}\r\n                                        onClick={() => addInterestsItems([ item ], currentCapturedSummaryInfoId)}\r\n                                    >{GitAnalyzer.getTextValue(item[ 0 ], item[ 1 ])}</span>\r\n                                    </div>\r\n                                    <div className=\"fragment-cell-pin\"\r\n                                        cursor=\"pointer\"\r\n                                        onClick={() => removeFavoriteFragment(item)}>\r\n                                        <svg\r\n                                            x=\"0px\" y=\"0px\" viewBox=\"0 0 476.258 476.258\"\r\n                                            width=\"15px\" height=\"15px\"\r\n                                            fill=\"black\" stroke=\"#000000\" strokeWidth=\"0\">\r\n                                            <path d=\"M476.235,119.133L357.158,0L206.936,134.654c-19.906-7.082-39.446-10.666-58.205-10.666 c-31.648,0-58.709,10.364-78.259,29.972l-10.574,10.607l115.305,115.298L0.023,455.045l21.213,21.213l175.18-175.181 l115.325,115.318l10.606-10.614c16.936-16.948,27.105-39.913,29.41-66.414c1.905-21.911-1.6-45.947-10.156-70.022L476.235,119.133z M434.942,120.257L323.736,244.33l-91.784-91.811L356.025,41.303L434.942,120.257z M310.52,372.75L103.519,165.76 c12.401-7.74,27.764-11.773,45.212-11.773c16.56,0,34.831,3.715,53.014,10.748l109.781,109.813 C326.418,312.819,325.869,348.207,310.52,372.75z\"></path>\r\n                                        </svg>\r\n                                    </div>\r\n                                </div>\r\n                            })\r\n                        }\r\n                    </div>\r\n                    {favoriteFragments.length > 0 ? <>\r\n                        <div>\r\n                            <Button \r\n                                style={{ \"fontSize\": \"11px\", \"zIndex\": 10, width: \"100%\", marginBottom: \"12px\", background: \"white\" }} \r\n                                size=\"small\" \r\n                                variant=\"outlined\"\r\n                                // className=\"control-button\" \r\n                                size=\"small\" variant=\"outlined\" \r\n                                onClick={() => addInterestsItems(favoriteFragments)}>\r\n                                    INSPECT ALL PINS\r\n                            </Button>\r\n                        </div>\r\n                    </> : \"\"}\r\n                    {/* <div className=\"flexContainer\" style={{ justifyContent: \"space-between\", marginBottom: \"12px\" }}>\r\n                        <Button className=\"control-button\" size=\"small\" variant=\"outlined\" onClick={() => addInterestsItems(favoriteFragments)}>\r\n                            SELECT ALL PINS\r\n                        </Button>\r\n                    </div> */}\r\n                    <div className=\"fragment-list\">\r\n                        {\r\n                            fragmentHistory.map((item, i) => {\r\n                                let isPinned = (favoriteFragments.findIndex(d => d[ 0 ] === item[ 0 ] && d[ 1 ] === item[ 1 ]) >= 0);\r\n                            \r\n                                return (\r\n                                    <div className=\"fragment-row\" \r\n                                        key={i}\r\n                                        onMouseOver={() => d3.select(\"#fragmentPin\" + i).style(\"visibility\", \"visible\")}\r\n                                        onMouseOut={() => d3.select(\"#fragmentPin\" + i).style(\"visibility\", \"hidden\")}\r\n                                    >\r\n                                        <div className=\"fragment-cell-title\" cursor=\"pointer\">\r\n                                            <span\r\n                                                style={{\r\n                                                    color: AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ],\r\n                                                    fontSize: \"12px\",\r\n                                                    overflow: \"hidden\",\r\n                                                    fontWeight: (isPinned ? \"bold\" : \"\"),\r\n                                                }}\r\n                                                onMouseOver={(event) => event.target.style.color = \"red\"}\r\n                                                onMouseOut={(event) => event.target.style.color = AttributeColors[ DataTypeByNameMap[item[0]] ][ 0 ]}\r\n                                                onClick={() => { console.log(\"HERE???\"); addInterestsItems([ item ]) }}\r\n                                            >\r\n                                                {/* {GitAnalyzer.getTextValue(item[ 0 ], item[ 1 ]).replace(/\\//g, '/ ')} */}\r\n                                                {GitAnalyzer.getTextValue(item[ 0 ], item[ 1 ])}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div className=\"fragment-cell-pin\"\r\n                                            id={\"fragmentPin\"+i}\r\n                                            cursor=\"pointer\"\r\n                                            style={{visibility:\"hidden\"}}\r\n                                            onClick={() => addFavoriteFragment(item)}>\r\n                                            <svg\r\n                                                x=\"0px\" y=\"0px\" viewBox=\"0 0 476.258 476.258\"\r\n                                                width=\"15px\" height=\"15px\"\r\n                                                fill=\"black\" stroke=\"#000000\" strokeWidth=\"0\">\r\n                                                <path d=\"M476.235,119.133L357.158,0L206.936,134.654c-19.906-7.082-39.446-10.666-58.205-10.666 c-31.648,0-58.709,10.364-78.259,29.972l-10.574,10.607l115.305,115.298L0.023,455.045l21.213,21.213l175.18-175.181 l115.325,115.318l10.606-10.614c16.936-16.948,27.105-39.913,29.41-66.414c1.905-21.911-1.6-45.947-10.156-70.022L476.235,119.133z M434.942,120.257L323.736,244.33l-91.784-91.811L356.025,41.303L434.942,120.257z M310.52,372.75L103.519,165.76 c12.401-7.74,27.764-11.773,45.212-11.773c16.56,0,34.831,3.715,53.014,10.748l109.781,109.813 C326.418,312.819,325.869,348.207,310.52,372.75z\"></path>\r\n                                            </svg>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        }\r\n                    </div>\r\n                    <div>\r\n                    {/* style={{ justifyContent: \"space-between\", marginBottom: \"12px\" }}> */}\r\n                        <Button \r\n                            style={{ \"fontSize\": \"11px\", \"zIndex\": 10, width: \"100%\", background: \"white\" }} \r\n                            size=\"small\" \r\n                            variant=\"outlined\"\r\n                            // className=\"control-button\" \r\n                            size=\"small\" variant=\"outlined\" onClick={clearFragment}>\r\n                            CLEAR FRAGMENTS\r\n                        </Button>\r\n                    </div>\r\n                </> : <div style={{ color: 'white' }}>Select information fragments</div>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InformationFragments;","import React, { useState } from 'react';\r\nimport './SidePanelContentUnit.css';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\n\r\nexport const SidePanelContentUnit = (props) => {\r\n    const [show, setShow] = useState( (props.show !== undefined ? props.show : true) );\r\n\r\n    return (\r\n        <div style={props.style}>\r\n            <div className=\"sidepanel-container-header flexContainer\">\r\n                <div>{props.title}</div>\r\n                <div\r\n                    style={{cursor:\"pointer\"}}\r\n                    onClick={ () => setShow(!show)}\r\n                >{show ? <RemoveIcon fontSize=\"small\"/>\r\n                 : <AddIcon fontSize=\"small\" />}</div>\r\n            </div>\r\n            <div className=\"sidepanel-container-content\">\r\n                {show ? props.children : \"\"}\r\n            </div>\r\n        </div>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as d3 from 'd3';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport * as actions from '../modules';\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport { Table, TableRow, TableCell, TableBody, Checkbox, Button } from '@material-ui/core';\r\nimport { SidePanelContentUnit } from './container/SidePanelContentUnit';\r\nimport './CaptureTab.css';\r\nimport { changeRGBColorByOpacity } from './ColorClasses';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        margin: \"0px\",\r\n        padding: \"2px\",\r\n    },\r\n    table: {\r\n        padding: 1,\r\n    },\r\n    tableCell: {\r\n        fontSize: \"12px\",\r\n        paddingLeft: 2,\r\n        paddingRight: 1,\r\n        paddingTop: 1,\r\n        paddingBottom: 1,\r\n        // maxHeight: \"20px\",\r\n        // verticalAlign: \"text-top\",\r\n        // minWidth: \"40px\"\r\n    },\r\n}));\r\n\r\nconst CaptureTab = (props) => {\r\n    const classes = useStyles();\r\n    const { capturedSummaryInfoList, scrollToRight } = useSelector(state => state);\r\n    const [ checkedDic, setCheckedDic ] = useState({});\r\n    const dispatch = useDispatch();\r\n\r\n    // setCheckedListForCompare()\r\n    // console.log(\"captureTab render\", capturedSummaryInfoList, checkedDic);\r\n\r\n    return (<SidePanelContentUnit title=\"Captured Cluster(s)\" style={{ background: \"#7a7c90\" }}>\r\n        <div\r\n            id=\"captureTabDiv\"\r\n            className=\"flexVerticalContainer\"\r\n            style={{\r\n                // width: props.width + \"px\",\r\n                width: \"100%\",\r\n                fontSize: \"12px\",\r\n                height: props.height,\r\n            }}\r\n        >\r\n            {(capturedSummaryInfoList.length > 0 ? \r\n                <>\r\n                {capturedSummaryInfoList.map( (capturedInfo, i) => {\r\n                    let { id, clusterNodes, groupingParameters } = capturedInfo;\r\n\r\n                    const firstCommit = clusterNodes[ 0 ].cluster.nodeList[ 0 ].commit;\r\n                    const endCommit = clusterNodes.slice(-1)[ 0 ].cluster.nodeList.slice(-1)[ 0 ].commit;\r\n\r\n                    const getCommitName = (commit) => {\r\n                        if (commit.tags !== undefined && commit.tags.length > 0) return commit.tags[0];\r\n                        if (commit.branches !== undefined && commit.branches.length > 0) \r\n                            return (commit.branches[0].startsWith(\"origin/\") ? commit.branches[0].split(\"origin/\")[1] : commit.branches[0]);\r\n                        return \"#\" + commit.id.substring(0, 6);\r\n                    };\r\n\r\n                    return <div className=\"element\" key={id}>\r\n                        <div className=\"left-strip\" style={{\r\n                            background: changeRGBColorByOpacity(clusterNodes[ 0 ].color, 0.4),\r\n                        }}>\r\n                            <div>#{id}</div>\r\n                            <Checkbox\r\n                                id={\"capCheckBox\" + id}\r\n                                className={classes.root}\r\n                                size=\"small\"\r\n                                color=\"default\"\r\n                                onChange={(event) => {\r\n                                    let n = { ...checkedDic };\r\n                                    n[ id ] = event.target.checked;\r\n                                    setCheckedDic(n);\r\n                                }}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"content\" style={{ cursor: \"default\" }} /*onClick={() => {\r\n                            dispatch(actions.updateCurrentCapturedSummaryInfoId(id));\r\n                            d3.selectAll(\".detailTabPanel\").style(\"display\", \"none\");\r\n                            d3.select(\"#detailTabPanel\" + id).style(\"display\", \"\");\r\n                            d3.select(\"#comparePane\").style(\"display\", \"none\");\r\n\r\n                            dispatch(actions.updateScrollToRight(true));\r\n                            window.scrollTo(4000, 0);\r\n                        }*/>\r\n                            <div className=\"element-header\">\r\n                                <div className='element-branch-name'>\r\n                                    {GitAnalyzer.getBranchNamesFromBranchClusterNodes(clusterNodes)[ 0 ]}\r\n                                </div>\r\n\r\n                                <DeleteIcon\r\n                                    size=\"small\"\r\n                                    color=\"action\"\r\n                                    className=\"element-remove-button\"\r\n                                    onClick={() => {\r\n                                        let n = { ...checkedDic };\r\n                                        delete n[ id ];\r\n                                        setCheckedDic(n);\r\n                                        dispatch(actions.removeCapturedSummaryInfoList(i));\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"element-body\">\r\n                                <div style={{ width: \"100%\", fontSize: \"8px\" }}>\r\n                                    {GitAnalyzer.trimYYYYMMDD(firstCommit.date).substring(2, 11)} ~ {GitAnalyzer.trimYYYYMMDD(endCommit.date).substring(2, 11)}\r\n                                    <br />({getCommitName(firstCommit)}) ~ ({getCommitName(endCommit)})\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                })}\r\n                </>\r\n                : <div style={{ color: 'white' }}>Select cluster(s) for capture</div>\r\n            )}\r\n        </div>\r\n        <div>\r\n            <Button \r\n                style={{ \"fontSize\": \"11px\", \"zIndex\": 10, width: \"100%\", background: \"white\" }} \r\n                size=\"small\" \r\n                variant=\"outlined\"\r\n                disabled={capturedSummaryInfoList.length < 2}\r\n                onClick={() => {\r\n                    let checkedList = Object.entries(checkedDic).filter(d => d[ 1 ]).map(d => d[ 0 ]);\r\n                    if (checkedList.length !== 2) {\r\n                        alert(\"CHOOSE 2 SUMMARIES!\");\r\n                        return;\r\n                    }\r\n                    let cList = checkedList.map(index => capturedSummaryInfoList[ capturedSummaryInfoList.findIndex(fi => fi.id === +index) ]);\r\n                    console.log(\"cList\", cList);\r\n                    dispatch(actions.updateCapturedSummaryInfoListForCompare(cList));\r\n\r\n                    d3.select(\"#comparePane\").style(\"display\", \"\");\r\n                    d3.selectAll(\".detailTabPanel\").style(\"display\", \"none\");\r\n\r\n                    // window.scrollTo(4000, 0);\r\n                }}>\r\n                COMPARE\r\n            </Button>\r\n        </div>\r\n\r\n    </SidePanelContentUnit>\r\n    );\r\n}\r\n\r\nexport default CaptureTab;","import * as d3 from 'd3';\r\nimport WordCloud from 'wordcloud';\r\n\r\nfunction processKey(word) {\r\n    if (word === undefined) return word;\r\n    return word.replace(/[`~! @#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\r\n    // return replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(word, \".\", \"\"), \">\", \"\"), \"=\", \"\"), \"}\", \"\"), \"{\", \"\"), \" \", \"\"), \"/\", \"\");\r\n}\r\n\r\nlet color = {\r\n    a: \"rgb(255, 182, 182)\",\r\n    b: \"#78e5cb\",\r\n    inter: \"rgb(119, 122, 216)\"\r\n}\r\n\r\n\r\nexport class KeywordCloud {\r\n\r\n    static generate(aList, bList, interList, canvas1, canvas2, weightFactor, changeOpacity, min, max) {\r\n\r\n        \r\n        console.log(aList, bList);\r\n        console.log(interList);\r\n\r\n        console.log(document.getElementById(canvas1));\r\n\r\n        let aMin = aList[0][1];\r\n        let aMax = aList[0][1];\r\n        let bMin = bList[0][1];\r\n        let bMax = bList[0][1];\r\n\r\n        aList.forEach(node => {\r\n            if(node[1] > aMax) aMax = node[1];\r\n            if(node[1] < aMin) aMin = node[1];\r\n        })\r\n        bList.forEach(node => {\r\n            if(node[1] > bMax) bMax = node[1];\r\n            if(node[1] < bMin) bMin = node[1];\r\n        })\r\n\r\n        aList.forEach(node => {\r\n            node[1] = ((node[1] - aMin) / (aMax - aMin)) * (max - min) + min;\r\n        })\r\n        bList.forEach(node => {\r\n            node[1] = ((node[1] - bMin) / (bMax - bMin)) * (max - min) + min;\r\n        })\r\n        // normalize to min < < max\r\n\r\n\r\n        WordCloud(document.getElementById(canvas1), {\r\n            list: aList,\r\n            wait: 0,\r\n            rotateRatio: 0,\r\n            weightFactor: weightFactor,\r\n            color: function(word) {\r\n                if(interList.includes(word)) return color.inter;\r\n                else return color.a;\r\n            },\r\n            classes: function(word) {\r\n                return \"wordCloud wordCloud_\" + processKey(word); \r\n            },\r\n            hover: function(item, dimension, event) {\r\n                if(item !== undefined) {\r\n                    d3.selectAll(\".wordCloud\")\r\n                      .style(\"font-weight\", \"300\")\r\n                      .style(\"opacity\", changeOpacity);\r\n                    d3.selectAll(\".wordCloud_\" + processKey(item[0]))\r\n                      .style(\"font-weight\", \"900\")\r\n                      .style(\"opacity\", 1);\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        WordCloud(document.getElementById(canvas2), {\r\n            list: bList,\r\n            wait: 0,\r\n            rotateRatio: 0,\r\n            weightFactor: weightFactor,\r\n            color: function(word) {\r\n                if(interList.includes(word)) return color.inter;\r\n                else return color.b;\r\n            },\r\n            classes: function(word) {\r\n                return \"wordCloud wordCloud_\" + processKey(word); \r\n            },\r\n            hover: function(item, dimension, event) {\r\n                if(item !== undefined) {\r\n                    d3.selectAll(\".wordCloud\")\r\n                    .style(\"font-weight\", \"300\")\r\n                    .style(\"opacity\", changeOpacity);\r\n                    d3.selectAll(\".wordCloud_\" + processKey(item[0]))\r\n                    .style(\"font-weight\", \"900\")\r\n                    .style(\"opacity\", 1);\r\n                }\r\n            }\r\n        });\r\n\r\n        d3.select(\"#\" + canvas1)\r\n        .on(\"mouseleave\", function(d) {\r\n            d3.selectAll(\".wordCloud\")\r\n            .style(\"font-weight\", 300)\r\n            .style(\"opacity\", 1);\r\n        })\r\n        .style(\"position\", \"absolute\");\r\n\r\n        d3.select(\"#\" + canvas2)\r\n        .on(\"mouseleave\", function(d) {\r\n            d3.selectAll(\".wordCloud\")\r\n            .style(\"font-weight\", 300)\r\n            .style(\"opacity\", 1);\r\n        })\r\n        .style(\"position\", \"absolute\");\r\n    }\r\n}\r\n\r\nexport default KeywordCloud;","import React, { useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { CommitCluster } from './analyzer/GithruClasses';\r\nimport * as d3 from 'd3';\r\nimport GitAnalyzer from './analyzer/GitAnalyzer';\r\nimport { intersection } from \"lodash\";\r\nimport { Checkbox } from '@material-ui/core';\r\nimport \"./DetailCompare.css\";\r\nimport * as actions from '../modules';\r\nimport { KeywordCloud } from './library/wordCloudGenerator';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\r\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\r\n\r\n\r\nconst DetailCompare = (props) => {\r\n\r\n    const { hideFiles } = useSelector(state => state.summaryParameters);\r\n    const { width } = props;\r\n\r\n\r\n    //d3.select(\"#inspectionPane\").style(\"width\", \"0px\");\r\n    // d3.select('#comparePane').style(\"width\", \"1700px\");\r\n\r\n\r\n    let aCapturedSummaryInfo = props.capturedSummaryInfoListForCompare[0];\r\n    let bCapturedSummaryInfo = props.capturedSummaryInfoListForCompare[1];\r\n    let aName = GitAnalyzer.getBranchNamesFromBranchClusterNodes(aCapturedSummaryInfo.clusterNodes)[0];\r\n    let bName = GitAnalyzer.getBranchNamesFromBranchClusterNodes(bCapturedSummaryInfo.clusterNodes)[0];\r\n\r\n    let reducingCapturedSummary = function(dict, val) {\r\n        let fileList = val.clusterData.keywordsByRank;\r\n       // console.log(fileList);\r\n        fileList.forEach(e => {\r\n            if(e[0] in dict) dict[e[0]] += e[1];\r\n            else dict[e[0]] = e[1];\r\n        })\r\n        return dict;\r\n    }\r\n\r\n    let aCapturedSummaryInfoKeywordDict = aCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummary, {});\r\n    let bCapturedSummaryInfoKeywordDict = bCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummary, {});\r\n\r\n\r\n    let aCapturedSummaryInfoKeyword = [], \r\n        bCapturedSummaryInfoKeyword = [];\r\n    \r\n    for(let key in aCapturedSummaryInfoKeywordDict) \r\n        aCapturedSummaryInfoKeyword.push([key, aCapturedSummaryInfoKeywordDict[key]]);\r\n    \r\n    for(let key in bCapturedSummaryInfoKeywordDict) \r\n        bCapturedSummaryInfoKeyword.push([key, bCapturedSummaryInfoKeywordDict[key]]);\r\n\r\n    const clusterNodesList = props.capturedSummaryInfoListForCompare.reduce((prev, capturedSummaryInfo) => {\r\n        let newCluster = new CommitCluster(undefined, undefined, undefined);\r\n        capturedSummaryInfo.clusterNodes.forEach(clusterNode => {\r\n            clusterNode.cluster.nodeList.forEach(node => newCluster.addNode(node));\r\n        });\r\n        prev.push(newCluster);\r\n        return prev;\r\n    }, []);\r\n\r\n    let aClusterNode = clusterNodesList[0];\r\n    let bClusterNode = clusterNodesList[1];\r\n\r\n    // Processing Data\r\n\r\n    /* ================ Very IMPORTANT DATA Variables!! ========== */\r\n    // overall\r\n    let aCloc, bCloc;\r\n    let aCommitNum, bCommitNum;\r\n\r\n    // Author\r\n    let interAuthorList;\r\n    let aAuthorData, bAuthorData;\r\n    let aAuthorArrayData = [], bAuthorArrayData = [];\r\n    let aAuthorArrayDataLoc, bAuthorArrayDataLoc,\r\n        aAuthorArrayDataCommit, bAuthorArrayDataCommit;\r\n\r\n    // Commit Types\r\n    let aCommitTypeArrayData = [], bCommitTypeArrayData = [];\r\n    let aCommitTypeArrayDataLoc, bCommitTypeArrayDataLoc,\r\n        aCommitTypeArrayDataCommit, bCommitTypeArrayDataCommit;\r\n    /* ================ Very IMPORTANT DATA Variables!! ========== */\r\n\r\n    // author data collection\r\n\r\n    aCloc = aClusterNode.locStat.clocSum;\r\n    bCloc = bClusterNode.locStat.clocSum;\r\n    aCommitNum = aClusterNode.nodeCount;\r\n    bCommitNum = bClusterNode.nodeCount;\r\n\r\n\r\n    let authorCollector = function (authorList, node) {\r\n        Object.keys(node.clusterData.authors).forEach(rawAuthor => {\r\n            let author = GitAnalyzer.getTextValue(\"authors#2\", rawAuthor); \r\n            authorList.push(author);\r\n        })\r\n        return authorList;\r\n    }\r\n\r\n    // interAuthorList = intersection(Array.from(new Set(aClusterNode.nodeList.reduce(authorCollector, []))),\r\n    //     Array.from(new Set(bClusterNode.nodeList.reduce(authorCollector, []))));\r\n\r\n    interAuthorList = intersection(Array.from(new Set(aCapturedSummaryInfo.clusterNodes.reduce(authorCollector, []))), \r\n                                   Array.from(new Set(bCapturedSummaryInfo.clusterNodes.reduce(authorCollector, []))));\r\n\r\n    console.log(interAuthorList);\r\n\r\n\r\n    let authorDataCollector = function (authorData, node) {\r\n        Object.keys(node.clusterData.authors).forEach(rawAuthor => {\r\n            let author = GitAnalyzer.getTextValue(\"authors#2\", rawAuthor); \r\n\r\n            if (authorData[author] !== undefined) {\r\n                authorData[author].commitNum += node.clusterData.authors[rawAuthor];\r\n                authorData[author].cloc += node.clusterData.authorsLOCStat[rawAuthor].clocSum;\r\n            }\r\n            else {\r\n                authorData[author] = {\r\n                    commitNum: node.clusterData.authors[rawAuthor], \r\n                    cloc: node.clusterData.authorsLOCStat[rawAuthor].clocSum,\r\n                    inIntersection: interAuthorList.includes(author) \r\n                }\r\n            }\r\n        })\r\n        return authorData;\r\n    }\r\n\r\n\r\n    aAuthorData = aCapturedSummaryInfo.clusterNodes.reduce(authorDataCollector, {});\r\n    bAuthorData = bCapturedSummaryInfo.clusterNodes.reduce(authorDataCollector, {});\r\n\r\n    for (let authorKey in aAuthorData) {\r\n        aAuthorArrayData.push({\r\n            author: authorKey,\r\n            commitNum: aAuthorData[authorKey].commitNum,\r\n            loc: aAuthorData[authorKey].cloc,\r\n            inIntersection: aAuthorData[authorKey].inIntersection\r\n        });\r\n    }\r\n    for (let authorKey in bAuthorData) {\r\n        bAuthorArrayData.push({\r\n            author: authorKey,\r\n            commitNum: bAuthorData[authorKey].commitNum,\r\n            loc: bAuthorData[authorKey].cloc,\r\n            inIntersection: bAuthorData[authorKey].inIntersection\r\n        });\r\n    }\r\n\r\n\r\n    aAuthorArrayDataLoc = accumulatingLoc(aAuthorArrayData.sort(sortByLoc));\r\n    bAuthorArrayDataLoc = accumulatingLoc(bAuthorArrayData.sort(sortByLoc));\r\n    aAuthorArrayDataCommit = accumulatingCommitNum(aAuthorArrayData.sort(sortByCommitNum));\r\n    bAuthorArrayDataCommit = accumulatingCommitNum(bAuthorArrayData.sort(sortByCommitNum));\r\n\r\n    // CommitType data collection\r\n\r\n    let commitTypeCollector = function (commitTypeList, node) {\r\n        Object.keys(node.clusterData.commitTypes).forEach(commitType => {\r\n            commitTypeList.push(commitType);\r\n        })\r\n        return commitTypeList;\r\n    }\r\n\r\n    let interCommitTypeList = intersection(Array.from(new Set(aCapturedSummaryInfo.clusterNodes.reduce(commitTypeCollector, []))),\r\n                                           Array.from(new Set(bCapturedSummaryInfo.clusterNodes.reduce(commitTypeCollector, []))))\r\n\r\n\r\n    let commitTypeDataCollector = function (commitTypeData, node) {\r\n        Object.keys(node.clusterData.commitTypes).forEach(commitType => {\r\n            if(commitTypeData[commitType] !== undefined) {\r\n                commitTypeData[commitType].commitNum += node.clusterData.commitTypes[commitType];\r\n                commitTypeData[commitType].cloc += node.clusterData.commitTypesLOCStat[commitType].clocSum;\r\n            }\r\n            else {\r\n                commitTypeData[commitType] = {\r\n                    commitNum :node.clusterData.commitTypes[commitType], \r\n                    cloc: node.clusterData.commitTypesLOCStat[commitType].clocSum,\r\n                    inIntersection: interCommitTypeList.includes(commitType)\r\n                }\r\n            }\r\n        })\r\n       \r\n        return commitTypeData;\r\n    }\r\n\r\n    let aCommitTypeData = aCapturedSummaryInfo.clusterNodes.reduce(commitTypeDataCollector, {});\r\n    let bCommitTypeData = bCapturedSummaryInfo.clusterNodes.reduce(commitTypeDataCollector, {});\r\n\r\n    //console.log(aCommitTypeData, bCommitTypeData)\r\n\r\n    for (let commitTypeKey in aCommitTypeData) {\r\n        aCommitTypeArrayData.push({\r\n            commitType: commitTypeKey,\r\n            commitNum: aCommitTypeData[commitTypeKey].commitNum,\r\n            loc: aCommitTypeData[commitTypeKey].cloc,\r\n            inIntersection: aCommitTypeData[commitTypeKey].inIntersection\r\n        });\r\n    }\r\n    for (let commitTypeKey in bCommitTypeData) {\r\n        bCommitTypeArrayData.push({\r\n            commitType: commitTypeKey,\r\n            commitNum: bCommitTypeData[commitTypeKey].commitNum,\r\n            loc: bCommitTypeData[commitTypeKey].cloc,\r\n            inIntersection: bCommitTypeData[commitTypeKey].inIntersection\r\n        });\r\n    }\r\n\r\n    //console.log(\"Final CommitType DATA!!\", aCommitTypeArrayData, bCommitTypeArrayData)\r\n\r\n    aCommitTypeArrayDataLoc = accumulatingLoc(aCommitTypeArrayData.sort(sortByLoc));\r\n    bCommitTypeArrayDataLoc = accumulatingLoc(bCommitTypeArrayData.sort(sortByLoc));\r\n    aCommitTypeArrayDataCommit = accumulatingCommitNum(aCommitTypeArrayData.sort(sortByCommitNum));\r\n    bCommitTypeArrayDataCommit = accumulatingCommitNum(bCommitTypeArrayData.sort(sortByCommitNum));\r\n\r\n    // Keywords\r\n    // variables for keyword\r\n    let aClusterKeywordData = aCapturedSummaryInfoKeyword.sort((a,b) => b[1] - a[1]);\r\n    let bClusterKeywordData = bCapturedSummaryInfoKeyword.sort((a,b) => b[1] - a[1]);\r\n\r\n    let presentingKeywordNum = useRef(10);\r\n\r\n\r\n    let aKeywords = [], bKeywords = [], interKeywords = [];\r\n    for (let i = 0; i < 20; i++) {\r\n        try {\r\n            let word = aClusterKeywordData[i][0];\r\n            aKeywords.push(word);\r\n        }\r\n        catch (e) { console.log(\"error\") }\r\n        try {\r\n            let word = bClusterKeywordData[i][0];\r\n            bKeywords.push(word);\r\n        }\r\n        catch (e) { console.log(\"error\") }\r\n    }\r\n    interKeywords = intersection(aKeywords, bKeywords);\r\n\r\n    let aList = aClusterKeywordData.slice(0, 20);\r\n    let bList = bClusterKeywordData.slice(0, 20);\r\n    let interList = interKeywords;\r\n\r\n    // processing keyword data ENDD!!!\r\n\r\n\r\n    // Processing data for file structure\r\n\r\n    function generateFileDirData(aData, bData, aArray, bArray, aSum, bSum) {\r\n        let aDataTempArray = [], bDataTempArray = [];\r\n        for (let key in aData) aDataTempArray.push([key, aData[key]]);\r\n        for (let key in bData) bDataTempArray.push([key, bData[key]]);\r\n\r\n        aDataTempArray.sort((a, b) => b[1] - a[1]);\r\n        bDataTempArray.sort((a, b) => b[1] - a[1]);\r\n\r\n        aDataTempArray = aDataTempArray.slice(0, presentingKeywordNum.current);\r\n        bDataTempArray = bDataTempArray.slice(0, presentingKeywordNum.current);\r\n        let interArray = intersection(aDataTempArray.map(x => x[0]), bDataTempArray.map(x => x[0]));\r\n\r\n        for (let i = 0; i < presentingKeywordNum.current; i++) {\r\n            try {\r\n                let name = aDataTempArray[i][0];\r\n                aArray.push({\r\n                    keyword: name,\r\n                    score: aData[name] / aSum,\r\n                    inIntersection: interArray.includes(name)\r\n                });\r\n            }\r\n            catch {\r\n                aArray.push({ keyword: \"\", score: 0, inIntersection: true });\r\n            }\r\n            try {\r\n                let name = bDataTempArray[i][0];\r\n                bArray.push({\r\n                    keyword: name,\r\n                    score: bData[name] / bSum,\r\n                    inIntersection: interArray.includes(name)\r\n                });\r\n            }\r\n            catch {\r\n                bArray.push({ keyword: \"\", score: 0, inIntersection: true });\r\n            }\r\n        }\r\n    }\r\n\r\n    let reducingCapturedSummaryCloc = function(dict, val) {\r\n        let fileDict = val.clusterData.clocByFiles;\r\n        //console.log(fileList);\r\n        for (let key in fileDict) {\r\n            if(key in dict) dict[key] += fileDict[key];\r\n            else dict[key] = fileDict[key];\r\n        }\r\n        return dict;\r\n    }\r\n    let reducingCapturedSummaryCommitNum = function(dict, val) {\r\n        let fileDict = val.clusterData.touchCountByFiles;\r\n        //console.log(fileList);\r\n        for (let key in fileDict) {\r\n            if(key in dict) dict[key] += fileDict[key];\r\n            else dict[key] = fileDict[key];\r\n        }\r\n        return dict;\r\n    }\r\n\r\n    let aRawModLocFileData = aCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCloc, {});\r\n    let aRawModNumFileData = aCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCommitNum, {});;\r\n    let bRawModLocFileData = bCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCloc, {});\r\n    let bRawModNumFileData = bCapturedSummaryInfo.clusterNodes.reduce(reducingCapturedSummaryCommitNum, {});;\r\n\r\n    // Removing hideFiles\r\n    hideFiles.forEach(fileName => {\r\n        delete aRawModLocFileData[fileName]\r\n        delete aRawModNumFileData[fileName]\r\n        delete bRawModLocFileData[fileName]\r\n        delete bRawModNumFileData[fileName]\r\n    })\r\n\r\n    let aLocFileArray = [], bLocFileArray = [], aNumFileArray = [], bNumFileArray = [];\r\n    generateFileDirData(aRawModLocFileData, bRawModLocFileData, aLocFileArray, bLocFileArray, aCloc, bCloc);\r\n    generateFileDirData(aRawModNumFileData, bRawModNumFileData, aNumFileArray, bNumFileArray, aCommitNum, bCommitNum);\r\n\r\n    let aFileArray = [], bFileArray = [];\r\n    for (let i = 0; i < presentingKeywordNum.current; i++) {\r\n        aFileArray.push({\r\n            keyword: aLocFileArray[i].keyword,\r\n            loc: aLocFileArray[i],\r\n            num: aNumFileArray[i]\r\n        });\r\n        bFileArray.push({\r\n            keyword: bLocFileArray[i].keyword,\r\n            loc: bLocFileArray[i],\r\n            num: bNumFileArray[i]\r\n        })\r\n    }\r\n\r\n    function processKey(word) {\r\n        if (word === undefined) return word;\r\n        return word.replace(/[`~! @#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '');\r\n        // return replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(replaceAll(word, \".\", \"\"), \">\", \"\"), \"=\", \"\"), \"}\", \"\"), \"{\", \"\"), \" \", \"\"), \"/\", \"\");\r\n    }\r\n\r\n\r\n    // helper function to draw ben diagram\r\n    function calIntersection(x0, y0, r0, x1, y1, r1) {\r\n        var a, dx, dy, d, h, rx, ry;\r\n        var x2, y2;\r\n        dx = x1 - x0;\r\n        dy = y1 - y0;\r\n\r\n        d = Math.sqrt((dy * dy) + (dx * dx));\r\n\r\n        if (d > (r0 + r1)) {\r\n            return false;\r\n        }\r\n        if (d < Math.abs(r0 - r1)) {\r\n            return false;\r\n        }\r\n\r\n        a = ((r0 * r0) - (r1 * r1) + (d * d)) / (2.0 * d);\r\n\r\n        x2 = x0 + (dx * a / d);\r\n        y2 = y0 + (dy * a / d);\r\n\r\n        h = Math.sqrt((r0 * r0) - (a * a));\r\n\r\n        rx = -dy * (h / d);\r\n        ry = dx * (h / d);\r\n\r\n        var xi = x2 + rx;\r\n        var xi_prime = x2 - rx;\r\n        var yi = y2 + ry;\r\n        var yi_prime = y2 - ry;\r\n\r\n        return [xi, xi_prime, yi, yi_prime];\r\n    }\r\n\r\n    // helper functions for sorting\r\n    function sortByLoc(a, b) {\r\n        return a.loc - b.loc;\r\n    }\r\n\r\n    function sortByCommitNum(a, b) {\r\n        return a.commitNum - b.commitNum;\r\n    }\r\n\r\n    function accumulatingLoc(array) {\r\n        let currentLocSum = 0;\r\n        for (let i = 0; i < array.length; i++) {\r\n            array[i][\"currentLocSum\"] = currentLocSum;\r\n            currentLocSum += array[i][\"loc\"];\r\n        }\r\n        return array;\r\n    }\r\n\r\n    function accumulatingCommitNum(array) {\r\n        let currentCommitSum = 0;\r\n        for (let i = 0; i < array.length; i++) {\r\n            array[i][\"currentCommitSum\"] = currentCommitSum;\r\n            currentCommitSum += array[i][\"commitNum\"];\r\n        }\r\n        return array;\r\n    }\r\n\r\n    // Color scheme!!!!!!\r\n    let color = {\r\n        a: \"rgb(255, 182, 182)\",\r\n        b: \"#78e5cb\",\r\n        inter: \"rgb(119, 122, 216)\"\r\n    }\r\n\r\n\r\n    let aChecked = useRef(true);\r\n    let interChecked = useRef(true);\r\n    let bChecked = useRef(true);\r\n    let isLoc = useRef(true); // false if commitNum\r\n\r\n    let xAxisScale = useRef();\r\n\r\n    let aAuthorSvgMolds = useRef();\r\n    let aAuthorRects = useRef();\r\n    let aAuthorTexts = useRef();\r\n\r\n    let bAuthorSvgMolds = useRef();\r\n    let bAuthorRects = useRef();\r\n    let bAuthorTexts = useRef();\r\n\r\n    let aCommitTypeSvgMolds = useRef();\r\n    let aCommitTypeRects = useRef();\r\n    let aCommitTypeTexts = useRef();\r\n\r\n    let bCommitTypeSvgMolds = useRef();\r\n    let bCommitTypeRects = useRef();\r\n    let bCommitTypeTexts = useRef();\r\n\r\n\r\n    let aFileSvg = useRef();\r\n    let bFileSvg = useRef();\r\n\r\n    let showFileFullPath = useRef(false);\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    \r\n    let updateXAxis;\r\n    let updateAuthorSvg;\r\n    let updateCommitTypeSvg;\r\n    let updateKeywordSvg;\r\n    let updatefileSvg;\r\n    let updateLegends;\r\n    \r\n    useEffect(() => {\r\n        dispatch(actions.updateScrollToRight(true));\r\n        window.scrollTo({\r\n            top:0,\r\n            left:4000,\r\n        });\r\n\r\n        let mainSvg = d3.select(\"#compareClusters\");\r\n        mainSvg.selectAll(\"g\").remove();\r\n\r\n\r\n        /* ================================================== */\r\n        /* ================================================== */\r\n        /* Implementing Venn Diagram Comparison SELECTOR!!!!  */\r\n        /* ================================================== */\r\n        /* ================================================== */\r\n\r\n        let radius = 45;\r\n        let vennHeight = 65;\r\n        let aClusterX = 72, bClusterX = 114;\r\n        let interPoints = calIntersection(aClusterX, vennHeight, radius, bClusterX, vennHeight, radius);\r\n\r\n        let vennSvg = mainSvg.append(\"g\");\r\n\r\n        let aCircle = vennSvg.append(\"g\")\r\n            .append(\"path\")\r\n            .attr(\"id\", \"aVenn\")\r\n            .style(\"fill\", color.a)\r\n            .attr(\"d\", null)\r\n            .attr(\"stroke\", color.a)\r\n            .attr(\"stroke-width\", \"0px\")\r\n            .style(\"opacity\", 0.8)\r\n            .style(\"cursor\", \"pointer\")\r\n            .on(\"mouseover\", function (d) { d3.select(this).attr(\"stroke-width\", 4); })\r\n            .on(\"mouseout\", function (d) { d3.select(this).attr(\"stroke-width\", 0); })\r\n            .on(\"click\", function (d) {\r\n                if (aChecked.current === true) {\r\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.3);\r\n                    aChecked.current = false;\r\n                    updateAuthorSvg();\r\n                    updateCommitTypeSvg();\r\n                    updateKeywordSvg();\r\n                    updatefileSvg();\r\n                    updateVennText();\r\n                }\r\n                else {\r\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.8);\r\n                    aChecked.current = true;\r\n                    updateAuthorSvg();\r\n                    updateCommitTypeSvg();\r\n                    updateKeywordSvg();\r\n                    updatefileSvg();\r\n                    updateVennText();\r\n                }\r\n            })\r\n\r\n        aCircle.attr(\"d\", function () {\r\n            return \"M\" + interPoints[0] + \",\" + interPoints[2] + \"A\" + radius + \",\" + radius +\r\n                \" 0 1,1 \" + interPoints[1] + \",\" + interPoints[3] + \"A\" + radius + \",\" + radius +\r\n                \" 0 0,0 \" + interPoints[0] + \",\" + interPoints[2];\r\n        });\r\n\r\n        let bCircle = vennSvg.append(\"g\")\r\n            .append(\"path\")\r\n            .attr(\"id\", \"bVenn\")\r\n            .style(\"fill\", color.b)\r\n            .attr(\"d\", null)\r\n            .attr(\"stroke\", color.b)\r\n            .attr(\"stroke-width\", \"0px\")\r\n            .style(\"opacity\", 0.8)\r\n            .style(\"cursor\", \"pointer\")\r\n            .on(\"mouseover\", function (d) { d3.select(this).attr(\"stroke-width\", 4); })\r\n            .on(\"mouseout\", function (d) { d3.select(this).attr(\"stroke-width\", 0); })\r\n            .on(\"click\", function (d) {\r\n                if (bChecked.current === true) {\r\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.3);\r\n                    bChecked.current = false;\r\n                    updateAuthorSvg();\r\n                    updateCommitTypeSvg();\r\n                    updateKeywordSvg();\r\n                    updatefileSvg();\r\n                    updateVennText();\r\n                }\r\n                else {\r\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.8);\r\n                    bChecked.current = true;\r\n                    updateAuthorSvg();\r\n                    updateCommitTypeSvg();\r\n                    updateKeywordSvg();\r\n                    updatefileSvg();\r\n                    updateVennText();\r\n                }\r\n            })\r\n        bCircle.attr(\"d\", function () {\r\n            return \"M\" + interPoints[0] + \",\" + interPoints[2] + \"A\" + radius + \",\" + radius +\r\n                \" 0 0,0 \" + interPoints[1] + \",\" + interPoints[3] + \"A\" + radius + \",\" + radius +\r\n                \" 0 1,1 \" + interPoints[0] + \",\" + interPoints[2];\r\n        });\r\n\r\n        let vennIntersection = vennSvg.append(\"g\")\r\n            .append(\"path\")\r\n            .attr(\"id\", \"interVenn\")\r\n            .style(\"fill\", color.inter)\r\n            .attr(\"d\", null)\r\n            .attr(\"stroke\", color.inter)\r\n            .attr(\"stroke-width\", \"0px\")\r\n            .style(\"opacity\", 0.8)\r\n            .style(\"cursor\", \"pointer\")\r\n            .on(\"mouseover\", function (d) { d3.select(this).attr(\"stroke-width\", 4); })\r\n            .on(\"mouseout\", function (d) { d3.select(this).attr(\"stroke-width\", 0); })\r\n            .on(\"click\", function (d) {\r\n                if (interChecked.current === true) {\r\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.3);\r\n                    interChecked.current = false;\r\n                    updateAuthorSvg();\r\n                    updateCommitTypeSvg();\r\n                    updateKeywordSvg();\r\n                    updatefileSvg();\r\n                    updateVennText();\r\n                }\r\n                else {\r\n                    d3.select(this).transition().duration(800).style(\"opacity\", 0.8);\r\n                    interChecked.current = true;\r\n                    updateAuthorSvg();\r\n                    updateCommitTypeSvg();\r\n                    updateKeywordSvg();\r\n                    updatefileSvg();\r\n                    updateVennText();\r\n                }\r\n            })\r\n\r\n        vennIntersection.attr(\"d\", function () {\r\n            return \"M\" + interPoints[0] + \",\" + interPoints[2] + \"A\" + radius + \",\" + radius +\r\n                \" 0 0,1 \" + interPoints[1] + \",\" + interPoints[3] + \"A\" + radius + \",\" + radius +\r\n                \" 0 0,1 \" + interPoints[0] + \",\" + interPoints[2];\r\n        });\r\n\r\n        vennSvg.append(\"svg\")\r\n            .attr(\"x\", 14)\r\n            .attr(\"width\", 70)\r\n            .attr(\"height\", 121)\r\n            .append(\"text\")\r\n            .attr(\"id\", \"vennTextA\")\r\n            .attr(\"dominant-baseline\", \"middle\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"x\", \"50%\")\r\n            .attr(\"y\", \"50%\")\r\n            .style(\"font-size\", \"14px\")\r\n            .style(\"fill\", \"black\")\r\n            .style(\"font-weight\", \"bold\")\r\n            .text(\"#\" + aCapturedSummaryInfo.id)\r\n            // .text(\"#\" + aCapturedSummaryInfo.id + \" (\" + aName + \")\")\r\n\r\n        vennSvg.append(\"svg\")\r\n            .attr(\"x\", 100)\r\n            .attr(\"width\", 70)\r\n            .attr(\"height\", 121)\r\n            .append(\"text\")\r\n            .attr(\"id\", \"vennTextB\")\r\n            .attr(\"dominant-baseline\", \"middle\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"x\", \"50%\")\r\n            .attr(\"y\", \"50%\")\r\n            .style(\"font-size\", \"14px\")\r\n            .style(\"fill\", \"black\")\r\n            .style(\"font-weight\", \"bold\")\r\n            // .text(\"#\" + bCapturedSummaryInfo.id + \" (\" + bName + \")\")\r\n            .text(\"#\" + bCapturedSummaryInfo.id)\r\n\r\n        vennSvg.append(\"svg\")\r\n            .attr(\"x\", 57)\r\n            .attr(\"width\", 70)\r\n            .attr(\"height\", 121)\r\n            .append(\"text\")\r\n            .attr(\"id\", \"vennTextInter\")\r\n            .attr(\"dominant-baseline\", \"middle\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"x\", \"50%\")\r\n            .attr(\"y\", \"50%\")\r\n            .style(\"font-size\", \"15px\")\r\n            .style(\"fill\", \"black\")\r\n            .style(\"font-weight\", \"bold\")\r\n            // .text(\"#\" + bCapturedSummaryInfo.id + \" (\" + bName + \")\")\r\n            .text(\"∩\")\r\n\r\n        function updateVennText() {\r\n            if (aChecked.current)     d3.select(\"#vennTextA\").transition().duration(800).style(\"opacity\", 1);\r\n            else                      d3.select(\"#vennTextA\").transition().duration(800).style(\"opacity\", 0);\r\n            if (bChecked.current)     d3.select(\"#vennTextB\").transition().duration(800).style(\"opacity\", 1);\r\n            else                      d3.select(\"#vennTextB\").transition().duration(800).style(\"opacity\", 0);\r\n            if (interChecked.current) d3.select(\"#vennTextInter\").transition().duration(800).style(\"opacity\", 1);\r\n            else                      d3.select(\"#vennTextInter\").transition().duration(800).style(\"opacity\", 0);\r\n        }\r\n        /* Finished Implementing Venn Diagram Comparison SELECTOR!!!!  */\r\n \r\n\r\n        // Axis\r\n\r\n        let xAxisLength = (width / 2) * 0.92;\r\n        xAxisScale.current = d3.scaleLinear()\r\n            .domain([0, Math.max(aClusterNode.locStat.clocSum, bClusterNode.locStat.clocSum)])\r\n            .range([0, xAxisLength]);\r\n\r\n\r\n\r\n        updateXAxis = function () {\r\n            if (isLoc.current) {\r\n                xAxisScale.current = d3.scaleLinear()\r\n                    .domain([0, Math.max(aClusterNode.locStat.clocSum, bClusterNode.locStat.clocSum)])\r\n                    .range([0, xAxisLength]);\r\n\r\n            }\r\n            else {\r\n                xAxisScale.current = d3.scaleLinear()\r\n                    .domain([0, Math.max(aClusterNode.nodeCount, bClusterNode.nodeCount)])\r\n                    .range([0, xAxisLength]);\r\n\r\n            }\r\n        }\r\n\r\n        let yAxisLength = 80;\r\n        let yAxisMargin = 10;\r\n        let rectHeight = (yAxisLength - 3 * yAxisMargin) / 2;\r\n\r\n        // BARGRAPH Generator / updater\r\n\r\n        function initBarGraphElement(type, svg, svgMolds, arrayDataLoc, rects, texts, defualtColor, checked) {\r\n            console.log(arrayDataLoc);\r\n\r\n            svgMolds.current = svg.selectAll(\"svg\")\r\n                .data(arrayDataLoc)\r\n                .enter()\r\n                .append(\"svg\")\r\n                .attr(\"x\", d => xAxisScale.current(d.currentLocSum) + 1)\r\n                .attr(\"y\", 0)\r\n                .attr(\"width\", d => xAxisScale.current(d.loc))\r\n                .attr(\"height\", rectHeight)\r\n                .attr(\"class\", d => type + \"_\" + processKey(d[type]))\r\n                .on(\"mouseover\", function (d) {\r\n                    if (d.inIntersection ? interChecked.current : checked.current) {\r\n                        d3.selectAll(\".\" + type + \"_\" + processKey(d[type])).attr(\"width\", xAxisLength).raise()\r\n                        d3.selectAll(\".\" + type + \"_rect_\" + processKey(d[type])).style(\"opacity\", 1);\r\n                        d3.selectAll(\".\" + type + \"_text\").style(\"opacity\", 0);\r\n                        d3.selectAll(\".\" + type + \"_text_\" + processKey(d[type])).style(\"opacity\", 1).style(\"font-weight\", \"bold\");\r\n                    \r\n                        d3.select(\".tooltipHover\")\r\n                          .style(\"left\", (d3.event.pageX) + \"px\")\t\t\r\n                          .style(\"top\", (d3.event.pageY) + \"px\")\r\n                          .style(\"opacity\", 0.8)\r\n                          .style(\"width\", \"140px\")\r\n                          .html(isLoc.current ? d.loc.toFixed(0) + \" lines modified\" : d.commitNum.toFixed(1) + \" commits\")\r\n                    }\r\n                })\r\n                .on(\"mouseout\", function (d) {\r\n                    if (d.inIntersection ? interChecked.current : checked.current) {\r\n                        d3.selectAll(\".\" + type + \"_\" + processKey(d[type])).attr(\"width\", d => isLoc.current ? xAxisScale.current(d.loc) : xAxisScale.current(d.commitNum)).lower()\r\n                        d3.selectAll(\".\" + type + \"_rect_\" + processKey(d[type])).style(\"opacity\", d => {\r\n                            if (d.inIntersection) return interChecked.current ? 0.7 : 0.3;\r\n                            else return checked.current ? 0.7 : 0.3;\r\n                        });\r\n                        d3.selectAll(\".\" + type + \"_text_\" + processKey(d[type])).style(\"font-weight\", 300);\r\n                        d3.selectAll(\".\" + type + \"_text\").style(\"opacity\", d => {\r\n                            if (d.inIntersection) return interChecked.current ? 1 : 0;\r\n                            else return checked.current ? 1 : 0;\r\n                        });\r\n                    }\r\n                    d3.select(\".tooltipHover\").style(\"opacity\", 0);\r\n                })\r\n                .on(\"mousemove\", function (d) {\r\n                    d3.select(\".tooltipHover\")\r\n                      .style(\"left\", (d3.event.pageX) + \"px\")\t\t\r\n                      .style(\"top\", (d3.event.pageY) + \"px\");\r\n                });\r\n\r\n            rects.current = svgMolds.current.append(\"rect\")\r\n                .attr(\"class\", d => type + \"_rect_\" + processKey(d[type]))\r\n                .attr(\"width\", d => xAxisScale.current(d.loc))\r\n                .attr(\"height\", rectHeight)\r\n                .attr(\"rx\", 4).attr(\"ry\", 4)\r\n                .style(\"stroke\", \"white\")\r\n                .style(\"stroke-width\", 0.5)\r\n                .style(\"opacity\", 0.7)\r\n                .style(\"fill\", d => {\r\n                    if (d.inIntersection === true) return color.inter;\r\n                    else return defualtColor;\r\n                })\r\n\r\n\r\n\r\n            texts.current = svgMolds.current.append(\"text\")\r\n                .attr(\"class\", d => type + \"_text \" + type + \"_text_\" + processKey(d[type]))\r\n                .attr(\"y\", rectHeight * 0.6)\r\n                .attr(\"x\", 4)\r\n                .text(d => d[type]);\r\n\r\n        }\r\n\r\n        function updateBarGraphElement(type, arrayData, svgMolds, rects, texts, defaultColor, checked) {\r\n\r\n            svgMolds.current.data(arrayData)\r\n                .join()\r\n                .transition().duration(800)\r\n                .attr(\"x\", d => {\r\n                    if (isLoc.current) return xAxisScale.current(d.currentLocSum) + 1\r\n                    else return xAxisScale.current(d.currentCommitSum) + 1\r\n                })\r\n                .attr(\"width\", d => { return isLoc.current ? xAxisScale.current(d.loc) : xAxisScale.current(d.commitNum); })\r\n                .attr(\"class\", d => type + \"_\" + processKey(d[type]))\r\n\r\n            rects.current.data(arrayData)\r\n                .join()\r\n                .transition().duration(800)\r\n                .style(\"opacity\", d => {\r\n                    if (d.inIntersection) return interChecked.current ? 0.7 : 0.3;\r\n                    else return checked.current ? 0.7 : 0.3;\r\n                })\r\n                .style(\"fill\", d => {\r\n                    if (d.inIntersection === true) return color.inter;\r\n                    else return defaultColor;\r\n                })\r\n                .attr(\"width\", d => isLoc.current ? xAxisScale.current(d.loc) : xAxisScale.current(d.commitNum))\r\n                .attr(\"class\", d => type + \"_rect_\" + processKey(d[type]))\r\n\r\n            texts.current.data(arrayData)\r\n                .join()\r\n                .transition().duration(800)\r\n                .attr(\"class\", d => type + \"_text \" + type + \"_text_\" + processKey(d[type]))\r\n                .style(\"opacity\", d => {\r\n                    if (d.inIntersection) return interChecked.current ? 1 : 0;\r\n                    else return checked.current ? 1 : 0;\r\n                })\r\n                .text(d => d[type]);\r\n        }\r\n\r\n        // End of BARGRAPH Generator / updater\r\n\r\n        let labelYMargin = 15;\r\n\r\n        // Author\r\n\r\n        let authorX = (width / 2) * 0.04;\r\n        let authorY = 160;\r\n\r\n        let authorSvg = mainSvg.append(\"g\");\r\n\r\n        mainSvg.append(\"text\")\r\n               .text(\"Authors\")\r\n               .attr(\"x\", authorX)\r\n               .attr(\"y\", authorY - labelYMargin)\r\n               .style(\"font-size\", \"20px\")\r\n               .style(\"font-weight\", 350);\r\n\r\n        authorSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + authorX + ',' + authorY + ')')\r\n            .append(\"path\")\r\n            .attr(\"d\", \"M 0 0 L 0 \" + yAxisLength)\r\n            .style(\"stroke\", \"black\")\r\n\r\n        let authorAxis = authorSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + authorX + ',' + (authorY + yAxisLength) + ')')\r\n            .call(d3.axisBottom(xAxisScale.current));\r\n\r\n        // appending legend\r\n\r\n        authorSvg.append(\"text\")\r\n                 .text(\"#0\")\r\n                 .attr(\"x\", 13)\r\n                 .attr(\"y\", authorY + 27)\r\n                 .style(\"font-weight\", 400);\r\n\r\n        authorSvg.append(\"text\")\r\n                 .text(\"#1\")\r\n                 .attr(\"x\", 13)\r\n                 .attr(\"y\", authorY + 62)\r\n                 .style(\"font-weight\", 400);\r\n\r\n        authorSvg.append(\"text\")\r\n                 .attr(\"class\", \"basicXLegend\")\r\n                 .text(\"CLOC\")\r\n                 .attr(\"x\", xAxisLength / 2 + 16)\r\n                 .attr(\"y\", authorY + yAxisLength + 35)\r\n                 .style(\"font-weight\", 400);\r\n\r\n        /* ========= INIT AUTHOR - A START ========== */\r\n        // preparing main svg\r\n        let aAuthorSvg = authorSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + authorX + ',' + (authorY + yAxisMargin) + ')');\r\n        // preparing data\r\n        aAuthorArrayData.sort(sortByLoc);\r\n\r\n        //variables \r\n        initBarGraphElement(\"author\", aAuthorSvg, aAuthorSvgMolds, aAuthorArrayDataLoc, aAuthorRects, aAuthorTexts, color.a, aChecked);\r\n        /* ========== INIT AUTHOR - A END =========== */\r\n\r\n        /* ========= INIT AUTHOR - B START ========== */\r\n        // preparing main svg\r\n        let bAuthorSvg = authorSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + authorX + ',' + (authorY + yAxisMargin * 2 + rectHeight) + ')');\r\n        // preparing data\r\n        bAuthorArrayData.sort(sortByLoc);\r\n\r\n        //variables \r\n        initBarGraphElement(\"author\", bAuthorSvg, bAuthorSvgMolds, bAuthorArrayDataLoc, bAuthorRects, bAuthorTexts, color.b, bChecked);\r\n        /* ========== INIT AUTHOR - B END =========== */\r\n\r\n        updateAuthorSvg = function () {\r\n            authorAxis.call(d3.axisBottom(xAxisScale.current));\r\n            let aArrayData = isLoc.current ? aAuthorArrayDataLoc : aAuthorArrayDataCommit;\r\n            let bArrayData = isLoc.current ? bAuthorArrayDataLoc : bAuthorArrayDataCommit;\r\n            updateBarGraphElement(\"author\", aArrayData, aAuthorSvgMolds, aAuthorRects, aAuthorTexts, color.a, aChecked)\r\n            updateBarGraphElement(\"author\", bArrayData, bAuthorSvgMolds, bAuthorRects, bAuthorTexts, color.b, bChecked)\r\n        }\r\n\r\n        // End of Author\r\n\r\n        // CommitTypes\r\n\r\n        let commitTypeX = authorX;\r\n        let commitTypeY = authorY * 2 - 8;\r\n\r\n        let commitTypeSvg = mainSvg.append(\"g\");\r\n\r\n        mainSvg.append(\"text\")\r\n               .text(\"Commit Type\")\r\n               .attr(\"x\", commitTypeX)\r\n               .attr(\"y\", commitTypeY - labelYMargin)\r\n               .style(\"font-size\", \"20px\")\r\n               .style(\"font-weight\", 350);\r\n\r\n\r\n        commitTypeSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + commitTypeX + ',' + commitTypeY + ')')\r\n            .append(\"path\")\r\n            .attr(\"d\", \"M 0 0 L 0 \" + yAxisLength)\r\n            .style(\"stroke\", \"black\")\r\n\r\n        let commitTypeAxis = commitTypeSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + commitTypeX + ',' + (commitTypeY + yAxisLength) + ')')\r\n            .call(d3.axisBottom(xAxisScale.current));\r\n\r\n        commitTypeSvg.append(\"text\")\r\n                     .text(\"#0\")\r\n                     .attr(\"x\", commitTypeX - 20)\r\n                     .attr(\"y\", commitTypeY + 27)\r\n                     .style(\"font-weight\", 400);\r\n\r\n        commitTypeSvg.append(\"text\")\r\n                     .text(\"#1\")\r\n                     .attr(\"x\", commitTypeX - 20)\r\n                     .attr(\"y\", commitTypeY + 62)\r\n                     .style(\"font-weight\", 400);\r\n\r\n\r\n        commitTypeSvg.append(\"text\")\r\n                     .attr(\"class\", \"basicXLegend\")\r\n                     .text(\"CLOC\")\r\n                     .attr(\"x\", commitTypeX + xAxisLength / 2 - 14)\r\n                     .attr(\"y\", commitTypeY + yAxisLength + 35)\r\n                     .style(\"font-weight\", 400);\r\n\r\n\r\n        /* ========= INIT CommitType - A START ========== */\r\n        // preparing main svg\r\n        let aCommitTypeSvg = commitTypeSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + commitTypeX + ',' + (commitTypeY + yAxisMargin) + ')');\r\n        // preparing data\r\n        aCommitTypeArrayData.sort(sortByLoc);\r\n\r\n        //variables \r\n        initBarGraphElement(\"commitType\", aCommitTypeSvg, aCommitTypeSvgMolds, aCommitTypeArrayDataLoc, aCommitTypeRects, aCommitTypeTexts, color.a, aChecked);\r\n        /* ========== INIT CommitType - A END =========== */\r\n\r\n        /* ========= INIT CommitType - B START ========== */\r\n        // preparing main svg\r\n        let bCommitTypeSvg = commitTypeSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + commitTypeX + ',' + (commitTypeY + yAxisMargin * 2 + rectHeight) + ')');\r\n        // preparing data\r\n        bCommitTypeArrayData.sort(sortByLoc);\r\n\r\n        //variables \r\n        initBarGraphElement(\"commitType\", bCommitTypeSvg, bCommitTypeSvgMolds, bCommitTypeArrayDataLoc, bCommitTypeRects, bCommitTypeTexts, color.b, bChecked);\r\n        /* ========== INIT CommitType - B END =========== */\r\n\r\n        updateCommitTypeSvg = function () {\r\n            commitTypeAxis.call(d3.axisBottom(xAxisScale.current));\r\n            let aArrayData = isLoc.current ? aCommitTypeArrayDataLoc : aCommitTypeArrayDataCommit;\r\n            let bArrayData = isLoc.current ? bCommitTypeArrayDataLoc : bCommitTypeArrayDataCommit;\r\n            updateBarGraphElement(\"commitType\", aArrayData, aCommitTypeSvgMolds, aCommitTypeRects, aCommitTypeTexts, color.a, aChecked)\r\n            updateBarGraphElement(\"commitType\", bArrayData, bCommitTypeSvgMolds, bCommitTypeRects, bCommitTypeTexts, color.b, bChecked)\r\n        }\r\n        // End of commitTypes\r\n\r\n        // Keywords\r\n\r\n        let keywordsX = authorX;\r\n        let keywordsY = authorY * 4 + 195;\r\n        let keywordsWidth = width * 0.5 * 0.92;\r\n        let keywordsHeight = 270;\r\n\r\n        let keywordsSvg = mainSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + keywordsX + ',' + keywordsY + ')');\r\n\r\n     \r\n\r\n       \r\n        mainSvg.append(\"text\")\r\n               .text(\"Keywords\")\r\n               .attr(\"x\", keywordsX)\r\n               .attr(\"y\", keywordsY - labelYMargin)\r\n               .style(\"font-size\", \"20px\")\r\n               .style(\"font-weight\", 350);\r\n\r\n        mainSvg.append(\"text\")\r\n               .text(\"(ranked by tf-idf score)\")\r\n               .attr(\"x\", keywordsX + 93)\r\n               .attr(\"y\", keywordsY - labelYMargin - 1)\r\n               .style(\"font-size\", \"13px\")\r\n               .style(\"font-weight\", 350);\r\n        \r\n        // Appending Axis\r\n\r\n        let keywordsAxisScale = d3.scaleLinear()\r\n            .domain([0, 1])\r\n            .range([0, keywordsWidth / 2 - 25]);\r\n     \r\n        KeywordCloud.generate(aList, bList, interList, \"keywordsCanvas_1\", \"keywordsCanvas_2\", 3, 0.5, 3, 10);\r\n        \r\n        let graphMargin = 5;\r\n        let rectMargin = 5;\r\n        let rectSingleHeight = (keywordsHeight - 2 * graphMargin - (presentingKeywordNum.current - 1) * rectMargin) / 10;\r\n        let rectSingleY = rectSingleHeight + rectMargin;\r\n\r\n        function initSmallChart(key, graphX, yourKeywordsSvg, keywordsData, defaultColor, checked, componentSvg, type) {\r\n\r\n            yourKeywordsSvg.current = componentSvg.selectAll(\".\" + key)\r\n                .data(keywordsData)\r\n                .enter()\r\n                .append(\"svg\")\r\n                .attr(\"class\", key)\r\n                .attr(\"x\", 1 + graphX)\r\n                .attr(\"y\", (d, i) => ((i) * rectSingleY + graphMargin))\r\n                .on(\"mouseover\", function (d) {\r\n                    if (type === \"keyword\") {\r\n                        if (d.inIntersection ? interChecked.current : checked.current) {\r\n                            d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.keyword)).style(\"opacity\", 1.0);\r\n                            d3.selectAll(\".\" + type + \"_text_\" + processKey(d.keyword)).style(\"font-weight\", \"bold\");\r\n\r\n                            d3.select(\".tooltipHover\")\r\n                              .style(\"left\", (d3.event.pageX) + \"px\")\t\t\r\n                              .style(\"top\", (d3.event.pageY) + \"px\")\r\n                              .style(\"opacity\", 0.8)\r\n                              .style(\"width\", \"80px\")\r\n                              .html(isLoc.current ? (d.loc*100).toFixed(2) + \" %\" : (100*d.commitNum).toFixed(2) + \" %\")\r\n                        }\r\n                        \r\n                    }\r\n                    else {\r\n                        if (isLoc.current) {\r\n                            if (d.loc.inIntersection ? interChecked.current : checked.current) {\r\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.loc.keyword)).style(\"opacity\", 1.0);\r\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(d.loc.keyword)).style(\"font-weight\", \"bold\");\r\n                                fileFullnameView.text(d.loc.keyword);\r\n                                d3.select(\".tooltipHover\")\r\n                                  .style(\"left\", (d3.event.pageX) + \"px\")\t\t\r\n                                  .style(\"top\", (d3.event.pageY) + \"px\")\r\n                                  .style(\"opacity\", 0.8)\r\n                                  .style(\"width\", \"80px\")\r\n                                  .html(isLoc.current ? (d.loc.score*100).toFixed(2) + \" %\" : (100*d.num.score).toFixed(2) + \" %\")\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (d.num.inIntersection ? interChecked.current : checked.current) {\r\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.num.keyword)).style(\"opacity\", 1.0);\r\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(d.num.keyword)).style(\"font-weight\", \"bold\");\r\n                                fileFullnameView.text(d.num.keyword);\r\n                                d3.select(\".tooltipHover\")\r\n                                  .style(\"left\", (d3.event.pageX) + \"px\")\t\t\r\n                                  .style(\"top\", (d3.event.pageY) + \"px\")\r\n                                  .style(\"opacity\", 0.8)\r\n                                  .style(\"width\", \"80px\")\r\n                                  .html(isLoc.current ? (d.loc.score*100).toFixed(2) + \" %\" : (100*d.num.score).toFixed(2) + \" %\")\r\n                            }\r\n                        }\r\n                       \r\n                    }\r\n\r\n\r\n                })\r\n                .on(\"mouseout\", function (d) {\r\n                    if (type === \"keyword\") {\r\n                        if (d.inIntersection ? interChecked.current : checked.current) {\r\n                            d3.selectAll(\".\" + type + \"_rect_\" + processKey(d.keyword)).style(\"opacity\", 0.7);\r\n                            d3.selectAll(\".\" + type + \"_text_\" + processKey(d.keyword)).style(\"font-weight\", 300);\r\n                        }\r\n                    }\r\n                    else {\r\n                        let keyword = isLoc.current ? d.loc.keyword : d.num.keyword;\r\n                        if (isLoc.current) {\r\n                            if (d.loc.inIntersection ? interChecked.current : checked.current) {\r\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(keyword)).style(\"opacity\", 0.7);\r\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(keyword)).style(\"font-weight\", 300);\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (d.num.inIntersection ? interChecked.current : checked.current) {\r\n                                d3.selectAll(\".\" + type + \"_rect_\" + processKey(keyword)).style(\"opacity\", 0.7);\r\n                                d3.selectAll(\".\" + type + \"_text_\" + processKey(keyword)).style(\"font-weight\", 300);\r\n                            }\r\n                        }\r\n                        fileFullnameView.text(\"\");\r\n                    }\r\n                    d3.select(\".tooltipHover\").style(\"opacity\", 0);\r\n\r\n                })\r\n                .on(\"mousemove\", function(d) {\r\n                    d3.select(\".tooltipHover\")\r\n                      .style(\"left\", (d3.event.pageX) + \"px\")\t\t\r\n                      .style(\"top\", (d3.event.pageY) + \"px\")\r\n                });\r\n\r\n            yourKeywordsSvg.current.append(\"rect\")\r\n                .attr(\"class\", d => type + \"_rect \" + type + \"_rect_\" + processKey(d.keyword))\r\n                .attr(\"width\", d => {\r\n                    if (type === \"keyword\")\r\n                        return keywordsAxisScale(d.loc);\r\n                    else\r\n                        return keywordsAxisScale(d.loc.score);\r\n                })\r\n                .attr(\"height\", rectSingleHeight)\r\n                .style(\"fill\", d => {\r\n                    if (type === \"keyword\")\r\n                        return d.inIntersection ? color.inter : defaultColor\r\n                    else\r\n                        return d.loc.inIntersection ? color.inter : defaultColor\r\n                })\r\n                .style(\"stroke-width\", 0)\r\n                .style(\"opacity\", 0.7)\r\n                .attr(\"rx\", 2).attr(\"ry\", 2);\r\n\r\n            yourKeywordsSvg.current.append(\"text\")\r\n                .attr(\"class\", d => type + \"_text \" + type + \"_text_\" + processKey(d.keyword))\r\n                .text(d => {\r\n                    if (type === \"keyword\")\r\n                        return d.keyword;\r\n                    else {\r\n                        if(showFileFullPath.current)\r\n                            return GitAnalyzer.reduceLongName(d.keyword, 60);\r\n                        else {\r\n                            let split = d.keyword.split(\"/\");\r\n                            return split[split.length - 1];\r\n                        }\r\n                    }\r\n                })\r\n                .attr(\"x\", 3)\r\n                .attr(\"y\", 14);\r\n        }\r\n\r\n        function updateSmallChart(yourKeywordsSvg, checked, type, defaultColor) {\r\n            yourKeywordsSvg.current.selectAll(\"rect\")\r\n                .attr(\"class\", d => {\r\n                    if (type === \"keyword\") {\r\n                        return type + \"_rect \" + type + \"_rect_\" + processKey(d.keyword);\r\n                    }\r\n                    else {\r\n                        let keyword = isLoc.current ? d.loc.keyword : d.num.keyword;\r\n                        return type + \"_rect \" + type + \"_rect_\" + processKey(keyword)\r\n                    }\r\n                })\r\n                .transition()\r\n                .duration(800)\r\n                .style(\"opacity\", function (d) {\r\n                    if (type === \"keyword\") {\r\n                        if (d.inIntersection) return interChecked.current ? 0.7 : 0.3;\r\n                        else return checked.current ? 0.7 : 0.3;\r\n                    }\r\n                    else {\r\n                        if (isLoc.current ? d.loc.inIntersection : d.num.inIntersection) return interChecked.current ? 0.7 : 0.3;\r\n                        else return checked.current ? 0.7 : 0.3;\r\n                    }\r\n                })\r\n                .attr(\"width\", function (d) {\r\n                    if (type === \"keyword\") return isLoc.current ? keywordsAxisScale(d.loc) : keywordsAxisScale(d.commitNum);\r\n                    else return isLoc.current ? keywordsAxisScale(d.loc.score) : keywordsAxisScale(d.num.score);\r\n                })\r\n                .style(\"fill\", d => {\r\n                    if (type === \"keyword\")\r\n                        return d.inIntersection ? color.inter : defaultColor\r\n                    else {\r\n                        if (isLoc.current) return d.loc.inIntersection ? color.inter : defaultColor;\r\n                        else return d.num.inIntersection ? color.inter : defaultColor;\r\n                    }\r\n\r\n                })\r\n            yourKeywordsSvg.current.selectAll(\"text\")\r\n                .attr(\"class\", d => {\r\n                    if (type === \"keyword\") {\r\n                        return type + \"_text \" + type + \"_text_\" + processKey(d.keyword);\r\n                    }\r\n                    else {\r\n                        let keyword = isLoc.current ? d.loc.keyword : d.num.keyword;\r\n                        return type + \"_text \" + type + \"_text_\" + processKey(keyword)\r\n                    }\r\n                })\r\n                .transition()\r\n                .duration(800)\r\n                .style(\"opacity\", function (d) {\r\n                    if (type === \"keyword\") {\r\n                        if (d.inIntersection) return interChecked.current ? 1 : 0;\r\n                        else return checked.current ? 1 : 0;\r\n                    }\r\n                    else {\r\n                        if (isLoc.current ? d.loc.inIntersection : d.num.inIntersection) return interChecked.current ? 1 : 0;\r\n                        else return checked.current ? 1 : 0;\r\n                    }\r\n                })\r\n                .text(d => {\r\n                    if (type === \"keyword\") {\r\n                        return d.keyword;\r\n                    }\r\n                    else {\r\n                        let split = isLoc.current ? d.loc.keyword.split(\"/\") : d.num.keyword.split(\"/\")\r\n                        return split[split.length - 1];\r\n                    }\r\n                })\r\n        }\r\n\r\n        \r\n        \r\n\r\n        updateKeywordSvg = function () {\r\n            \r\n        }\r\n\r\n\r\n        // File structure\r\n\r\n        let fileX = authorX;\r\n        let fileY = authorY * 3 - 13;\r\n        let fileWidth = width * 0.5;\r\n        let fileHeight = keywordsHeight;\r\n\r\n        let fileSvg = mainSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + fileX + ',' + fileY + ')');\r\n\r\n        mainSvg.append(\"text\")\r\n               .text(\"Files\")\r\n               .attr(\"x\", fileX)\r\n               .attr(\"y\", fileY - labelYMargin)\r\n               .style(\"font-size\", \"20px\")\r\n               .style(\"font-weight\", 350);\r\n\r\n        // Appending Axis\r\n\r\n        let fileAxisScale = d3.scaleLinear()\r\n            .domain([0, 1])\r\n            .range([0, fileWidth / 2 - 25]);\r\n        let fileAxis = d3.axisBottom(fileAxisScale).tickFormat(d3.format(\".0%\")).ticks(5);\r\n\r\n\r\n        fileSvg.append(\"g\")\r\n            .append(\"path\")\r\n            .attr(\"d\", \"M 0 0 L 0 \" + fileHeight)\r\n            .style(\"stroke\", \"black\");\r\n\r\n        fileSvg.append(\"g\")\r\n            .append(\"path\")\r\n            .attr(\"d\", \"M \" + (fileWidth / 2) + \" 0 L \" + (fileWidth / 2) + \" \" + fileHeight)\r\n            .style(\"stroke\", \"black\");\r\n\r\n        fileSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + 0 + ',' + fileHeight + ')')\r\n            .call(fileAxis);\r\n\r\n        fileSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + (fileWidth / 2) + ',' + fileHeight + ')')\r\n            .call(fileAxis);\r\n\r\n\r\n        // legends\r\n\r\n        fileSvg.append(\"text\")\r\n                    .attr(\"class\",\"ratioXLegend\")\r\n                    .text(\"CLOC / Total CLOC (%)\")\r\n                    .style(\"font-weight\", 400)\r\n                    .attr(\"x\", keywordsWidth / 4 - 66)\r\n                    .attr(\"y\", keywordsHeight + 35);\r\n\r\n        fileSvg.append(\"text\")\r\n                    .attr(\"class\",\"ratioXLegend\")\r\n                    .text(\"CLOC / Total CLOC (%)\")\r\n                    .style(\"font-weight\", 400)\r\n                    .attr(\"x\", keywordsWidth * 3 / 4 - 66)\r\n                    .attr(\"y\", keywordsHeight + 35);\r\n\r\n        let fileFullnameView = fileSvg.append(\"g\")\r\n            .attr('transform', 'translate(' + 1 + ',' + (fileHeight + 53) + ')')\r\n            .append(\"text\")\r\n            .style(\"font-weight\", \"bold\")\r\n            .text(\"\");\r\n\r\n        initSmallChart(\"a\", 0, aFileSvg, aFileArray, color.a, aChecked, fileSvg, \"file\");\r\n        initSmallChart(\"b\", (fileWidth / 2), bFileSvg, bFileArray, color.b, bChecked, fileSvg, \"file\");\r\n\r\n        updatefileSvg = function() {\r\n            if (isLoc.current) {\r\n                updateSmallChart(aFileSvg, aChecked, \"file\", color.a);\r\n                updateSmallChart(bFileSvg, bChecked, \"file\", color.b);\r\n            }\r\n            else {\r\n                updateSmallChart(aFileSvg, aChecked, \"file\", color.a);\r\n                updateSmallChart(bFileSvg, bChecked, \"file\", color.b);\r\n            }\r\n        }\r\n\r\n        updateLegends = function () {\r\n\r\n            console.log(\"UPDATESS!!\")\r\n            d3.selectAll(\".basicXLegend\")\r\n              .text(() => {\r\n                  if(isLoc.current) return \"CLOC\";\r\n                  else return \"Commit #\"\r\n              })\r\n            d3.selectAll(\".ratioXLegend\")\r\n              .text(() => {\r\n                  if(isLoc.current) return \"CLOC / Total CLOC (%)\"\r\n                  else return \"Commit # / Total Commit # (%)\"\r\n              })\r\n        }\r\n\r\n         // Hovering\r\n\r\n        let tooltip = d3.selectAll(\"#mainCompareDiv\")\r\n                        .append(\"div\")\r\n                        .attr(\"class\", \"tooltipHover\")\r\n                        .style(\"opacity\", 0);\r\n\r\n        tooltip.style(\"position\", \"absolute\")\r\n               .style(\"text-align\", \"center\")\r\n               .style(\"width\", \"120px\")\r\n               .style(\"height\", \"24px\")\r\n               .style(\"padding\", \"2px\")\r\n               .style(\"background\", \"#6ec2de\")\r\n               .style(\"border\", \"0px\")\r\n               .style(\"border-radius\", \"8px\")\r\n               .style(\"pointer-events\", \"none\");\r\n\r\n    \r\n    }, [props.capturedSummaryInfoListForCompare]);\r\n\r\n\r\n    return (\r\n        <div id =\"mainCompareDiv\">\r\n            <div id=\"title-panel\" style={{width:800}}>\r\n                <div id=\"repository-name\">\r\n                    COMPARE: \r\n                    <span style={{color: color.a}}>#{aCapturedSummaryInfo.id} ({aName})</span> vs <span style={{color: color.b}}>#{bCapturedSummaryInfo.id} ({bName})</span>\r\n                </div>\r\n                {/* <div id=\"legend-container\">\r\n                    {[ \"authors\", \"keywords\", \"commitTypes\", \"clocByFiles\", \"clocByDirs\" ].map((d, i) => {\r\n                    let color = AttributeColors [ DataTypeByNameMap[d] ][ 3 ];\r\n                    return (\r\n                        <div key={i} className=\"legend-element\" style={{\r\n                            background: color,\r\n                        }}>\r\n\r\n                            <Icon>{AttributeIconSpecs[ d ]}</Icon>\r\n                            <span>{d.split(\"clocBy\").slice(-1)[ 0 ]}</span>\r\n\r\n                        </div>\r\n                        );\r\n                    })}\r\n                </div> */}\r\n            </div>\r\n            \r\n            <div id=\"radioButtons\" style={{position: \"relative\", left: \"160px\", top: \"37px\", width: \"800px\"}}>\r\n                <RadioGroup aria-label=\"gender\" name=\"gender1\" defaultValue={\"CLOC\"} onChange={\r\n                    function(event) {\r\n                        if(event.target.value == \"CLOC\") {\r\n                            isLoc.current = true;\r\n                            updateXAxis();\r\n                            updateAuthorSvg();\r\n                            updateCommitTypeSvg();\r\n                            updateKeywordSvg();\r\n                            updatefileSvg();\r\n                            updateLegends();\r\n                        }\r\n                        else {\r\n                            isLoc.current = false;\r\n                            updateXAxis();\r\n                            updateAuthorSvg();\r\n                            updateCommitTypeSvg();\r\n                            updateKeywordSvg();\r\n                            updatefileSvg();\r\n                            updateLegends();\r\n                        }\r\n                    }\r\n                }>\r\n                    <div>\r\n                        <Radio\r\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\r\n                            color=\"primary\"\r\n                            value=\"CLOC\"\r\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\r\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\r\n                            label=\"CLOC\"\r\n                        />\r\n                        CLOC\r\n                    </div>\r\n                    <div>\r\n                        <Radio\r\n                            style={{width:\"25px\", height:\"25px\", padding:0, margin: 0}}\r\n                            color=\"primary\"\r\n                            value=\"Commit #\"\r\n                            icon={<RadioButtonUncheckedIcon fontSize=\"small\" />}\r\n                            checkedIcon={<RadioButtonCheckedIcon fontSize=\"small\" />}\r\n                            label=\"Commit #\"\r\n                        />\r\n                        Commit #\r\n                    </div>\r\n                </RadioGroup>\r\n            </div>\r\n            \r\n            \r\n            {/* <div style={{width:width, height:\"50px\"}} /> */}\r\n            <div style={{ fontSize: \"12px\", left: \"70px\", top: \"375px\", position: \"relative\", width: \"400px\", margin: \"0px\"}} >\r\n                <Checkbox\r\n                    className={\"showFileFullPath\"}\r\n                    size=\"small\"\r\n                    color=\"default\"\r\n                    defaultChecked={false}\r\n                    onChange={()=> {\r\n                        showFileFullPath.current = !showFileFullPath.current;\r\n                        if(showFileFullPath.current) {\r\n                            console.log(\"TRUE\")\r\n                            console.log(d3.selectAll(\".file_text\"))\r\n                            d3.selectAll(\".file_text\")\r\n                              .text(d => {\r\n                                  return GitAnalyzer.reduceLongName(d.keyword, 60);\r\n                              });\r\n                        }\r\n                        else {\r\n                            console.log(\"FALSE\")\r\n                            d3.selectAll(\".file_text\")\r\n                              .text(d => {\r\n                                let split = d.keyword.split(\"/\");\r\n                                return split[split.length - 1];\r\n                              })\r\n                        }\r\n                    }}\r\n                />\r\n                Show file path\r\n            </div>\r\n            <div style={{position: \"relative\", top: \"-90px\", left: \"-10px\"}}>\r\n                <svg id=\"compareClusters\" width={width} height={2000}></svg>\r\n            </div>\r\n            <div id=\"keywordsCanvas_1\" style={{ width: \"400px\", height: \"200px\", position: \"absolute\", left: \"1960px\", top: \"865px\" }}></div>\r\n            <div id=\"keywordsCanvas_2\" style={{ width: \"400px\", height: \"200px\", position: \"absolute\", left: \"2360px\", top: \"865px\" }}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DetailCompare;","import React from 'react';\r\nimport { useSelector } from \"react-redux\";\r\nimport DetailCompare from './DetailCompare';\r\n\r\nconst CompareSummary = (props) => {\r\n    const { capturedSummaryInfoListForCompare, gitAnalyzer } = props;\r\n    const { inspectionPaneWidth } = useSelector(state => state.layout);\r\n\r\n    if (capturedSummaryInfoListForCompare === undefined) return (<div></div>);\r\n// console.log(\"capturedSummaryInfoListForCompare\", capturedSummaryInfoListForCompare);\r\n    return (\r\n        <div\r\n          id=\"compareSummaryDiv\"\r\n          style={{\r\n            // visibility:\"hidden\",\r\n            // width:clusterOverviewWidth + \"px\"\r\n            width: \"1676px\",\r\n          }}\r\n          className=\"flexVerticalPane\"\r\n        >\r\n            {/* <div id=\"branchSummaryCompare\">\r\n                {capturedSummaryInfoListForCompare.map( (capturedSummaryInfo) => (\r\n                    <div\r\n                        key = {capturedSummaryInfo.id}\r\n                    >\r\n                        {capturedSummaryInfo.id}\r\n                    </div>\r\n                ))}\r\n            </div> */}\r\n            <div id=\"detailCompare\">\r\n                <DetailCompare\r\n                    // gitAnalyzer={gitAnalyzer}\r\n                    capturedSummaryInfoListForCompare={capturedSummaryInfoListForCompare}\r\n                    width={inspectionPaneWidth}\r\n                    corpusData={gitAnalyzer.corpusData}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CompareSummary","import React, { useState } from 'react';\r\nimport { useDispatch } from \"react-redux\";\r\nimport * as actions from '../modules';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    container: {\r\n        display: 'flex',    \r\n        flexDirection: 'column',\r\n        paddingLeft: theme.spacing(1),\r\n        paddingRight: theme.spacing(1),\r\n    },\r\n    textArea: {\r\n        marginBottom: \"8px\",\r\n        minHeight: \"50px\",\r\n        fontSize: \"12px\",\r\n    }\r\n}));\r\n\r\nconst HighlightQuery = (props) => {\r\n    const classes = useStyles();\r\n    const [ query, setQuery ] = useState(\"\");\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <form className={classes.container} noValidate autoComplete=\"on\">\r\n            <Form.Control\r\n                    className={classes.textArea}\r\n                    rows={2}\r\n                    as=\"textarea\" \r\n                    placeholder=\"KEYWORD FOR HIGHLIGHT (including tag, branch: ex. pr/123)\"\r\n                    onChange={(event) => {\r\n                        setQuery(event.target.value);\r\n                    }}\r\n                />\r\n\r\n                <Button style={{ \"fontSize\": \"11px\" }} variant=\"outlined\" size=\"small\"\r\n                    onClick={() => {\r\n                        let qList = [];\r\n                        qList = query.split(\"\\n\").map(d => d.trim()).filter(d => d !== \"\");\r\n                        dispatch(actions.updateHighlightQuery(qList));\r\n                    }}>\r\n                    HIGHLIGHT COMMITS\r\n                </Button>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default HighlightQuery;","export const AttributeIconSpecs = {\r\n    \"authors\": 'person',\r\n    \"keywords\": 'insert_comment',\r\n    \"commitTypes\": 'label',\r\n    \"clocByFiles\": 'insert_drive_file',\r\n    \"touchCountByFiles\": 'insert_drive_file',\r\n    \"clocByDirs\": 'folder',\r\n    \"touchCountByDirs\": 'folder',\r\n}","import React, { useRef } from 'react';\r\nimport TemporalFilter from './components/TemporalFilter';\r\nimport GitAnalyzer from './components/analyzer/GitAnalyzer';\r\nimport TemporalSelector from './components/TemporalSelector';\r\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\r\nimport CommitGraph from './components/CommitGraph';\r\n// import ClusterSummary from './components/ClusterSummary';\r\nimport { AttributeColors, BranchColors, changeRGBColorByOpacity } from './components/ColorClasses';\r\n\r\nimport './App.css';\r\nimport KeywordTextAreaFilter from './components/KeywordTextAreaFilter';\r\nimport PreferenceSliders from './components/PreferenceSliders';\r\nimport ManageParameters from './components/ManageParameters';\r\nimport InformationFragments from './components/InformationFragments';\r\nimport CaptureTab from './components/CaptureTab';\r\n// import Inspection from './components/Inspection';\r\nimport CompareSummary from './components/CompareSummary';\r\nimport HighlightQuery from './components/HighlightQuery';\r\nimport { SidePanelContentUnit } from './components/container/SidePanelContentUnit';\r\nimport Button from '@material-ui/core/Button';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport { AttributeIconSpecs } from './components/LegendIcons';\r\nimport { DataTypeByNameMap } from './components/analyzer/GithruClasses';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport * as actions from './modules';\r\n\r\n\r\nconst AppV2 = props => {\r\n  const defaultThresholdStep = 25;\r\n  const gitAnalyzerRef = useRef(undefined);\r\n  // const initRef = useRef(true);\r\n  // Importing json files\r\n  const repo = props.match.params.repo;\r\n  const mainStemBranchName = props.match.params.mainStemBranchName;\r\n  console.log(\"mainStemBranchName\", repo, mainStemBranchName);\r\n\r\n  const releasePrefix = props.match.params.releasePrefix;\r\n  const data = require('./json/' + repo + '.commits.json');\r\n  const scoreData = require('./json/' + repo + '.score.json');\r\n  const corpusData = require('./json/' + repo + '.corpus.json');\r\n  const pullData = require('./json/' + repo + '.pulls.json');\r\n\r\n\r\n  const {\r\n    leftPaneWidth,\r\n    clusterOverviewWidth,\r\n    rightPaneWidth,\r\n    rightPaneMargin,\r\n    // selectedClusterDataForSummary,\r\n    temporalSelectorHeight,\r\n    clusterOverviewHeight,\r\n    orgClusterOverviewHeight,\r\n    capturedSummaryInfoListForCompare,\r\n    useHeuristicMerge,\r\n\r\n  } = useSelector(state => ({\r\n    leftPaneWidth: state.layout.leftPaneWidth,\r\n    clusterOverviewWidth: state.layout.clusterOverviewWidth,\r\n    rightPaneWidth: state.layout.rightPaneWidth,\r\n    rightPaneMargin: state.layout.rightPaneMargin,\r\n    // selectedClusterDataForSummary: state.selectedClusterDataForSummary,\r\n    temporalSelectorHeight: state.layout.temporalSelectorHeight,\r\n    clusterOverviewHeight: state.layout.clusterOverviewHeight,\r\n    orgClusterOverviewHeight: state.layout.orgClusterOverviewHeight,\r\n    capturedSummaryInfoListForCompare: state.capturedSummaryInfoListForCompare,\r\n    useHeuristicMerge: state.useHeuristicMerge,\r\n\r\n  }), shallowEqual);\r\n\r\n  const prevUseHeuristicMergeRef = useRef(undefined);\r\n  if (gitAnalyzerRef.current === undefined || prevUseHeuristicMergeRef.current !== useHeuristicMerge) {\r\n    gitAnalyzerRef.current = new GitAnalyzer(data, scoreData, corpusData, pullData,\r\n      defaultThresholdStep, repo, releasePrefix, mainStemBranchName);\r\n    // initRef.current = false;\r\n    prevUseHeuristicMergeRef.current = useHeuristicMerge;\r\n  }\r\n  const gitAnalyzer = gitAnalyzerRef.current;\r\n\r\n  return (\r\n    <div className=\"bodyDiv flexContainer\" id=\"app-screen-root\">\r\n      <div className=\"sidebar\" id=\"main-sidebar\">\r\n        <div className=\"flexVerticalContainer\">\r\n          <SidePanelContentUnit title=\"Global Temporal Filter\" show={true}>\r\n            <TemporalFilter\r\n              gitAnalyzer={gitAnalyzer}\r\n            />\r\n          </SidePanelContentUnit>\r\n\r\n          <SidePanelContentUnit title=\"Preferences Weights\" show={true}>\r\n            <PreferenceSliders />\r\n          </SidePanelContentUnit>\r\n\r\n          <SidePanelContentUnit title=\"Parameters\">\r\n            <ManageParameters />\r\n          </SidePanelContentUnit>\r\n\r\n          <SidePanelContentUnit title=\"Highlight\">\r\n            <HighlightQuery />\r\n          </SidePanelContentUnit>\r\n\r\n          <SidePanelContentUnit title=\"Keyword Filter\" show={true}>\r\n            <KeywordTextAreaFilter\r\n              gitAnalyzer={gitAnalyzer}\r\n            />            \r\n          </SidePanelContentUnit>\r\n          \r\n        </div>\r\n      </div>\r\n\r\n\r\n      <div className=\"flexVerticalContainer\" id=\"center-pane\">\r\n        <div id=\"title-panel\">\r\n          <div id=\"repository-name\">\r\n            GIThru: Contextual History of \"{repo}\" repository.\r\n          </div>\r\n          <div id=\"legend-container\">\r\n            ATTRS:\r\n            {[ \"authors\", \"keywords\", \"commitTypes\", \"clocByFiles\", \"clocByDirs\" ].map((d, i) => {\r\n            let color = AttributeColors[ DataTypeByNameMap[d] ][ 3 ];\r\n            return (\r\n              <div key={i} className=\"legend-element\" style={{\r\n                background: color,\r\n              }}>\r\n\r\n                <Icon>{AttributeIconSpecs[ d ]}</Icon>\r\n                <span>{d.split(\"clocBy\").slice(-1)[ 0 ]}</span>\r\n\r\n              </div>\r\n            );\r\n          })}\r\n            <div style={{ width: \"20px\" }} />\r\n            BRANCH:\r\n            {Object.entries(BranchColors).map((d, i) => {\r\n              let [ key, color ] = d;\r\n              color = changeRGBColorByOpacity(color, 0.7);\r\n\r\n              return (\r\n                <div key={i} className=\"legend-element\" style={{\r\n                  background: color,\r\n                }}>{key}</div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div id=\"main-panel-content\">\r\n          <div id=\"overviewPane\">\r\n            <TemporalSelector\r\n              gitAnalyzer={gitAnalyzer}\r\n            // threshold={this.state.threshold}\r\n            // keywords={this.state.keywords}\r\n            />\r\n          </div>\r\n          <div id=\"clusterAndDetail\" className=\"flexContainer\">\r\n            <div id=\"clusterAndDetailPane\" className=\"flexVerticalContainer\">\r\n              <div id=\"clusterPane\">\r\n                <CommitGraph\r\n                  gitAnalyzer={gitAnalyzerRef.current}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        id=\"rightPane\"\r\n        style={{\r\n          width: rightPaneWidth + \"px\",\r\n        }}\r\n        className=\"flexVerticalContainer\"\r\n      >\r\n        <div\r\n          id=\"verticalTab\"\r\n          style={{\r\n            width: rightPaneWidth + \"px\",\r\n          }}\r\n        >\r\n          <CaptureTab\r\n            width={rightPaneWidth}\r\n            height={temporalSelectorHeight + orgClusterOverviewHeight}\r\n          />\r\n        </div>\r\n        <div style={{\"background-color\": \"#7a7c90\", height : \"439px\"}}>\r\n          {/*<div id=\"fragments\">\r\n            <InformationFragments\r\n              width={rightPaneWidth}\r\n            />\r\n        </div>*/}\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <ScrollButton />\r\n      </div>\r\n      <div\r\n        id=\"comparePane\"\r\n        style={{\r\n          width: \"1900px\",\r\n          display: \"none\",\r\n        }}\r\n      >\r\n        <CompareSummary\r\n          gitAnalyzer={gitAnalyzer}\r\n          capturedSummaryInfoListForCompare={capturedSummaryInfoListForCompare}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppV2;\r\n\r\n\r\nconst ScrollButton = () => {\r\n  const { scrollToRight } = useSelector(state => state);\r\n  const dispatch = useDispatch();  \r\n  \r\n  return (\r\n    <div>\r\n      {scrollToRight &&\r\n        <Button onClick={() => {\r\n          dispatch(actions.updateScrollToRight(false));\r\n          window.scrollTo(0, 0);\r\n        }}>\r\n          <ArrowBackIcon fontSize=\"large\"/>\r\n        </Button>\r\n      }\r\n      {!scrollToRight &&\r\n        <Button onClick={() => {\r\n          dispatch(actions.updateScrollToRight(true));\r\n          window.scrollTo({top:0, left:4000});\r\n        }}>\r\n          <ArrowForwardIcon fontSize=\"large\" />\r\n        </Button>\r\n      }\r\n    </div>\r\n  );\r\n}","import React, { Component } from 'react';\r\n\r\n\r\nclass Home extends Component {\r\n    state = {\r\n        id: ''\r\n      }\r\n      appChange = (e) => {\r\n        this.setState({\r\n          id: e.target.value\r\n        });\r\n      }\r\n\r\n      appClick = () => {\r\n        window.open(window.location.href + \"v2/\" + this.state.id, \"_self\");\r\n      }\r\n      render() {\r\n        const { id } = this.state;\r\n        const { appChange, appClick } = this;\r\n        return (\r\n          <div className=\"App\">\r\n            <header className=\"App-header\">\r\n              <input type=\"text\" placeholder=\"Repository name\" value={id} onChange={appChange} />\r\n              <button onClick={appClick}>Open!!</button>\r\n            </header>\r\n          </div>\r\n        );\r\n      }\r\n}\r\n\r\n\r\nexport default Home;","import React from 'react';\r\nimport v2 from './AppV2';\r\nimport Home from './Home';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <Switch>\r\n                <Route exact path=\"/\" component = { Home }/>\r\n                <Route path = \"/v2/:repo/:releasePrefix/:mainStemBranchName\" component = { v2 }/>\r\n                <Route path = \"/v2/:repo/:releasePrefix\" component = { v2 }/>\r\n                <Route path = \"/v2/:repo/\" component = { v2 }/>\r\n            </Switch>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n// import thunk from 'redux-thunk'\r\n\r\n// redux import\r\nimport { createStore } from 'redux';\r\nimport reducers from './modules';\r\nimport { Provider } from 'react-redux';\r\n\r\nconst store = createStore(reducers\r\n        ,window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n        // ,applyMiddleware(thunk));\r\n);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <BrowserRouter>\r\n            <App />\r\n        </BrowserRouter>\r\n    </Provider>\r\n    , \r\n    document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();"],"sourceRoot":""}